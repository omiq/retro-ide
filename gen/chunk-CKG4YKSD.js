import{a as ga,b as Ii,c as ml}from"./chunk-T4FRG4BA.js";import{a as va,b as ya,c as gl}from"./chunk-IVXKGBIL.js";import{t as ha,u as ma}from"./chunk-CO72NYTV.js";import{$ as pa,B as Jt,C as co,D as Fi,E as yi,F as Yi,H as fo,R as po,b as Cn,d as kt,e as uo,f as ct,g as br,k as fa,m as Pn,n as kn,o as qi,p as gi,q as da,v as Vi,w as Rt,x as vi}from"./chunk-KXQZZRQB.js";import{a as ao,b as ca,c as zi,d as so,e as lo}from"./chunk-WAARL7ET.js";var mo=so((ba,ho)=>{(function(s){if(typeof ba=="object"&&typeof ho!="undefined")ho.exports=s();else if(typeof define=="function"&&define.amd)define([],s);else{var r;typeof window!="undefined"?r=window:typeof global!="undefined"?r=global:typeof self!="undefined"?r=self:r=this,r.localforage=s()}})(function(){var s,r,i;return function l(f,m,b){function _(oe,Se){if(!m[oe]){if(!f[oe]){var G=typeof zi=="function"&&zi;if(!Se&&G)return G(oe,!0);if(C)return C(oe,!0);var z=new Error("Cannot find module '"+oe+"'");throw z.code="MODULE_NOT_FOUND",z}var Z=m[oe]={exports:{}};f[oe][0].call(Z.exports,function(Ee){var V=f[oe][1][Ee];return _(V||Ee)},Z,Z.exports,l,f,m,b)}return m[oe].exports}for(var C=typeof zi=="function"&&zi,N=0;N<b.length;N++)_(b[N]);return _}({1:[function(l,f,m){(function(b){"use strict";var _=b.MutationObserver||b.WebKitMutationObserver,C;if(_){var N=0,oe=new _(Ee),Se=b.document.createTextNode("");oe.observe(Se,{characterData:!0}),C=function(){Se.data=N=++N%2}}else if(!b.setImmediate&&typeof b.MessageChannel!="undefined"){var G=new b.MessageChannel;G.port1.onmessage=Ee,C=function(){G.port2.postMessage(0)}}else"document"in b&&"onreadystatechange"in b.document.createElement("script")?C=function(){var O=b.document.createElement("script");O.onreadystatechange=function(){Ee(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},b.document.documentElement.appendChild(O)}:C=function(){setTimeout(Ee,0)};var z,Z=[];function Ee(){z=!0;for(var O,H,I=Z.length;I;){for(H=Z,Z=[],O=-1;++O<I;)H[O]();I=Z.length}z=!1}f.exports=V;function V(O){Z.push(O)===1&&!z&&C()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(l,f,m){"use strict";var b=l(1);function _(){}var C={},N=["REJECTED"],oe=["FULFILLED"],Se=["PENDING"];f.exports=G;function G(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=Se,this.queue=[],this.outcome=void 0,o!==_&&V(this,o)}G.prototype.catch=function(o){return this.then(null,o)},G.prototype.then=function(o,xe){if(typeof o!="function"&&this.state===oe||typeof xe!="function"&&this.state===N)return this;var le=new this.constructor(_);if(this.state!==Se){var Oe=this.state===oe?o:xe;Z(le,Oe,this.outcome)}else this.queue.push(new z(le,o,xe));return le};function z(o,xe,le){this.promise=o,typeof xe=="function"&&(this.onFulfilled=xe,this.callFulfilled=this.otherCallFulfilled),typeof le=="function"&&(this.onRejected=le,this.callRejected=this.otherCallRejected)}z.prototype.callFulfilled=function(o){C.resolve(this.promise,o)},z.prototype.otherCallFulfilled=function(o){Z(this.promise,this.onFulfilled,o)},z.prototype.callRejected=function(o){C.reject(this.promise,o)},z.prototype.otherCallRejected=function(o){Z(this.promise,this.onRejected,o)};function Z(o,xe,le){b(function(){var Oe;try{Oe=xe(le)}catch(rt){return C.reject(o,rt)}Oe===o?C.reject(o,new TypeError("Cannot resolve promise with itself")):C.resolve(o,Oe)})}C.resolve=function(o,xe){var le=O(Ee,xe);if(le.status==="error")return C.reject(o,le.value);var Oe=le.value;if(Oe)V(o,Oe);else{o.state=oe,o.outcome=xe;for(var rt=-1,Me=o.queue.length;++rt<Me;)o.queue[rt].callFulfilled(xe)}return o},C.reject=function(o,xe){o.state=N,o.outcome=xe;for(var le=-1,Oe=o.queue.length;++le<Oe;)o.queue[le].callRejected(xe);return o};function Ee(o){var xe=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof xe=="function")return function(){xe.apply(o,arguments)}}function V(o,xe){var le=!1;function Oe(Qe){le||(le=!0,C.reject(o,Qe))}function rt(Qe){le||(le=!0,C.resolve(o,Qe))}function Me(){xe(rt,Oe)}var be=O(Me);be.status==="error"&&Oe(be.value)}function O(o,xe){var le={};try{le.value=o(xe),le.status="success"}catch(Oe){le.status="error",le.value=Oe}return le}G.resolve=H;function H(o){return o instanceof this?o:C.resolve(new this(_),o)}G.reject=I;function I(o){var xe=new this(_);return C.reject(xe,o)}G.all=M;function M(o){var xe=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var le=o.length,Oe=!1;if(!le)return this.resolve([]);for(var rt=new Array(le),Me=0,be=-1,Qe=new this(_);++be<le;)At(o[be],be);return Qe;function At(Er,vt){xe.resolve(Er).then(Tr,function(yt){Oe||(Oe=!0,C.reject(Qe,yt))});function Tr(yt){rt[vt]=yt,++Me===le&&!Oe&&(Oe=!0,C.resolve(Qe,rt))}}}G.race=B;function B(o){var xe=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var le=o.length,Oe=!1;if(!le)return this.resolve([]);for(var rt=-1,Me=new this(_);++rt<le;)be(o[rt]);return Me;function be(Qe){xe.resolve(Qe).then(function(At){Oe||(Oe=!0,C.resolve(Me,At))},function(At){Oe||(Oe=!0,C.reject(Me,At))})}}},{"1":1}],3:[function(l,f,m){(function(b){"use strict";typeof b.Promise!="function"&&(b.Promise=l(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(l,f,m){"use strict";var b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};function _(p,w){if(!(p instanceof w))throw new TypeError("Cannot call a class as a function")}function C(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(p){return}}var N=C();function oe(){try{if(!N||!N.open)return!1;var p=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),w=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!p||w)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(h){return!1}}function Se(p,w){p=p||[],w=w||{};try{return new Blob(p,w)}catch(T){if(T.name!=="TypeError")throw T;for(var h=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,S=new h,P=0;P<p.length;P+=1)S.append(p[P]);return S.getBlob(w.type)}}typeof Promise=="undefined"&&l(3);var G=Promise;function z(p,w){w&&p.then(function(h){w(null,h)},function(h){w(h)})}function Z(p,w,h){typeof w=="function"&&p.then(w),typeof h=="function"&&p.catch(h)}function Ee(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}function V(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var O="local-forage-detect-blob-support",H=void 0,I={},M=Object.prototype.toString,B="readonly",o="readwrite";function xe(p){for(var w=p.length,h=new ArrayBuffer(w),S=new Uint8Array(h),P=0;P<w;P++)S[P]=p.charCodeAt(P);return h}function le(p){return new G(function(w){var h=p.transaction(O,o),S=Se([""]);h.objectStore(O).put(S,"key"),h.onabort=function(P){P.preventDefault(),P.stopPropagation(),w(!1)},h.oncomplete=function(){var P=navigator.userAgent.match(/Chrome\/(\d+)/),T=navigator.userAgent.match(/Edge\//);w(T||!P||parseInt(P[1],10)>=43)}}).catch(function(){return!1})}function Oe(p){return typeof H=="boolean"?G.resolve(H):le(p).then(function(w){return H=w,H})}function rt(p){var w=I[p.name],h={};h.promise=new G(function(S,P){h.resolve=S,h.reject=P}),w.deferredOperations.push(h),w.dbReady?w.dbReady=w.dbReady.then(function(){return h.promise}):w.dbReady=h.promise}function Me(p){var w=I[p.name],h=w.deferredOperations.pop();if(h)return h.resolve(),h.promise}function be(p,w){var h=I[p.name],S=h.deferredOperations.pop();if(S)return S.reject(w),S.promise}function Qe(p,w){return new G(function(h,S){if(I[p.name]=I[p.name]||Ye(),p.db)if(w)rt(p),p.db.close();else return h(p.db);var P=[p.name];w&&P.push(p.version);var T=N.open.apply(N,P);w&&(T.onupgradeneeded=function(j){var q=T.result;try{q.createObjectStore(p.storeName),j.oldVersion<=1&&q.createObjectStore(O)}catch(K){if(K.name==="ConstraintError")console.warn('The database "'+p.name+'" has been upgraded from version '+j.oldVersion+" to version "+j.newVersion+', but the storage "'+p.storeName+'" already exists.');else throw K}}),T.onerror=function(j){j.preventDefault(),S(T.error)},T.onsuccess=function(){var j=T.result;j.onversionchange=function(q){q.target.close()},h(j),Me(p)}})}function At(p){return Qe(p,!1)}function Er(p){return Qe(p,!0)}function vt(p,w){if(!p.db)return!0;var h=!p.db.objectStoreNames.contains(p.storeName),S=p.version<p.db.version,P=p.version>p.db.version;if(S&&(p.version!==w&&console.warn('The database "'+p.name+`" can't be downgraded from version `+p.db.version+" to version "+p.version+"."),p.version=p.db.version),P||h){if(h){var T=p.db.version+1;T>p.version&&(p.version=T)}return!0}return!1}function Tr(p){return new G(function(w,h){var S=new FileReader;S.onerror=h,S.onloadend=function(P){var T=btoa(P.target.result||"");w({__local_forage_encoded_blob:!0,data:T,type:p.type})},S.readAsBinaryString(p)})}function yt(p){var w=xe(atob(p.data));return Se([w],{type:p.type})}function Zr(p){return p&&p.__local_forage_encoded_blob}function ei(p){var w=this,h=w._initReady().then(function(){var S=I[w._dbInfo.name];if(S&&S.dbReady)return S.dbReady});return Z(h,p,p),h}function Ve(p){rt(p);for(var w=I[p.name],h=w.forages,S=0;S<h.length;S++){var P=h[S];P._dbInfo.db&&(P._dbInfo.db.close(),P._dbInfo.db=null)}return p.db=null,At(p).then(function(T){return p.db=T,vt(p)?Er(p):T}).then(function(T){p.db=w.db=T;for(var j=0;j<h.length;j++)h[j]._dbInfo.db=T}).catch(function(T){throw be(p,T),T})}function bt(p,w,h,S){S===void 0&&(S=1);try{var P=p.db.transaction(p.storeName,w);h(null,P)}catch(T){if(S>0&&(!p.db||T.name==="InvalidStateError"||T.name==="NotFoundError"))return G.resolve().then(function(){if(!p.db||T.name==="NotFoundError"&&!p.db.objectStoreNames.contains(p.storeName)&&p.version<=p.db.version)return p.db&&(p.version=p.db.version+1),Er(p)}).then(function(){return Ve(p).then(function(){bt(p,w,h,S-1)})}).catch(h);h(T)}}function Ye(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Si(p){var w=this,h={db:null};if(p)for(var S in p)h[S]=p[S];var P=I[h.name];P||(P=Ye(),I[h.name]=P),P.forages.push(w),w._initReady||(w._initReady=w.ready,w.ready=ei);var T=[];function j(){return G.resolve()}for(var q=0;q<P.forages.length;q++){var K=P.forages[q];K!==w&&T.push(K._initReady().catch(j))}var Q=P.forages.slice(0);return G.all(T).then(function(){return h.db=P.db,At(h)}).then(function(Y){return h.db=Y,vt(h,w._defaultConfig.version)?Er(h):Y}).then(function(Y){h.db=P.db=Y,w._dbInfo=h;for(var ce=0;ce<Q.length;ce++){var _e=Q[ce];_e!==w&&(_e._dbInfo.db=h.db,_e._dbInfo.version=h.version)}})}function Be(p,w){var h=this;p=Ee(p);var S=new G(function(P,T){h.ready().then(function(){bt(h._dbInfo,B,function(j,q){if(j)return T(j);try{var K=q.objectStore(h._dbInfo.storeName),Q=K.get(p);Q.onsuccess=function(){var Y=Q.result;Y===void 0&&(Y=null),Zr(Y)&&(Y=yt(Y)),P(Y)},Q.onerror=function(){T(Q.error)}}catch(Y){T(Y)}})}).catch(T)});return z(S,w),S}function Sr(p,w){var h=this,S=new G(function(P,T){h.ready().then(function(){bt(h._dbInfo,B,function(j,q){if(j)return T(j);try{var K=q.objectStore(h._dbInfo.storeName),Q=K.openCursor(),Y=1;Q.onsuccess=function(){var ce=Q.result;if(ce){var _e=ce.value;Zr(_e)&&(_e=yt(_e));var Ie=p(_e,ce.key,Y++);Ie!==void 0?P(Ie):ce.continue()}else P()},Q.onerror=function(){T(Q.error)}}catch(ce){T(ce)}})}).catch(T)});return z(S,w),S}function ti(p,w,h){var S=this;p=Ee(p);var P=new G(function(T,j){var q;S.ready().then(function(){return q=S._dbInfo,M.call(w)==="[object Blob]"?Oe(q.db).then(function(K){return K?w:Tr(w)}):w}).then(function(K){bt(S._dbInfo,o,function(Q,Y){if(Q)return j(Q);try{var ce=Y.objectStore(S._dbInfo.storeName);K===null&&(K=void 0);var _e=ce.put(K,p);Y.oncomplete=function(){K===void 0&&(K=null),T(K)},Y.onabort=Y.onerror=function(){var Ie=_e.error?_e.error:_e.transaction.error;j(Ie)}}catch(Ie){j(Ie)}})}).catch(j)});return z(P,h),P}function ri(p,w){var h=this;p=Ee(p);var S=new G(function(P,T){h.ready().then(function(){bt(h._dbInfo,o,function(j,q){if(j)return T(j);try{var K=q.objectStore(h._dbInfo.storeName),Q=K.delete(p);q.oncomplete=function(){P()},q.onerror=function(){T(Q.error)},q.onabort=function(){var Y=Q.error?Q.error:Q.transaction.error;T(Y)}}catch(Y){T(Y)}})}).catch(T)});return z(S,w),S}function wt(p){var w=this,h=new G(function(S,P){w.ready().then(function(){bt(w._dbInfo,o,function(T,j){if(T)return P(T);try{var q=j.objectStore(w._dbInfo.storeName),K=q.clear();j.oncomplete=function(){S()},j.onabort=j.onerror=function(){var Q=K.error?K.error:K.transaction.error;P(Q)}}catch(Q){P(Q)}})}).catch(P)});return z(h,p),h}function Ai(p){var w=this,h=new G(function(S,P){w.ready().then(function(){bt(w._dbInfo,B,function(T,j){if(T)return P(T);try{var q=j.objectStore(w._dbInfo.storeName),K=q.count();K.onsuccess=function(){S(K.result)},K.onerror=function(){P(K.error)}}catch(Q){P(Q)}})}).catch(P)});return z(h,p),h}function Zt(p,w){var h=this,S=new G(function(P,T){if(p<0){P(null);return}h.ready().then(function(){bt(h._dbInfo,B,function(j,q){if(j)return T(j);try{var K=q.objectStore(h._dbInfo.storeName),Q=!1,Y=K.openKeyCursor();Y.onsuccess=function(){var ce=Y.result;if(!ce){P(null);return}p===0||Q?P(ce.key):(Q=!0,ce.advance(p))},Y.onerror=function(){T(Y.error)}}catch(ce){T(ce)}})}).catch(T)});return z(S,w),S}function Wt(p){var w=this,h=new G(function(S,P){w.ready().then(function(){bt(w._dbInfo,B,function(T,j){if(T)return P(T);try{var q=j.objectStore(w._dbInfo.storeName),K=q.openKeyCursor(),Q=[];K.onsuccess=function(){var Y=K.result;if(!Y){S(Q);return}Q.push(Y.key),Y.continue()},K.onerror=function(){P(K.error)}}catch(Y){P(Y)}})}).catch(P)});return z(h,p),h}function jr(p,w){w=V.apply(this,arguments);var h=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||h.name,p.storeName=p.storeName||h.storeName);var S=this,P;if(!p.name)P=G.reject("Invalid arguments");else{var T=p.name===h.name&&S._dbInfo.db,j=T?G.resolve(S._dbInfo.db):At(p).then(function(q){var K=I[p.name],Q=K.forages;K.db=q;for(var Y=0;Y<Q.length;Y++)Q[Y]._dbInfo.db=q;return q});p.storeName?P=j.then(function(q){if(!!q.objectStoreNames.contains(p.storeName)){var K=q.version+1;rt(p);var Q=I[p.name],Y=Q.forages;q.close();for(var ce=0;ce<Y.length;ce++){var _e=Y[ce];_e._dbInfo.db=null,_e._dbInfo.version=K}var Ie=new G(function(Ne,Ue){var je=N.open(p.name,K);je.onerror=function(Tt){var di=je.result;di.close(),Ue(Tt)},je.onupgradeneeded=function(){var Tt=je.result;Tt.deleteObjectStore(p.storeName)},je.onsuccess=function(){var Tt=je.result;Tt.close(),Ne(Tt)}});return Ie.then(function(Ne){Q.db=Ne;for(var Ue=0;Ue<Y.length;Ue++){var je=Y[Ue];je._dbInfo.db=Ne,Me(je._dbInfo)}}).catch(function(Ne){throw(be(p,Ne)||G.resolve()).catch(function(){}),Ne})}}):P=j.then(function(q){rt(p);var K=I[p.name],Q=K.forages;q.close();for(var Y=0;Y<Q.length;Y++){var ce=Q[Y];ce._dbInfo.db=null}var _e=new G(function(Ie,Ne){var Ue=N.deleteDatabase(p.name);Ue.onerror=function(){var je=Ue.result;je&&je.close(),Ne(Ue.error)},Ue.onblocked=function(){console.warn('dropInstance blocked for database "'+p.name+'" until all open connections are closed')},Ue.onsuccess=function(){var je=Ue.result;je&&je.close(),Ie(je)}});return _e.then(function(Ie){K.db=Ie;for(var Ne=0;Ne<Q.length;Ne++){var Ue=Q[Ne];Me(Ue._dbInfo)}}).catch(function(Ie){throw(be(p,Ie)||G.resolve()).catch(function(){}),Ie})})}return z(P,w),P}var er={_driver:"asyncStorage",_initStorage:Si,_support:oe(),iterate:Sr,getItem:Be,setItem:ti,removeItem:ri,clear:wt,length:Ai,key:Zt,keys:Wt,dropInstance:jr};function Ar(){return typeof openDatabase=="function"}var ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut="~~local_forage_type~",Cr=/^~~local_forage_type~([^~]+)~/,tr="__lfsc__:",$r=tr.length,dt="arbf",rr="blob",zt="si08",ae="ui08",ze="uic8",ir="si16",ii="si32",ni="ur16",Ur="ui32",Pr="fl32",nr="fl64",pt=$r+dt.length,Ct=Object.prototype.toString;function st(p){var w=p.length*.75,h=p.length,S,P=0,T,j,q,K;p[p.length-1]==="="&&(w--,p[p.length-2]==="="&&w--);var Q=new ArrayBuffer(w),Y=new Uint8Array(Q);for(S=0;S<h;S+=4)T=ft.indexOf(p[S]),j=ft.indexOf(p[S+1]),q=ft.indexOf(p[S+2]),K=ft.indexOf(p[S+3]),Y[P++]=T<<2|j>>4,Y[P++]=(j&15)<<4|q>>2,Y[P++]=(q&3)<<6|K&63;return Q}function qt(p){var w=new Uint8Array(p),h="",S;for(S=0;S<w.length;S+=3)h+=ft[w[S]>>2],h+=ft[(w[S]&3)<<4|w[S+1]>>4],h+=ft[(w[S+1]&15)<<2|w[S+2]>>6],h+=ft[w[S+2]&63];return w.length%3==2?h=h.substring(0,h.length-1)+"=":w.length%3==1&&(h=h.substring(0,h.length-2)+"=="),h}function dr(p,w){var h="";if(p&&(h=Ct.call(p)),p&&(h==="[object ArrayBuffer]"||p.buffer&&Ct.call(p.buffer)==="[object ArrayBuffer]")){var S,P=tr;p instanceof ArrayBuffer?(S=p,P+=dt):(S=p.buffer,h==="[object Int8Array]"?P+=zt:h==="[object Uint8Array]"?P+=ae:h==="[object Uint8ClampedArray]"?P+=ze:h==="[object Int16Array]"?P+=ir:h==="[object Uint16Array]"?P+=ni:h==="[object Int32Array]"?P+=ii:h==="[object Uint32Array]"?P+=Ur:h==="[object Float32Array]"?P+=Pr:h==="[object Float64Array]"?P+=nr:w(new Error("Failed to get type for BinaryArray"))),w(P+qt(S))}else if(h==="[object Blob]"){var T=new FileReader;T.onload=function(){var j=ut+p.type+"~"+qt(this.result);w(tr+rr+j)},T.readAsArrayBuffer(p)}else try{w(JSON.stringify(p))}catch(j){console.error("Couldn't convert value into a JSON string: ",p),w(null,j)}}function Wr(p){if(p.substring(0,$r)!==tr)return JSON.parse(p);var w=p.substring(pt),h=p.substring($r,pt),S;if(h===rr&&Cr.test(w)){var P=w.match(Cr);S=P[1],w=w.substring(P[0].length)}var T=st(w);switch(h){case dt:return T;case rr:return Se([T],{type:S});case zt:return new Int8Array(T);case ae:return new Uint8Array(T);case ze:return new Uint8ClampedArray(T);case ir:return new Int16Array(T);case ni:return new Uint16Array(T);case ii:return new Int32Array(T);case Ur:return new Uint32Array(T);case Pr:return new Float32Array(T);case nr:return new Float64Array(T);default:throw new Error("Unkown type: "+h)}}var Hr={serialize:dr,deserialize:Wr,stringToBuffer:st,bufferToString:qt};function kr(p,w,h,S){p.executeSql("CREATE TABLE IF NOT EXISTS "+w.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],h,S)}function Ht(p){var w=this,h={db:null};if(p)for(var S in p)h[S]=typeof p[S]!="string"?p[S].toString():p[S];var P=new G(function(T,j){try{h.db=openDatabase(h.name,String(h.version),h.description,h.size)}catch(q){return j(q)}h.db.transaction(function(q){kr(q,h,function(){w._dbInfo=h,T()},function(K,Q){j(Q)})},j)});return h.serializer=Hr,P}function _t(p,w,h,S,P,T){p.executeSql(h,S,P,function(j,q){q.code===q.SYNTAX_ERR?j.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[w.storeName],function(K,Q){Q.rows.length?T(K,q):kr(K,w,function(){K.executeSql(h,S,P,T)},T)},T):T(j,q)},T)}function pr(p,w){var h=this;p=Ee(p);var S=new G(function(P,T){h.ready().then(function(){var j=h._dbInfo;j.db.transaction(function(q){_t(q,j,"SELECT * FROM "+j.storeName+" WHERE key = ? LIMIT 1",[p],function(K,Q){var Y=Q.rows.length?Q.rows.item(0).value:null;Y&&(Y=j.serializer.deserialize(Y)),P(Y)},function(K,Q){T(Q)})})}).catch(T)});return z(S,w),S}function Ci(p,w){var h=this,S=new G(function(P,T){h.ready().then(function(){var j=h._dbInfo;j.db.transaction(function(q){_t(q,j,"SELECT * FROM "+j.storeName,[],function(K,Q){for(var Y=Q.rows,ce=Y.length,_e=0;_e<ce;_e++){var Ie=Y.item(_e),Ne=Ie.value;if(Ne&&(Ne=j.serializer.deserialize(Ne)),Ne=p(Ne,Ie.key,_e+1),Ne!==void 0){P(Ne);return}}P()},function(K,Q){T(Q)})})}).catch(T)});return z(S,w),S}function ht(p,w,h,S){var P=this;p=Ee(p);var T=new G(function(j,q){P.ready().then(function(){w===void 0&&(w=null);var K=w,Q=P._dbInfo;Q.serializer.serialize(w,function(Y,ce){ce?q(ce):Q.db.transaction(function(_e){_t(_e,Q,"INSERT OR REPLACE INTO "+Q.storeName+" (key, value) VALUES (?, ?)",[p,Y],function(){j(K)},function(Ie,Ne){q(Ne)})},function(_e){if(_e.code===_e.QUOTA_ERR){if(S>0){j(ht.apply(P,[p,K,h,S-1]));return}q(_e)}})})}).catch(q)});return z(T,h),T}function Re(p,w,h){return ht.apply(this,[p,w,h,1])}function Vt(p,w){var h=this;p=Ee(p);var S=new G(function(P,T){h.ready().then(function(){var j=h._dbInfo;j.db.transaction(function(q){_t(q,j,"DELETE FROM "+j.storeName+" WHERE key = ?",[p],function(){P()},function(K,Q){T(Q)})})}).catch(T)});return z(S,w),S}function $i(p){var w=this,h=new G(function(S,P){w.ready().then(function(){var T=w._dbInfo;T.db.transaction(function(j){_t(j,T,"DELETE FROM "+T.storeName,[],function(){S()},function(q,K){P(K)})})}).catch(P)});return z(h,p),h}function oi(p){var w=this,h=new G(function(S,P){w.ready().then(function(){var T=w._dbInfo;T.db.transaction(function(j){_t(j,T,"SELECT COUNT(key) as c FROM "+T.storeName,[],function(q,K){var Q=K.rows.item(0).c;S(Q)},function(q,K){P(K)})})}).catch(P)});return z(h,p),h}function Br(p,w){var h=this,S=new G(function(P,T){h.ready().then(function(){var j=h._dbInfo;j.db.transaction(function(q){_t(q,j,"SELECT key FROM "+j.storeName+" WHERE id = ? LIMIT 1",[p+1],function(K,Q){var Y=Q.rows.length?Q.rows.item(0).key:null;P(Y)},function(K,Q){T(Q)})})}).catch(T)});return z(S,w),S}function or(p){var w=this,h=new G(function(S,P){w.ready().then(function(){var T=w._dbInfo;T.db.transaction(function(j){_t(j,T,"SELECT key FROM "+T.storeName,[],function(q,K){for(var Q=[],Y=0;Y<K.rows.length;Y++)Q.push(K.rows.item(Y).key);S(Q)},function(q,K){P(K)})})}).catch(P)});return z(h,p),h}function ar(p){return new G(function(w,h){p.transaction(function(S){S.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(P,T){for(var j=[],q=0;q<T.rows.length;q++)j.push(T.rows.item(q).name);w({db:p,storeNames:j})},function(P,T){h(T)})},function(S){h(S)})})}function ai(p,w){w=V.apply(this,arguments);var h=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||h.name,p.storeName=p.storeName||h.storeName);var S=this,P;return p.name?P=new G(function(T){var j;p.name===h.name?j=S._dbInfo.db:j=openDatabase(p.name,"","",0),p.storeName?T({db:j,storeNames:[p.storeName]}):T(ar(j))}).then(function(T){return new G(function(j,q){T.db.transaction(function(K){function Q(Ie){return new G(function(Ne,Ue){K.executeSql("DROP TABLE IF EXISTS "+Ie,[],function(){Ne()},function(je,Tt){Ue(Tt)})})}for(var Y=[],ce=0,_e=T.storeNames.length;ce<_e;ce++)Y.push(Q(T.storeNames[ce]));G.all(Y).then(function(){j()}).catch(function(Ie){q(Ie)})},function(K){q(K)})})}):P=G.reject("Invalid arguments"),z(P,w),P}var mt={_driver:"webSQLStorage",_initStorage:Ht,_support:Ar(),iterate:Ci,getItem:pr,setItem:Re,removeItem:Vt,clear:$i,length:oi,key:Br,keys:or,dropInstance:ai};function Gr(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(p){return!1}}function si(p,w){var h=p.name+"/";return p.storeName!==w.storeName&&(h+=p.storeName+"/"),h}function Pi(){var p="_localforage_support_test";try{return localStorage.setItem(p,!0),localStorage.removeItem(p),!1}catch(w){return!0}}function zr(){return!Pi()||localStorage.length>0}function ki(p){var w=this,h={};if(p)for(var S in p)h[S]=p[S];return h.keyPrefix=si(p,w._defaultConfig),zr()?(w._dbInfo=h,h.serializer=Hr,G.resolve()):G.reject()}function Bt(p){var w=this,h=w.ready().then(function(){for(var S=w._dbInfo.keyPrefix,P=localStorage.length-1;P>=0;P--){var T=localStorage.key(P);T.indexOf(S)===0&&localStorage.removeItem(T)}});return z(h,p),h}function li(p,w){var h=this;p=Ee(p);var S=h.ready().then(function(){var P=h._dbInfo,T=localStorage.getItem(P.keyPrefix+p);return T&&(T=P.serializer.deserialize(T)),T});return z(S,w),S}function Ri(p,w){var h=this,S=h.ready().then(function(){for(var P=h._dbInfo,T=P.keyPrefix,j=T.length,q=localStorage.length,K=1,Q=0;Q<q;Q++){var Y=localStorage.key(Q);if(Y.indexOf(T)===0){var ce=localStorage.getItem(Y);if(ce&&(ce=P.serializer.deserialize(ce)),ce=p(ce,Y.substring(j),K++),ce!==void 0)return ce}}});return z(S,w),S}function sr(p,w){var h=this,S=h.ready().then(function(){var P=h._dbInfo,T;try{T=localStorage.key(p)}catch(j){T=null}return T&&(T=T.substring(P.keyPrefix.length)),T});return z(S,w),S}function ui(p){var w=this,h=w.ready().then(function(){for(var S=w._dbInfo,P=localStorage.length,T=[],j=0;j<P;j++){var q=localStorage.key(j);q.indexOf(S.keyPrefix)===0&&T.push(q.substring(S.keyPrefix.length))}return T});return z(h,p),h}function ci(p){var w=this,h=w.keys().then(function(S){return S.length});return z(h,p),h}function fe(p,w){var h=this;p=Ee(p);var S=h.ready().then(function(){var P=h._dbInfo;localStorage.removeItem(P.keyPrefix+p)});return z(S,w),S}function E(p,w,h){var S=this;p=Ee(p);var P=S.ready().then(function(){w===void 0&&(w=null);var T=w;return new G(function(j,q){var K=S._dbInfo;K.serializer.serialize(w,function(Q,Y){if(Y)q(Y);else try{localStorage.setItem(K.keyPrefix+p,Q),j(T)}catch(ce){(ce.name==="QuotaExceededError"||ce.name==="NS_ERROR_DOM_QUOTA_REACHED")&&q(ce),q(ce)}})})});return z(P,h),P}function J(p,w){if(w=V.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var h=this.config();p.name=p.name||h.name,p.storeName=p.storeName||h.storeName}var S=this,P;return p.name?P=new G(function(T){p.storeName?T(si(p,S._defaultConfig)):T(p.name+"/")}).then(function(T){for(var j=localStorage.length-1;j>=0;j--){var q=localStorage.key(j);q.indexOf(T)===0&&localStorage.removeItem(q)}}):P=G.reject("Invalid arguments"),z(P,w),P}var ue={_driver:"localStorageWrapper",_initStorage:ki,_support:Gr(),iterate:Ri,getItem:li,setItem:E,removeItem:fe,clear:Bt,length:ci,key:sr,keys:ui,dropInstance:J},Fe=function(w,h){return w===h||typeof w=="number"&&typeof h=="number"&&isNaN(w)&&isNaN(h)},it=function(w,h){for(var S=w.length,P=0;P<S;){if(Fe(w[P],h))return!0;P++}return!1},Xe=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"},Je={},xt={},Mt={INDEXEDDB:er,WEBSQL:mt,LOCALSTORAGE:ue},nt=[Mt.INDEXEDDB._driver,Mt.WEBSQL._driver,Mt.LOCALSTORAGE._driver],Rr=["dropInstance"],qr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Rr),yn={description:"",driver:nt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function bn(p,w){p[w]=function(){var h=arguments;return p.ready().then(function(){return p[w].apply(p,h)})}}function fi(){for(var p=1;p<arguments.length;p++){var w=arguments[p];if(w)for(var h in w)w.hasOwnProperty(h)&&(Xe(w[h])?arguments[0][h]=w[h].slice():arguments[0][h]=w[h])}return arguments[0]}var wn=function(){function p(w){_(this,p);for(var h in Mt)if(Mt.hasOwnProperty(h)){var S=Mt[h],P=S._driver;this[h]=P,Je[P]||this.defineDriver(S)}this._defaultConfig=fi({},yn),this._config=fi({},this._defaultConfig,w),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return p.prototype.config=function(h){if((typeof h=="undefined"?"undefined":b(h))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var S in h){if(S==="storeName"&&(h[S]=h[S].replace(/\W/g,"_")),S==="version"&&typeof h[S]!="number")return new Error("Database version must be a number.");this._config[S]=h[S]}return"driver"in h&&h.driver?this.setDriver(this._config.driver):!0}else return typeof h=="string"?this._config[h]:this._config},p.prototype.defineDriver=function(h,S,P){var T=new G(function(j,q){try{var K=h._driver,Q=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!h._driver){q(Q);return}for(var Y=qr.concat("_initStorage"),ce=0,_e=Y.length;ce<_e;ce++){var Ie=Y[ce],Ne=!it(Rr,Ie);if((Ne||h[Ie])&&typeof h[Ie]!="function"){q(Q);return}}var Ue=function(){for(var di=function(xn){return function(){var Vn=new Error("Method "+xn+" is not implemented by the current driver"),Ui=G.reject(Vn);return z(Ui,arguments[arguments.length-1]),Ui}},Dr=0,_n=Rr.length;Dr<_n;Dr++){var pi=Rr[Dr];h[pi]||(h[pi]=di(pi))}};Ue();var je=function(di){Je[K]&&console.info("Redefining LocalForage driver: "+K),Je[K]=h,xt[K]=di,j()};"_support"in h?h._support&&typeof h._support=="function"?h._support().then(je,q):je(!!h._support):je(!0)}catch(Tt){q(Tt)}});return Z(T,S,P),T},p.prototype.driver=function(){return this._driver||null},p.prototype.getDriver=function(h,S,P){var T=Je[h]?G.resolve(Je[h]):G.reject(new Error("Driver not found."));return Z(T,S,P),T},p.prototype.getSerializer=function(h){var S=G.resolve(Hr);return Z(S,h),S},p.prototype.ready=function(h){var S=this,P=S._driverSet.then(function(){return S._ready===null&&(S._ready=S._initDriver()),S._ready});return Z(P,h,h),P},p.prototype.setDriver=function(h,S,P){var T=this;Xe(h)||(h=[h]);var j=this._getSupportedDrivers(h);function q(){T._config.driver=T.driver()}function K(ce){return T._extend(ce),q(),T._ready=T._initStorage(T._config),T._ready}function Q(ce){return function(){var _e=0;function Ie(){for(;_e<ce.length;){var Ne=ce[_e];return _e++,T._dbInfo=null,T._ready=null,T.getDriver(Ne).then(K).catch(Ie)}q();var Ue=new Error("No available storage method found.");return T._driverSet=G.reject(Ue),T._driverSet}return Ie()}}var Y=this._driverSet!==null?this._driverSet.catch(function(){return G.resolve()}):G.resolve();return this._driverSet=Y.then(function(){var ce=j[0];return T._dbInfo=null,T._ready=null,T.getDriver(ce).then(function(_e){T._driver=_e._driver,q(),T._wrapLibraryMethodsWithReady(),T._initDriver=Q(j)})}).catch(function(){q();var ce=new Error("No available storage method found.");return T._driverSet=G.reject(ce),T._driverSet}),Z(this._driverSet,S,P),this._driverSet},p.prototype.supports=function(h){return!!xt[h]},p.prototype._extend=function(h){fi(this,h)},p.prototype._getSupportedDrivers=function(h){for(var S=[],P=0,T=h.length;P<T;P++){var j=h[P];this.supports(j)&&S.push(j)}return S},p.prototype._wrapLibraryMethodsWithReady=function(){for(var h=0,S=qr.length;h<S;h++)bn(this,qr[h])},p.prototype.createInstance=function(h){return new p(h)},p}(),Et=new wn;f.exports=Et},{"3":3}]},{},[4])(4)})});var Ta=so((Ea,Dn)=>{(function(s,r){"use strict";typeof Dn=="object"&&typeof Dn.exports=="object"?Dn.exports=s.document?r(s,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return r(i)}:r(s)})(typeof window!="undefined"?window:Ea,function(s,r){"use strict";var i=[],l=Object.getPrototypeOf,f=i.slice,m=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},b=i.push,_=i.indexOf,C={},N=C.toString,oe=C.hasOwnProperty,Se=oe.toString,G=Se.call(Object),z={},Z=function(t){return typeof t=="function"&&typeof t.nodeType!="number"&&typeof t.item!="function"},Ee=function(t){return t!=null&&t===t.window},V=s.document,O={type:!0,src:!0,nonce:!0,noModule:!0};function H(e,t,n){n=n||V;var a,u,c=n.createElement("script");if(c.text=e,t)for(a in O)u=t[a]||t.getAttribute&&t.getAttribute(a),u&&c.setAttribute(a,u);n.head.appendChild(c).parentNode.removeChild(c)}function I(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?C[N.call(e)]||"object":typeof e}var M="3.7.1",B=/HTML$/i,o=function(e,t){return new o.fn.init(e,t)};o.fn=o.prototype={jquery:M,constructor:o,length:0,toArray:function(){return f.call(this)},get:function(e){return e==null?f.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=o.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return o.each(this,e)},map:function(e){return this.pushStack(o.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(o.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(o.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:b,sort:i.sort,splice:i.splice},o.extend=o.fn.extend=function(){var e,t,n,a,u,c,d=arguments[0]||{},y=1,v=arguments.length,A=!1;for(typeof d=="boolean"&&(A=d,d=arguments[y]||{},y++),typeof d!="object"&&!Z(d)&&(d={}),y===v&&(d=this,y--);y<v;y++)if((e=arguments[y])!=null)for(t in e)a=e[t],!(t==="__proto__"||d===a)&&(A&&a&&(o.isPlainObject(a)||(u=Array.isArray(a)))?(n=d[t],u&&!Array.isArray(n)?c=[]:!u&&!o.isPlainObject(n)?c={}:c=n,u=!1,d[t]=o.extend(A,c,a)):a!==void 0&&(d[t]=a));return d},o.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!e||N.call(e)!=="[object Object]"?!1:(t=l(e),t?(n=oe.call(t,"constructor")&&t.constructor,typeof n=="function"&&Se.call(n)===G):!0)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){H(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,a=0;if(xe(e))for(n=e.length;a<n&&t.call(e[a],a,e[a])!==!1;a++);else for(a in e)if(t.call(e[a],a,e[a])===!1)break;return e},text:function(e){var t,n="",a=0,u=e.nodeType;if(!u)for(;t=e[a++];)n+=o.text(t);return u===1||u===11?e.textContent:u===9?e.documentElement.textContent:u===3||u===4?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return e!=null&&(xe(Object(e))?o.merge(n,typeof e=="string"?[e]:e):b.call(n,e)),n},inArray:function(e,t,n){return t==null?-1:_.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!B.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,a=0,u=e.length;a<n;a++)e[u++]=t[a];return e.length=u,e},grep:function(e,t,n){for(var a,u=[],c=0,d=e.length,y=!n;c<d;c++)a=!t(e[c],c),a!==y&&u.push(e[c]);return u},map:function(e,t,n){var a,u,c=0,d=[];if(xe(e))for(a=e.length;c<a;c++)u=t(e[c],c,n),u!=null&&d.push(u);else for(c in e)u=t(e[c],c,n),u!=null&&d.push(u);return m(d)},guid:1,support:z}),typeof Symbol=="function"&&(o.fn[Symbol.iterator]=i[Symbol.iterator]),o.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){C["[object "+t+"]"]=t.toLowerCase()});function xe(e){var t=!!e&&"length"in e&&e.length,n=I(e);return Z(e)||Ee(e)?!1:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function le(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var Oe=i.pop,rt=i.sort,Me=i.splice,be="[\\x20\\t\\r\\n\\f]",Qe=new RegExp("^"+be+"+|((?:^|[^\\\\])(?:\\\\.)*)"+be+"+$","g");o.contains=function(e,t){var n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(e.contains?e.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))};var At=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Er(e,t){return t?e==="\0"?"\uFFFD":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}o.escapeSelector=function(e){return(e+"").replace(At,Er)};var vt=V,Tr=b;(function(){var e,t,n,a,u,c=Tr,d,y,v,A,F,W=o.expando,R=0,X=0,ye=En(),De=En(),Te=En(),gt=En(),lt=function(g,x){return g===x&&(u=!0),0},hr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",mr="(?:\\\\[\\da-fA-F]{1,6}"+be+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ke="\\["+be+"*("+mr+")(?:"+be+"*([*^$|!~]?=)"+be+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+mr+"))|)"+be+"*\\]",hi=":("+mr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ke+")*)|.*)\\)|)",Le=new RegExp(be+"+","g"),Ze=new RegExp("^"+be+"*,"+be+"*"),Hi=new RegExp("^"+be+"*([>+~]|"+be+")"+be+"*"),Zn=new RegExp(be+"|>"),gr=new RegExp(hi),Bi=new RegExp("^"+mr+"$"),vr={ID:new RegExp("^#("+mr+")"),CLASS:new RegExp("^\\.("+mr+")"),TAG:new RegExp("^("+mr+"|[*])"),ATTR:new RegExp("^"+ke),PSEUDO:new RegExp("^"+hi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+be+"*(even|odd|(([+-]|)(\\d*)n|)"+be+"*(?:([+-]|)"+be+"*(\\d+)|))"+be+"*\\)|)","i"),bool:new RegExp("^(?:"+hr+")$","i"),needsContext:new RegExp("^"+be+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+be+"*((?:-\\d)?\\d*)"+be+"*\\)|)(?=[^-]|$)","i")},Vr=/^(?:input|select|textarea|button)$/i,Yr=/^h\d$/i,Yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,eo=/[+~]/,Lr=new RegExp("\\\\[\\da-fA-F]{1,6}"+be+"?|\\\\([^\\r\\n\\f])","g"),Fr=function(g,x){var k="0x"+g.slice(1)-65536;return x||(k<0?String.fromCharCode(k+65536):String.fromCharCode(k>>10|55296,k&1023|56320))},ll=function(){Xr()},ul=Sn(function(g){return g.disabled===!0&&le(g,"fieldset")},{dir:"parentNode",next:"legend"});function cl(){try{return d.activeElement}catch(g){}}try{c.apply(i=f.call(vt.childNodes),vt.childNodes),i[vt.childNodes.length].nodeType}catch(g){c={apply:function(x,k){Tr.apply(x,f.call(k))},call:function(x){Tr.apply(x,f.call(arguments,1))}}}function $e(g,x,k,L){var U,ee,re,de,ie,Ae,ge,we=x&&x.ownerDocument,Ce=x?x.nodeType:9;if(k=k||[],typeof g!="string"||!g||Ce!==1&&Ce!==9&&Ce!==11)return k;if(!L&&(Xr(x),x=x||d,v)){if(Ce!==11&&(ie=Yt.exec(g)))if(U=ie[1]){if(Ce===9)if(re=x.getElementById(U)){if(re.id===U)return c.call(k,re),k}else return k;else if(we&&(re=we.getElementById(U))&&$e.contains(x,re)&&re.id===U)return c.call(k,re),k}else{if(ie[2])return c.apply(k,x.getElementsByTagName(g)),k;if((U=ie[3])&&x.getElementsByClassName)return c.apply(k,x.getElementsByClassName(U)),k}if(!gt[g+" "]&&(!A||!A.test(g))){if(ge=g,we=x,Ce===1&&(Zn.test(g)||Hi.test(g))){for(we=eo.test(g)&&to(x.parentNode)||x,(we!=x||!z.scope)&&((de=x.getAttribute("id"))?de=o.escapeSelector(de):x.setAttribute("id",de=W)),Ae=Gi(g),ee=Ae.length;ee--;)Ae[ee]=(de?"#"+de:":scope")+" "+Tn(Ae[ee]);ge=Ae.join(",")}try{return c.apply(k,we.querySelectorAll(ge)),k}catch(he){gt(g,!0)}finally{de===W&&x.removeAttribute("id")}}}return ua(g.replace(Qe,"$1"),x,k,L)}function En(){var g=[];function x(k,L){return g.push(k+" ")>t.cacheLength&&delete x[g.shift()],x[k+" "]=L}return x}function lr(g){return g[W]=!0,g}function Di(g){var x=d.createElement("fieldset");try{return!!g(x)}catch(k){return!1}finally{x.parentNode&&x.parentNode.removeChild(x),x=null}}function fl(g){return function(x){return le(x,"input")&&x.type===g}}function dl(g){return function(x){return(le(x,"input")||le(x,"button"))&&x.type===g}}function sa(g){return function(x){return"form"in x?x.parentNode&&x.disabled===!1?"label"in x?"label"in x.parentNode?x.parentNode.disabled===g:x.disabled===g:x.isDisabled===g||x.isDisabled!==!g&&ul(x)===g:x.disabled===g:"label"in x?x.disabled===g:!1}}function mi(g){return lr(function(x){return x=+x,lr(function(k,L){for(var U,ee=g([],k.length,x),re=ee.length;re--;)k[U=ee[re]]&&(k[U]=!(L[U]=k[U]))})})}function to(g){return g&&typeof g.getElementsByTagName!="undefined"&&g}function Xr(g){var x,k=g?g.ownerDocument||g:vt;return k==d||k.nodeType!==9||!k.documentElement||(d=k,y=d.documentElement,v=!o.isXMLDoc(d),F=y.matches||y.webkitMatchesSelector||y.msMatchesSelector,y.msMatchesSelector&&vt!=d&&(x=d.defaultView)&&x.top!==x&&x.addEventListener("unload",ll),z.getById=Di(function(L){return y.appendChild(L).id=o.expando,!d.getElementsByName||!d.getElementsByName(o.expando).length}),z.disconnectedMatch=Di(function(L){return F.call(L,"*")}),z.scope=Di(function(){return d.querySelectorAll(":scope")}),z.cssHas=Di(function(){try{return d.querySelector(":has(*,:jqfake)"),!1}catch(L){return!0}}),z.getById?(t.filter.ID=function(L){var U=L.replace(Lr,Fr);return function(ee){return ee.getAttribute("id")===U}},t.find.ID=function(L,U){if(typeof U.getElementById!="undefined"&&v){var ee=U.getElementById(L);return ee?[ee]:[]}}):(t.filter.ID=function(L){var U=L.replace(Lr,Fr);return function(ee){var re=typeof ee.getAttributeNode!="undefined"&&ee.getAttributeNode("id");return re&&re.value===U}},t.find.ID=function(L,U){if(typeof U.getElementById!="undefined"&&v){var ee,re,de,ie=U.getElementById(L);if(ie){if(ee=ie.getAttributeNode("id"),ee&&ee.value===L)return[ie];for(de=U.getElementsByName(L),re=0;ie=de[re++];)if(ee=ie.getAttributeNode("id"),ee&&ee.value===L)return[ie]}return[]}}),t.find.TAG=function(L,U){return typeof U.getElementsByTagName!="undefined"?U.getElementsByTagName(L):U.querySelectorAll(L)},t.find.CLASS=function(L,U){if(typeof U.getElementsByClassName!="undefined"&&v)return U.getElementsByClassName(L)},A=[],Di(function(L){var U;y.appendChild(L).innerHTML="<a id='"+W+"' href='' disabled='disabled'></a><select id='"+W+"-\r\\' disabled='disabled'><option selected=''></option></select>",L.querySelectorAll("[selected]").length||A.push("\\["+be+"*(?:value|"+hr+")"),L.querySelectorAll("[id~="+W+"-]").length||A.push("~="),L.querySelectorAll("a#"+W+"+*").length||A.push(".#.+[+~]"),L.querySelectorAll(":checked").length||A.push(":checked"),U=d.createElement("input"),U.setAttribute("type","hidden"),L.appendChild(U).setAttribute("name","D"),y.appendChild(L).disabled=!0,L.querySelectorAll(":disabled").length!==2&&A.push(":enabled",":disabled"),U=d.createElement("input"),U.setAttribute("name",""),L.appendChild(U),L.querySelectorAll("[name='']").length||A.push("\\["+be+"*name"+be+"*="+be+`*(?:''|"")`)}),z.cssHas||A.push(":has"),A=A.length&&new RegExp(A.join("|")),lt=function(L,U){if(L===U)return u=!0,0;var ee=!L.compareDocumentPosition-!U.compareDocumentPosition;return ee||(ee=(L.ownerDocument||L)==(U.ownerDocument||U)?L.compareDocumentPosition(U):1,ee&1||!z.sortDetached&&U.compareDocumentPosition(L)===ee?L===d||L.ownerDocument==vt&&$e.contains(vt,L)?-1:U===d||U.ownerDocument==vt&&$e.contains(vt,U)?1:a?_.call(a,L)-_.call(a,U):0:ee&4?-1:1)}),d}$e.matches=function(g,x){return $e(g,null,null,x)},$e.matchesSelector=function(g,x){if(Xr(g),v&&!gt[x+" "]&&(!A||!A.test(x)))try{var k=F.call(g,x);if(k||z.disconnectedMatch||g.document&&g.document.nodeType!==11)return k}catch(L){gt(x,!0)}return $e(x,d,null,[g]).length>0},$e.contains=function(g,x){return(g.ownerDocument||g)!=d&&Xr(g),o.contains(g,x)},$e.attr=function(g,x){(g.ownerDocument||g)!=d&&Xr(g);var k=t.attrHandle[x.toLowerCase()],L=k&&oe.call(t.attrHandle,x.toLowerCase())?k(g,x,!v):void 0;return L!==void 0?L:g.getAttribute(x)},$e.error=function(g){throw new Error("Syntax error, unrecognized expression: "+g)},o.uniqueSort=function(g){var x,k=[],L=0,U=0;if(u=!z.sortStable,a=!z.sortStable&&f.call(g,0),rt.call(g,lt),u){for(;x=g[U++];)x===g[U]&&(L=k.push(U));for(;L--;)Me.call(g,k[L],1)}return a=null,g},o.fn.uniqueSort=function(){return this.pushStack(o.uniqueSort(f.apply(this)))},t=o.expr={cacheLength:50,createPseudo:lr,match:vr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(g){return g[1]=g[1].replace(Lr,Fr),g[3]=(g[3]||g[4]||g[5]||"").replace(Lr,Fr),g[2]==="~="&&(g[3]=" "+g[3]+" "),g.slice(0,4)},CHILD:function(g){return g[1]=g[1].toLowerCase(),g[1].slice(0,3)==="nth"?(g[3]||$e.error(g[0]),g[4]=+(g[4]?g[5]+(g[6]||1):2*(g[3]==="even"||g[3]==="odd")),g[5]=+(g[7]+g[8]||g[3]==="odd")):g[3]&&$e.error(g[0]),g},PSEUDO:function(g){var x,k=!g[6]&&g[2];return vr.CHILD.test(g[0])?null:(g[3]?g[2]=g[4]||g[5]||"":k&&gr.test(k)&&(x=Gi(k,!0))&&(x=k.indexOf(")",k.length-x)-k.length)&&(g[0]=g[0].slice(0,x),g[2]=k.slice(0,x)),g.slice(0,3))}},filter:{TAG:function(g){var x=g.replace(Lr,Fr).toLowerCase();return g==="*"?function(){return!0}:function(k){return le(k,x)}},CLASS:function(g){var x=ye[g+" "];return x||(x=new RegExp("(^|"+be+")"+g+"("+be+"|$)"))&&ye(g,function(k){return x.test(typeof k.className=="string"&&k.className||typeof k.getAttribute!="undefined"&&k.getAttribute("class")||"")})},ATTR:function(g,x,k){return function(L){var U=$e.attr(L,g);return U==null?x==="!=":x?(U+="",x==="="?U===k:x==="!="?U!==k:x==="^="?k&&U.indexOf(k)===0:x==="*="?k&&U.indexOf(k)>-1:x==="$="?k&&U.slice(-k.length)===k:x==="~="?(" "+U.replace(Le," ")+" ").indexOf(k)>-1:x==="|="?U===k||U.slice(0,k.length+1)===k+"-":!1):!0}},CHILD:function(g,x,k,L,U){var ee=g.slice(0,3)!=="nth",re=g.slice(-4)!=="last",de=x==="of-type";return L===1&&U===0?function(ie){return!!ie.parentNode}:function(ie,Ae,ge){var we,Ce,he,He,Nt,St=ee!==re?"nextSibling":"previousSibling",Xt=ie.parentNode,yr=de&&ie.nodeName.toLowerCase(),Li=!ge&&!de,Pt=!1;if(Xt){if(ee){for(;St;){for(he=ie;he=he[St];)if(de?le(he,yr):he.nodeType===1)return!1;Nt=St=g==="only"&&!Nt&&"nextSibling"}return!0}if(Nt=[re?Xt.firstChild:Xt.lastChild],re&&Li){for(Ce=Xt[W]||(Xt[W]={}),we=Ce[g]||[],He=we[0]===R&&we[1],Pt=He&&we[2],he=He&&Xt.childNodes[He];he=++He&&he&&he[St]||(Pt=He=0)||Nt.pop();)if(he.nodeType===1&&++Pt&&he===ie){Ce[g]=[R,He,Pt];break}}else if(Li&&(Ce=ie[W]||(ie[W]={}),we=Ce[g]||[],He=we[0]===R&&we[1],Pt=He),Pt===!1)for(;(he=++He&&he&&he[St]||(Pt=He=0)||Nt.pop())&&!((de?le(he,yr):he.nodeType===1)&&++Pt&&(Li&&(Ce=he[W]||(he[W]={}),Ce[g]=[R,Pt]),he===ie)););return Pt-=U,Pt===L||Pt%L==0&&Pt/L>=0}}},PSEUDO:function(g,x){var k,L=t.pseudos[g]||t.setFilters[g.toLowerCase()]||$e.error("unsupported pseudo: "+g);return L[W]?L(x):L.length>1?(k=[g,g,"",x],t.setFilters.hasOwnProperty(g.toLowerCase())?lr(function(U,ee){for(var re,de=L(U,x),ie=de.length;ie--;)re=_.call(U,de[ie]),U[re]=!(ee[re]=de[ie])}):function(U){return L(U,0,k)}):L}},pseudos:{not:lr(function(g){var x=[],k=[],L=oo(g.replace(Qe,"$1"));return L[W]?lr(function(U,ee,re,de){for(var ie,Ae=L(U,null,de,[]),ge=U.length;ge--;)(ie=Ae[ge])&&(U[ge]=!(ee[ge]=ie))}):function(U,ee,re){return x[0]=U,L(x,null,re,k),x[0]=null,!k.pop()}}),has:lr(function(g){return function(x){return $e(g,x).length>0}}),contains:lr(function(g){return g=g.replace(Lr,Fr),function(x){return(x.textContent||o.text(x)).indexOf(g)>-1}}),lang:lr(function(g){return Bi.test(g||"")||$e.error("unsupported lang: "+g),g=g.replace(Lr,Fr).toLowerCase(),function(x){var k;do if(k=v?x.lang:x.getAttribute("xml:lang")||x.getAttribute("lang"))return k=k.toLowerCase(),k===g||k.indexOf(g+"-")===0;while((x=x.parentNode)&&x.nodeType===1);return!1}}),target:function(g){var x=s.location&&s.location.hash;return x&&x.slice(1)===g.id},root:function(g){return g===y},focus:function(g){return g===cl()&&d.hasFocus()&&!!(g.type||g.href||~g.tabIndex)},enabled:sa(!1),disabled:sa(!0),checked:function(g){return le(g,"input")&&!!g.checked||le(g,"option")&&!!g.selected},selected:function(g){return g.parentNode&&g.parentNode.selectedIndex,g.selected===!0},empty:function(g){for(g=g.firstChild;g;g=g.nextSibling)if(g.nodeType<6)return!1;return!0},parent:function(g){return!t.pseudos.empty(g)},header:function(g){return Yr.test(g.nodeName)},input:function(g){return Vr.test(g.nodeName)},button:function(g){return le(g,"input")&&g.type==="button"||le(g,"button")},text:function(g){var x;return le(g,"input")&&g.type==="text"&&((x=g.getAttribute("type"))==null||x.toLowerCase()==="text")},first:mi(function(){return[0]}),last:mi(function(g,x){return[x-1]}),eq:mi(function(g,x,k){return[k<0?k+x:k]}),even:mi(function(g,x){for(var k=0;k<x;k+=2)g.push(k);return g}),odd:mi(function(g,x){for(var k=1;k<x;k+=2)g.push(k);return g}),lt:mi(function(g,x,k){var L;for(k<0?L=k+x:k>x?L=x:L=k;--L>=0;)g.push(L);return g}),gt:mi(function(g,x,k){for(var L=k<0?k+x:k;++L<x;)g.push(L);return g})}},t.pseudos.nth=t.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=fl(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=dl(e);function la(){}la.prototype=t.filters=t.pseudos,t.setFilters=new la;function Gi(g,x){var k,L,U,ee,re,de,ie,Ae=De[g+" "];if(Ae)return x?0:Ae.slice(0);for(re=g,de=[],ie=t.preFilter;re;){(!k||(L=Ze.exec(re)))&&(L&&(re=re.slice(L[0].length)||re),de.push(U=[])),k=!1,(L=Hi.exec(re))&&(k=L.shift(),U.push({value:k,type:L[0].replace(Qe," ")}),re=re.slice(k.length));for(ee in t.filter)(L=vr[ee].exec(re))&&(!ie[ee]||(L=ie[ee](L)))&&(k=L.shift(),U.push({value:k,type:ee,matches:L}),re=re.slice(k.length));if(!k)break}return x?re.length:re?$e.error(g):De(g,de).slice(0)}function Tn(g){for(var x=0,k=g.length,L="";x<k;x++)L+=g[x].value;return L}function Sn(g,x,k){var L=x.dir,U=x.next,ee=U||L,re=k&&ee==="parentNode",de=X++;return x.first?function(ie,Ae,ge){for(;ie=ie[L];)if(ie.nodeType===1||re)return g(ie,Ae,ge);return!1}:function(ie,Ae,ge){var we,Ce,he=[R,de];if(ge){for(;ie=ie[L];)if((ie.nodeType===1||re)&&g(ie,Ae,ge))return!0}else for(;ie=ie[L];)if(ie.nodeType===1||re)if(Ce=ie[W]||(ie[W]={}),U&&le(ie,U))ie=ie[L]||ie;else{if((we=Ce[ee])&&we[0]===R&&we[1]===de)return he[2]=we[2];if(Ce[ee]=he,he[2]=g(ie,Ae,ge))return!0}return!1}}function ro(g){return g.length>1?function(x,k,L){for(var U=g.length;U--;)if(!g[U](x,k,L))return!1;return!0}:g[0]}function pl(g,x,k){for(var L=0,U=x.length;L<U;L++)$e(g,x[L],k);return k}function An(g,x,k,L,U){for(var ee,re=[],de=0,ie=g.length,Ae=x!=null;de<ie;de++)(ee=g[de])&&(!k||k(ee,L,U))&&(re.push(ee),Ae&&x.push(de));return re}function io(g,x,k,L,U,ee){return L&&!L[W]&&(L=io(L)),U&&!U[W]&&(U=io(U,ee)),lr(function(re,de,ie,Ae){var ge,we,Ce,he,He=[],Nt=[],St=de.length,Xt=re||pl(x||"*",ie.nodeType?[ie]:ie,[]),yr=g&&(re||!x)?An(Xt,He,g,ie,Ae):Xt;if(k?(he=U||(re?g:St||L)?[]:de,k(yr,he,ie,Ae)):he=yr,L)for(ge=An(he,Nt),L(ge,[],ie,Ae),we=ge.length;we--;)(Ce=ge[we])&&(he[Nt[we]]=!(yr[Nt[we]]=Ce));if(re){if(U||g){if(U){for(ge=[],we=he.length;we--;)(Ce=he[we])&&ge.push(yr[we]=Ce);U(null,he=[],ge,Ae)}for(we=he.length;we--;)(Ce=he[we])&&(ge=U?_.call(re,Ce):He[we])>-1&&(re[ge]=!(de[ge]=Ce))}}else he=An(he===de?he.splice(St,he.length):he),U?U(null,de,he,Ae):c.apply(de,he)})}function no(g){for(var x,k,L,U=g.length,ee=t.relative[g[0].type],re=ee||t.relative[" "],de=ee?1:0,ie=Sn(function(we){return we===x},re,!0),Ae=Sn(function(we){return _.call(x,we)>-1},re,!0),ge=[function(we,Ce,he){var He=!ee&&(he||Ce!=n)||((x=Ce).nodeType?ie(we,Ce,he):Ae(we,Ce,he));return x=null,He}];de<U;de++)if(k=t.relative[g[de].type])ge=[Sn(ro(ge),k)];else{if(k=t.filter[g[de].type].apply(null,g[de].matches),k[W]){for(L=++de;L<U&&!t.relative[g[L].type];L++);return io(de>1&&ro(ge),de>1&&Tn(g.slice(0,de-1).concat({value:g[de-2].type===" "?"*":""})).replace(Qe,"$1"),k,de<L&&no(g.slice(de,L)),L<U&&no(g=g.slice(L)),L<U&&Tn(g))}ge.push(k)}return ro(ge)}function hl(g,x){var k=x.length>0,L=g.length>0,U=function(ee,re,de,ie,Ae){var ge,we,Ce,he=0,He="0",Nt=ee&&[],St=[],Xt=n,yr=ee||L&&t.find.TAG("*",Ae),Li=R+=Xt==null?1:Math.random()||.1,Pt=yr.length;for(Ae&&(n=re==d||re||Ae);He!==Pt&&(ge=yr[He])!=null;He++){if(L&&ge){for(we=0,!re&&ge.ownerDocument!=d&&(Xr(ge),de=!v);Ce=g[we++];)if(Ce(ge,re||d,de)){c.call(ie,ge);break}Ae&&(R=Li)}k&&((ge=!Ce&&ge)&&he--,ee&&Nt.push(ge))}if(he+=He,k&&He!==he){for(we=0;Ce=x[we++];)Ce(Nt,St,re,de);if(ee){if(he>0)for(;He--;)Nt[He]||St[He]||(St[He]=Oe.call(ie));St=An(St)}c.apply(ie,St),Ae&&!ee&&St.length>0&&he+x.length>1&&o.uniqueSort(ie)}return Ae&&(R=Li,n=Xt),Nt};return k?lr(U):U}function oo(g,x){var k,L=[],U=[],ee=Te[g+" "];if(!ee){for(x||(x=Gi(g)),k=x.length;k--;)ee=no(x[k]),ee[W]?L.push(ee):U.push(ee);ee=Te(g,hl(U,L)),ee.selector=g}return ee}function ua(g,x,k,L){var U,ee,re,de,ie,Ae=typeof g=="function"&&g,ge=!L&&Gi(g=Ae.selector||g);if(k=k||[],ge.length===1){if(ee=ge[0]=ge[0].slice(0),ee.length>2&&(re=ee[0]).type==="ID"&&x.nodeType===9&&v&&t.relative[ee[1].type]){if(x=(t.find.ID(re.matches[0].replace(Lr,Fr),x)||[])[0],x)Ae&&(x=x.parentNode);else return k;g=g.slice(ee.shift().value.length)}for(U=vr.needsContext.test(g)?0:ee.length;U--&&(re=ee[U],!t.relative[de=re.type]);)if((ie=t.find[de])&&(L=ie(re.matches[0].replace(Lr,Fr),eo.test(ee[0].type)&&to(x.parentNode)||x))){if(ee.splice(U,1),g=L.length&&Tn(ee),!g)return c.apply(k,L),k;break}}return(Ae||oo(g,ge))(L,x,!v,k,!x||eo.test(g)&&to(x.parentNode)||x),k}z.sortStable=W.split("").sort(lt).join("")===W,Xr(),z.sortDetached=Di(function(g){return g.compareDocumentPosition(d.createElement("fieldset"))&1}),o.find=$e,o.expr[":"]=o.expr.pseudos,o.unique=o.uniqueSort,$e.compile=oo,$e.select=ua,$e.setDocument=Xr,$e.tokenize=Gi,$e.escape=o.escapeSelector,$e.getText=o.text,$e.isXML=o.isXMLDoc,$e.selectors=o.expr,$e.support=o.support,$e.uniqueSort=o.uniqueSort})();var yt=function(e,t,n){for(var a=[],u=n!==void 0;(e=e[t])&&e.nodeType!==9;)if(e.nodeType===1){if(u&&o(e).is(n))break;a.push(e)}return a},Zr=function(e,t){for(var n=[];e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n},ei=o.expr.match.needsContext,Ve=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function bt(e,t,n){return Z(t)?o.grep(e,function(a,u){return!!t.call(a,u,a)!==n}):t.nodeType?o.grep(e,function(a){return a===t!==n}):typeof t!="string"?o.grep(e,function(a){return _.call(t,a)>-1!==n}):o.filter(t,e,n)}o.filter=function(e,t,n){var a=t[0];return n&&(e=":not("+e+")"),t.length===1&&a.nodeType===1?o.find.matchesSelector(a,e)?[a]:[]:o.find.matches(e,o.grep(t,function(u){return u.nodeType===1}))},o.fn.extend({find:function(e){var t,n,a=this.length,u=this;if(typeof e!="string")return this.pushStack(o(e).filter(function(){for(t=0;t<a;t++)if(o.contains(u[t],this))return!0}));for(n=this.pushStack([]),t=0;t<a;t++)o.find(e,u[t],n);return a>1?o.uniqueSort(n):n},filter:function(e){return this.pushStack(bt(this,e||[],!1))},not:function(e){return this.pushStack(bt(this,e||[],!0))},is:function(e){return!!bt(this,typeof e=="string"&&ei.test(e)?o(e):e||[],!1).length}});var Ye,Si=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Be=o.fn.init=function(e,t,n){var a,u;if(!e)return this;if(n=n||Ye,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?a=[null,e,null]:a=Si.exec(e),a&&(a[1]||!t))if(a[1]){if(t=t instanceof o?t[0]:t,o.merge(this,o.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:V,!0)),Ve.test(a[1])&&o.isPlainObject(t))for(a in t)Z(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}else return u=V.getElementById(a[2]),u&&(this[0]=u,this.length=1),this;else return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(Z(e))return n.ready!==void 0?n.ready(e):e(o)}return o.makeArray(e,this)};Be.prototype=o.fn,Ye=o(V);var Sr=/^(?:parents|prev(?:Until|All))/,ti={children:!0,contents:!0,next:!0,prev:!0};o.fn.extend({has:function(e){var t=o(e,this),n=t.length;return this.filter(function(){for(var a=0;a<n;a++)if(o.contains(this,t[a]))return!0})},closest:function(e,t){var n,a=0,u=this.length,c=[],d=typeof e!="string"&&o(e);if(!ei.test(e)){for(;a<u;a++)for(n=this[a];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(d?d.index(n)>-1:n.nodeType===1&&o.find.matchesSelector(n,e))){c.push(n);break}}return this.pushStack(c.length>1?o.uniqueSort(c):c)},index:function(e){return e?typeof e=="string"?_.call(o(e),this[0]):_.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(o.uniqueSort(o.merge(this.get(),o(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function ri(e,t){for(;(e=e[t])&&e.nodeType!==1;);return e}o.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return yt(e,"parentNode")},parentsUntil:function(e,t,n){return yt(e,"parentNode",n)},next:function(e){return ri(e,"nextSibling")},prev:function(e){return ri(e,"previousSibling")},nextAll:function(e){return yt(e,"nextSibling")},prevAll:function(e){return yt(e,"previousSibling")},nextUntil:function(e,t,n){return yt(e,"nextSibling",n)},prevUntil:function(e,t,n){return yt(e,"previousSibling",n)},siblings:function(e){return Zr((e.parentNode||{}).firstChild,e)},children:function(e){return Zr(e.firstChild)},contents:function(e){return e.contentDocument!=null&&l(e.contentDocument)?e.contentDocument:(le(e,"template")&&(e=e.content||e),o.merge([],e.childNodes))}},function(e,t){o.fn[e]=function(n,a){var u=o.map(this,t,n);return e.slice(-5)!=="Until"&&(a=n),a&&typeof a=="string"&&(u=o.filter(a,u)),this.length>1&&(ti[e]||o.uniqueSort(u),Sr.test(e)&&u.reverse()),this.pushStack(u)}});var wt=/[^\x20\t\r\n\f]+/g;function Ai(e){var t={};return o.each(e.match(wt)||[],function(n,a){t[a]=!0}),t}o.Callbacks=function(e){e=typeof e=="string"?Ai(e):o.extend({},e);var t,n,a,u,c=[],d=[],y=-1,v=function(){for(u=u||e.once,a=t=!0;d.length;y=-1)for(n=d.shift();++y<c.length;)c[y].apply(n[0],n[1])===!1&&e.stopOnFalse&&(y=c.length,n=!1);e.memory||(n=!1),t=!1,u&&(n?c=[]:c="")},A={add:function(){return c&&(n&&!t&&(y=c.length-1,d.push(n)),function F(W){o.each(W,function(R,X){Z(X)?(!e.unique||!A.has(X))&&c.push(X):X&&X.length&&I(X)!=="string"&&F(X)})}(arguments),n&&!t&&v()),this},remove:function(){return o.each(arguments,function(F,W){for(var R;(R=o.inArray(W,c,R))>-1;)c.splice(R,1),R<=y&&y--}),this},has:function(F){return F?o.inArray(F,c)>-1:c.length>0},empty:function(){return c&&(c=[]),this},disable:function(){return u=d=[],c=n="",this},disabled:function(){return!c},lock:function(){return u=d=[],!n&&!t&&(c=n=""),this},locked:function(){return!!u},fireWith:function(F,W){return u||(W=W||[],W=[F,W.slice?W.slice():W],d.push(W),t||v()),this},fire:function(){return A.fireWith(this,arguments),this},fired:function(){return!!a}};return A};function Zt(e){return e}function Wt(e){throw e}function jr(e,t,n,a){var u;try{e&&Z(u=e.promise)?u.call(e).done(t).fail(n):e&&Z(u=e.then)?u.call(e,t,n):t.apply(void 0,[e].slice(a))}catch(c){n.apply(void 0,[c])}}o.extend({Deferred:function(e){var t=[["notify","progress",o.Callbacks("memory"),o.Callbacks("memory"),2],["resolve","done",o.Callbacks("once memory"),o.Callbacks("once memory"),0,"resolved"],["reject","fail",o.Callbacks("once memory"),o.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return u.done(arguments).fail(arguments),this},catch:function(c){return a.then(null,c)},pipe:function(){var c=arguments;return o.Deferred(function(d){o.each(t,function(y,v){var A=Z(c[v[4]])&&c[v[4]];u[v[1]](function(){var F=A&&A.apply(this,arguments);F&&Z(F.promise)?F.promise().progress(d.notify).done(d.resolve).fail(d.reject):d[v[0]+"With"](this,A?[F]:arguments)})}),c=null}).promise()},then:function(c,d,y){var v=0;function A(F,W,R,X){return function(){var ye=this,De=arguments,Te=function(){var lt,hr;if(!(F<v)){if(lt=R.apply(ye,De),lt===W.promise())throw new TypeError("Thenable self-resolution");hr=lt&&(typeof lt=="object"||typeof lt=="function")&&lt.then,Z(hr)?X?hr.call(lt,A(v,W,Zt,X),A(v,W,Wt,X)):(v++,hr.call(lt,A(v,W,Zt,X),A(v,W,Wt,X),A(v,W,Zt,W.notifyWith))):(R!==Zt&&(ye=void 0,De=[lt]),(X||W.resolveWith)(ye,De))}},gt=X?Te:function(){try{Te()}catch(lt){o.Deferred.exceptionHook&&o.Deferred.exceptionHook(lt,gt.error),F+1>=v&&(R!==Wt&&(ye=void 0,De=[lt]),W.rejectWith(ye,De))}};F?gt():(o.Deferred.getErrorHook?gt.error=o.Deferred.getErrorHook():o.Deferred.getStackHook&&(gt.error=o.Deferred.getStackHook()),s.setTimeout(gt))}}return o.Deferred(function(F){t[0][3].add(A(0,F,Z(y)?y:Zt,F.notifyWith)),t[1][3].add(A(0,F,Z(c)?c:Zt)),t[2][3].add(A(0,F,Z(d)?d:Wt))}).promise()},promise:function(c){return c!=null?o.extend(c,a):a}},u={};return o.each(t,function(c,d){var y=d[2],v=d[5];a[d[1]]=y.add,v&&y.add(function(){n=v},t[3-c][2].disable,t[3-c][3].disable,t[0][2].lock,t[0][3].lock),y.add(d[3].fire),u[d[0]]=function(){return u[d[0]+"With"](this===u?void 0:this,arguments),this},u[d[0]+"With"]=y.fireWith}),a.promise(u),e&&e.call(u,u),u},when:function(e){var t=arguments.length,n=t,a=Array(n),u=f.call(arguments),c=o.Deferred(),d=function(y){return function(v){a[y]=this,u[y]=arguments.length>1?f.call(arguments):v,--t||c.resolveWith(a,u)}};if(t<=1&&(jr(e,c.done(d(n)).resolve,c.reject,!t),c.state()==="pending"||Z(u[n]&&u[n].then)))return c.then();for(;n--;)jr(u[n],d(n),c.reject);return c.promise()}});var er=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;o.Deferred.exceptionHook=function(e,t){s.console&&s.console.warn&&e&&er.test(e.name)&&s.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},o.readyException=function(e){s.setTimeout(function(){throw e})};var Ar=o.Deferred();o.fn.ready=function(e){return Ar.then(e).catch(function(t){o.readyException(t)}),this},o.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--o.readyWait:o.isReady)||(o.isReady=!0,!(e!==!0&&--o.readyWait>0)&&Ar.resolveWith(V,[o]))}}),o.ready.then=Ar.then;function ft(){V.removeEventListener("DOMContentLoaded",ft),s.removeEventListener("load",ft),o.ready()}V.readyState==="complete"||V.readyState!=="loading"&&!V.documentElement.doScroll?s.setTimeout(o.ready):(V.addEventListener("DOMContentLoaded",ft),s.addEventListener("load",ft));var ut=function(e,t,n,a,u,c,d){var y=0,v=e.length,A=n==null;if(I(n)==="object"){u=!0;for(y in n)ut(e,t,y,n[y],!0,c,d)}else if(a!==void 0&&(u=!0,Z(a)||(d=!0),A&&(d?(t.call(e,a),t=null):(A=t,t=function(F,W,R){return A.call(o(F),R)})),t))for(;y<v;y++)t(e[y],n,d?a:a.call(e[y],y,t(e[y],n)));return u?e:A?t.call(e):v?t(e[0],n):c},Cr=/^-ms-/,tr=/-([a-z])/g;function $r(e,t){return t.toUpperCase()}function dt(e){return e.replace(Cr,"ms-").replace(tr,$r)}var rr=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function zt(){this.expando=o.expando+zt.uid++}zt.uid=1,zt.prototype={cache:function(e){var t=e[this.expando];return t||(t={},rr(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var a,u=this.cache(e);if(typeof t=="string")u[dt(t)]=n;else for(a in t)u[dt(a)]=t[a];return u},get:function(e,t){return t===void 0?this.cache(e):e[this.expando]&&e[this.expando][dt(t)]},access:function(e,t,n){return t===void 0||t&&typeof t=="string"&&n===void 0?this.get(e,t):(this.set(e,t,n),n!==void 0?n:t)},remove:function(e,t){var n,a=e[this.expando];if(a!==void 0){if(t!==void 0)for(Array.isArray(t)?t=t.map(dt):(t=dt(t),t=t in a?[t]:t.match(wt)||[]),n=t.length;n--;)delete a[t[n]];(t===void 0||o.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==void 0&&!o.isEmptyObject(t)}};var ae=new zt,ze=new zt,ir=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ii=/[A-Z]/g;function ni(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:ir.test(e)?JSON.parse(e):e}function Ur(e,t,n){var a;if(n===void 0&&e.nodeType===1)if(a="data-"+t.replace(ii,"-$&").toLowerCase(),n=e.getAttribute(a),typeof n=="string"){try{n=ni(n)}catch(u){}ze.set(e,t,n)}else n=void 0;return n}o.extend({hasData:function(e){return ze.hasData(e)||ae.hasData(e)},data:function(e,t,n){return ze.access(e,t,n)},removeData:function(e,t){ze.remove(e,t)},_data:function(e,t,n){return ae.access(e,t,n)},_removeData:function(e,t){ae.remove(e,t)}}),o.fn.extend({data:function(e,t){var n,a,u,c=this[0],d=c&&c.attributes;if(e===void 0){if(this.length&&(u=ze.get(c),c.nodeType===1&&!ae.get(c,"hasDataAttrs"))){for(n=d.length;n--;)d[n]&&(a=d[n].name,a.indexOf("data-")===0&&(a=dt(a.slice(5)),Ur(c,a,u[a])));ae.set(c,"hasDataAttrs",!0)}return u}return typeof e=="object"?this.each(function(){ze.set(this,e)}):ut(this,function(y){var v;if(c&&y===void 0)return v=ze.get(c,e),v!==void 0||(v=Ur(c,e),v!==void 0)?v:void 0;this.each(function(){ze.set(this,e,y)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ze.remove(this,e)})}}),o.extend({queue:function(e,t,n){var a;if(e)return t=(t||"fx")+"queue",a=ae.get(e,t),n&&(!a||Array.isArray(n)?a=ae.access(e,t,o.makeArray(n)):a.push(n)),a||[]},dequeue:function(e,t){t=t||"fx";var n=o.queue(e,t),a=n.length,u=n.shift(),c=o._queueHooks(e,t),d=function(){o.dequeue(e,t)};u==="inprogress"&&(u=n.shift(),a--),u&&(t==="fx"&&n.unshift("inprogress"),delete c.stop,u.call(e,d,c)),!a&&c&&c.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae.get(e,n)||ae.access(e,n,{empty:o.Callbacks("once memory").add(function(){ae.remove(e,[t+"queue",n])})})}}),o.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?o.queue(this[0],e):t===void 0?this:this.each(function(){var a=o.queue(this,e,t);o._queueHooks(this,e),e==="fx"&&a[0]!=="inprogress"&&o.dequeue(this,e)})},dequeue:function(e){return this.each(function(){o.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,a=1,u=o.Deferred(),c=this,d=this.length,y=function(){--a||u.resolveWith(c,[c])};for(typeof e!="string"&&(t=e,e=void 0),e=e||"fx";d--;)n=ae.get(c[d],e+"queueHooks"),n&&n.empty&&(a++,n.empty.add(y));return y(),u.promise(t)}});var Pr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,nr=new RegExp("^(?:([+-])=|)("+Pr+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],Ct=V.documentElement,st=function(e){return o.contains(e.ownerDocument,e)},qt={composed:!0};Ct.getRootNode&&(st=function(e){return o.contains(e.ownerDocument,e)||e.getRootNode(qt)===e.ownerDocument});var dr=function(e,t){return e=t||e,e.style.display==="none"||e.style.display===""&&st(e)&&o.css(e,"display")==="none"};function Wr(e,t,n,a){var u,c,d=20,y=a?function(){return a.cur()}:function(){return o.css(e,t,"")},v=y(),A=n&&n[3]||(o.cssNumber[t]?"":"px"),F=e.nodeType&&(o.cssNumber[t]||A!=="px"&&+v)&&nr.exec(o.css(e,t));if(F&&F[3]!==A){for(v=v/2,A=A||F[3],F=+v||1;d--;)o.style(e,t,F+A),(1-c)*(1-(c=y()/v||.5))<=0&&(d=0),F=F/c;F=F*2,o.style(e,t,F+A),n=n||[]}return n&&(F=+F||+v||0,u=n[1]?F+(n[1]+1)*n[2]:+n[2],a&&(a.unit=A,a.start=F,a.end=u)),u}var Hr={};function kr(e){var t,n=e.ownerDocument,a=e.nodeName,u=Hr[a];return u||(t=n.body.appendChild(n.createElement(a)),u=o.css(t,"display"),t.parentNode.removeChild(t),u==="none"&&(u="block"),Hr[a]=u,u)}function Ht(e,t){for(var n,a,u=[],c=0,d=e.length;c<d;c++)a=e[c],!!a.style&&(n=a.style.display,t?(n==="none"&&(u[c]=ae.get(a,"display")||null,u[c]||(a.style.display="")),a.style.display===""&&dr(a)&&(u[c]=kr(a))):n!=="none"&&(u[c]="none",ae.set(a,"display",n)));for(c=0;c<d;c++)u[c]!=null&&(e[c].style.display=u[c]);return e}o.fn.extend({show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){dr(this)?o(this).show():o(this).hide()})}});var _t=/^(?:checkbox|radio)$/i,pr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ci=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=V.createDocumentFragment(),t=e.appendChild(V.createElement("div")),n=V.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),z.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",z.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",z.option=!!t.lastChild})();var ht={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ht.tbody=ht.tfoot=ht.colgroup=ht.caption=ht.thead,ht.th=ht.td,z.option||(ht.optgroup=ht.option=[1,"<select multiple='multiple'>","</select>"]);function Re(e,t){var n;return typeof e.getElementsByTagName!="undefined"?n=e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!="undefined"?n=e.querySelectorAll(t||"*"):n=[],t===void 0||t&&le(e,t)?o.merge([e],n):n}function Vt(e,t){for(var n=0,a=e.length;n<a;n++)ae.set(e[n],"globalEval",!t||ae.get(t[n],"globalEval"))}var $i=/<|&#?\w+;/;function oi(e,t,n,a,u){for(var c,d,y,v,A,F,W=t.createDocumentFragment(),R=[],X=0,ye=e.length;X<ye;X++)if(c=e[X],c||c===0)if(I(c)==="object")o.merge(R,c.nodeType?[c]:c);else if(!$i.test(c))R.push(t.createTextNode(c));else{for(d=d||W.appendChild(t.createElement("div")),y=(pr.exec(c)||["",""])[1].toLowerCase(),v=ht[y]||ht._default,d.innerHTML=v[1]+o.htmlPrefilter(c)+v[2],F=v[0];F--;)d=d.lastChild;o.merge(R,d.childNodes),d=W.firstChild,d.textContent=""}for(W.textContent="",X=0;c=R[X++];){if(a&&o.inArray(c,a)>-1){u&&u.push(c);continue}if(A=st(c),d=Re(W.appendChild(c),"script"),A&&Vt(d),n)for(F=0;c=d[F++];)Ci.test(c.type||"")&&n.push(c)}return W}var Br=/^([^.]*)(?:\.(.+)|)/;function or(){return!0}function ar(){return!1}function ai(e,t,n,a,u,c){var d,y;if(typeof t=="object"){typeof n!="string"&&(a=a||n,n=void 0);for(y in t)ai(e,y,n,a,t[y],c);return e}if(a==null&&u==null?(u=n,a=n=void 0):u==null&&(typeof n=="string"?(u=a,a=void 0):(u=a,a=n,n=void 0)),u===!1)u=ar;else if(!u)return e;return c===1&&(d=u,u=function(v){return o().off(v),d.apply(this,arguments)},u.guid=d.guid||(d.guid=o.guid++)),e.each(function(){o.event.add(this,t,u,a,n)})}o.event={global:{},add:function(e,t,n,a,u){var c,d,y,v,A,F,W,R,X,ye,De,Te=ae.get(e);if(!!rr(e))for(n.handler&&(c=n,n=c.handler,u=c.selector),u&&o.find.matchesSelector(Ct,u),n.guid||(n.guid=o.guid++),(v=Te.events)||(v=Te.events=Object.create(null)),(d=Te.handle)||(d=Te.handle=function(gt){return typeof o!="undefined"&&o.event.triggered!==gt.type?o.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(wt)||[""],A=t.length;A--;)y=Br.exec(t[A])||[],X=De=y[1],ye=(y[2]||"").split(".").sort(),!!X&&(W=o.event.special[X]||{},X=(u?W.delegateType:W.bindType)||X,W=o.event.special[X]||{},F=o.extend({type:X,origType:De,data:a,handler:n,guid:n.guid,selector:u,needsContext:u&&o.expr.match.needsContext.test(u),namespace:ye.join(".")},c),(R=v[X])||(R=v[X]=[],R.delegateCount=0,(!W.setup||W.setup.call(e,a,ye,d)===!1)&&e.addEventListener&&e.addEventListener(X,d)),W.add&&(W.add.call(e,F),F.handler.guid||(F.handler.guid=n.guid)),u?R.splice(R.delegateCount++,0,F):R.push(F),o.event.global[X]=!0)},remove:function(e,t,n,a,u){var c,d,y,v,A,F,W,R,X,ye,De,Te=ae.hasData(e)&&ae.get(e);if(!(!Te||!(v=Te.events))){for(t=(t||"").match(wt)||[""],A=t.length;A--;){if(y=Br.exec(t[A])||[],X=De=y[1],ye=(y[2]||"").split(".").sort(),!X){for(X in v)o.event.remove(e,X+t[A],n,a,!0);continue}for(W=o.event.special[X]||{},X=(a?W.delegateType:W.bindType)||X,R=v[X]||[],y=y[2]&&new RegExp("(^|\\.)"+ye.join("\\.(?:.*\\.|)")+"(\\.|$)"),d=c=R.length;c--;)F=R[c],(u||De===F.origType)&&(!n||n.guid===F.guid)&&(!y||y.test(F.namespace))&&(!a||a===F.selector||a==="**"&&F.selector)&&(R.splice(c,1),F.selector&&R.delegateCount--,W.remove&&W.remove.call(e,F));d&&!R.length&&((!W.teardown||W.teardown.call(e,ye,Te.handle)===!1)&&o.removeEvent(e,X,Te.handle),delete v[X])}o.isEmptyObject(v)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,n,a,u,c,d,y=new Array(arguments.length),v=o.event.fix(e),A=(ae.get(this,"events")||Object.create(null))[v.type]||[],F=o.event.special[v.type]||{};for(y[0]=v,t=1;t<arguments.length;t++)y[t]=arguments[t];if(v.delegateTarget=this,!(F.preDispatch&&F.preDispatch.call(this,v)===!1)){for(d=o.event.handlers.call(this,v,A),t=0;(u=d[t++])&&!v.isPropagationStopped();)for(v.currentTarget=u.elem,n=0;(c=u.handlers[n++])&&!v.isImmediatePropagationStopped();)(!v.rnamespace||c.namespace===!1||v.rnamespace.test(c.namespace))&&(v.handleObj=c,v.data=c.data,a=((o.event.special[c.origType]||{}).handle||c.handler).apply(u.elem,y),a!==void 0&&(v.result=a)===!1&&(v.preventDefault(),v.stopPropagation()));return F.postDispatch&&F.postDispatch.call(this,v),v.result}},handlers:function(e,t){var n,a,u,c,d,y=[],v=t.delegateCount,A=e.target;if(v&&A.nodeType&&!(e.type==="click"&&e.button>=1)){for(;A!==this;A=A.parentNode||this)if(A.nodeType===1&&!(e.type==="click"&&A.disabled===!0)){for(c=[],d={},n=0;n<v;n++)a=t[n],u=a.selector+" ",d[u]===void 0&&(d[u]=a.needsContext?o(u,this).index(A)>-1:o.find(u,this,null,[A]).length),d[u]&&c.push(a);c.length&&y.push({elem:A,handlers:c})}}return A=this,v<t.length&&y.push({elem:A,handlers:t.slice(v)}),y},addProp:function(e,t){Object.defineProperty(o.Event.prototype,e,{enumerable:!0,configurable:!0,get:Z(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(n){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}})},fix:function(e){return e[o.expando]?e:new o.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return _t.test(t.type)&&t.click&&le(t,"input")&&mt(t,"click",!0),!1},trigger:function(e){var t=this||e;return _t.test(t.type)&&t.click&&le(t,"input")&&mt(t,"click"),!0},_default:function(e){var t=e.target;return _t.test(t.type)&&t.click&&le(t,"input")&&ae.get(t,"click")||le(t,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function mt(e,t,n){if(!n){ae.get(e,t)===void 0&&o.event.add(e,t,or);return}ae.set(e,t,!1),o.event.add(e,t,{namespace:!1,handler:function(a){var u,c=ae.get(this,t);if(a.isTrigger&1&&this[t]){if(c)(o.event.special[t]||{}).delegateType&&a.stopPropagation();else if(c=f.call(arguments),ae.set(this,t,c),this[t](),u=ae.get(this,t),ae.set(this,t,!1),c!==u)return a.stopImmediatePropagation(),a.preventDefault(),u}else c&&(ae.set(this,t,o.event.trigger(c[0],c.slice(1),this)),a.stopPropagation(),a.isImmediatePropagationStopped=or)}})}o.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},o.Event=function(e,t){if(!(this instanceof o.Event))return new o.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?or:ar,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&o.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[o.expando]=!0},o.Event.prototype={constructor:o.Event,isDefaultPrevented:ar,isPropagationStopped:ar,isImmediatePropagationStopped:ar,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=or,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=or,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=or,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},o.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},o.event.addProp),o.each({focus:"focusin",blur:"focusout"},function(e,t){function n(a){if(V.documentMode){var u=ae.get(this,"handle"),c=o.event.fix(a);c.type=a.type==="focusin"?"focus":"blur",c.isSimulated=!0,u(a),c.target===c.currentTarget&&u(c)}else o.event.simulate(t,a.target,o.event.fix(a))}o.event.special[e]={setup:function(){var a;if(mt(this,e,!0),V.documentMode)a=ae.get(this,t),a||this.addEventListener(t,n),ae.set(this,t,(a||0)+1);else return!1},trigger:function(){return mt(this,e),!0},teardown:function(){var a;if(V.documentMode)a=ae.get(this,t)-1,a?ae.set(this,t,a):(this.removeEventListener(t,n),ae.remove(this,t));else return!1},_default:function(a){return ae.get(a.target,e)},delegateType:t},o.event.special[t]={setup:function(){var a=this.ownerDocument||this.document||this,u=V.documentMode?this:a,c=ae.get(u,t);c||(V.documentMode?this.addEventListener(t,n):a.addEventListener(e,n,!0)),ae.set(u,t,(c||0)+1)},teardown:function(){var a=this.ownerDocument||this.document||this,u=V.documentMode?this:a,c=ae.get(u,t)-1;c?ae.set(u,t,c):(V.documentMode?this.removeEventListener(t,n):a.removeEventListener(e,n,!0),ae.remove(u,t))}}}),o.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){o.event.special[e]={delegateType:t,bindType:t,handle:function(n){var a,u=this,c=n.relatedTarget,d=n.handleObj;return(!c||c!==u&&!o.contains(u,c))&&(n.type=d.origType,a=d.handler.apply(this,arguments),n.type=t),a}}}),o.fn.extend({on:function(e,t,n,a){return ai(this,e,t,n,a)},one:function(e,t,n,a){return ai(this,e,t,n,a,1)},off:function(e,t,n){var a,u;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,o(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if(typeof e=="object"){for(u in e)this.off(u,t,e[u]);return this}return(t===!1||typeof t=="function")&&(n=t,t=void 0),n===!1&&(n=ar),this.each(function(){o.event.remove(this,e,n,t)})}});var Gr=/<script|<style|<link/i,si=/checked\s*(?:[^=]|=\s*.checked.)/i,Pi=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function zr(e,t){return le(e,"table")&&le(t.nodeType!==11?t:t.firstChild,"tr")&&o(e).children("tbody")[0]||e}function ki(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Bt(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function li(e,t){var n,a,u,c,d,y,v;if(t.nodeType===1){if(ae.hasData(e)&&(c=ae.get(e),v=c.events,v)){ae.remove(t,"handle events");for(u in v)for(n=0,a=v[u].length;n<a;n++)o.event.add(t,u,v[u][n])}ze.hasData(e)&&(d=ze.access(e),y=o.extend({},d),ze.set(t,y))}}function Ri(e,t){var n=t.nodeName.toLowerCase();n==="input"&&_t.test(e.type)?t.checked=e.checked:(n==="input"||n==="textarea")&&(t.defaultValue=e.defaultValue)}function sr(e,t,n,a){t=m(t);var u,c,d,y,v,A,F=0,W=e.length,R=W-1,X=t[0],ye=Z(X);if(ye||W>1&&typeof X=="string"&&!z.checkClone&&si.test(X))return e.each(function(De){var Te=e.eq(De);ye&&(t[0]=X.call(this,De,Te.html())),sr(Te,t,n,a)});if(W&&(u=oi(t,e[0].ownerDocument,!1,e,a),c=u.firstChild,u.childNodes.length===1&&(u=c),c||a)){for(d=o.map(Re(u,"script"),ki),y=d.length;F<W;F++)v=u,F!==R&&(v=o.clone(v,!0,!0),y&&o.merge(d,Re(v,"script"))),n.call(e[F],v,F);if(y)for(A=d[d.length-1].ownerDocument,o.map(d,Bt),F=0;F<y;F++)v=d[F],Ci.test(v.type||"")&&!ae.access(v,"globalEval")&&o.contains(A,v)&&(v.src&&(v.type||"").toLowerCase()!=="module"?o._evalUrl&&!v.noModule&&o._evalUrl(v.src,{nonce:v.nonce||v.getAttribute("nonce")},A):H(v.textContent.replace(Pi,""),v,A))}return e}function ui(e,t,n){for(var a,u=t?o.filter(t,e):e,c=0;(a=u[c])!=null;c++)!n&&a.nodeType===1&&o.cleanData(Re(a)),a.parentNode&&(n&&st(a)&&Vt(Re(a,"script")),a.parentNode.removeChild(a));return e}o.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var a,u,c,d,y=e.cloneNode(!0),v=st(e);if(!z.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!o.isXMLDoc(e))for(d=Re(y),c=Re(e),a=0,u=c.length;a<u;a++)Ri(c[a],d[a]);if(t)if(n)for(c=c||Re(e),d=d||Re(y),a=0,u=c.length;a<u;a++)li(c[a],d[a]);else li(e,y);return d=Re(y,"script"),d.length>0&&Vt(d,!v&&Re(e,"script")),y},cleanData:function(e){for(var t,n,a,u=o.event.special,c=0;(n=e[c])!==void 0;c++)if(rr(n)){if(t=n[ae.expando]){if(t.events)for(a in t.events)u[a]?o.event.remove(n,a):o.removeEvent(n,a,t.handle);n[ae.expando]=void 0}n[ze.expando]&&(n[ze.expando]=void 0)}}}),o.fn.extend({detach:function(e){return ui(this,e,!0)},remove:function(e){return ui(this,e)},text:function(e){return ut(this,function(t){return t===void 0?o.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=t)})},null,e,arguments.length)},append:function(){return sr(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=zr(this,e);t.appendChild(e)}})},prepend:function(){return sr(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=zr(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return sr(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return sr(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;(e=this[t])!=null;t++)e.nodeType===1&&(o.cleanData(Re(e,!1)),e.textContent="");return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return o.clone(this,e,t)})},html:function(e){return ut(this,function(t){var n=this[0]||{},a=0,u=this.length;if(t===void 0&&n.nodeType===1)return n.innerHTML;if(typeof t=="string"&&!Gr.test(t)&&!ht[(pr.exec(t)||["",""])[1].toLowerCase()]){t=o.htmlPrefilter(t);try{for(;a<u;a++)n=this[a]||{},n.nodeType===1&&(o.cleanData(Re(n,!1)),n.innerHTML=t);n=0}catch(c){}}n&&this.empty().append(t)},null,e,arguments.length)},replaceWith:function(){var e=[];return sr(this,arguments,function(t){var n=this.parentNode;o.inArray(this,e)<0&&(o.cleanData(Re(this)),n&&n.replaceChild(t,this))},e)}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){o.fn[e]=function(n){for(var a,u=[],c=o(n),d=c.length-1,y=0;y<=d;y++)a=y===d?this:this.clone(!0),o(c[y])[t](a),b.apply(u,a.get());return this.pushStack(u)}});var ci=new RegExp("^("+Pr+")(?!px)[a-z%]+$","i"),fe=/^--/,E=function(e){var t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=s),t.getComputedStyle(e)},J=function(e,t,n){var a,u,c={};for(u in t)c[u]=e.style[u],e.style[u]=t[u];a=n.call(e);for(u in t)e.style[u]=c[u];return a},ue=new RegExp(pt.join("|"),"i");(function(){function e(){if(!!A){v.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",A.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ct.appendChild(v).appendChild(A);var F=s.getComputedStyle(A);n=F.top!=="1%",y=t(F.marginLeft)===12,A.style.right="60%",c=t(F.right)===36,a=t(F.width)===36,A.style.position="absolute",u=t(A.offsetWidth/3)===12,Ct.removeChild(v),A=null}}function t(F){return Math.round(parseFloat(F))}var n,a,u,c,d,y,v=V.createElement("div"),A=V.createElement("div");!A.style||(A.style.backgroundClip="content-box",A.cloneNode(!0).style.backgroundClip="",z.clearCloneStyle=A.style.backgroundClip==="content-box",o.extend(z,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),c},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),y},scrollboxSize:function(){return e(),u},reliableTrDimensions:function(){var F,W,R,X;return d==null&&(F=V.createElement("table"),W=V.createElement("tr"),R=V.createElement("div"),F.style.cssText="position:absolute;left:-11111px;border-collapse:separate",W.style.cssText="box-sizing:content-box;border:1px solid",W.style.height="1px",R.style.height="9px",R.style.display="block",Ct.appendChild(F).appendChild(W).appendChild(R),X=s.getComputedStyle(W),d=parseInt(X.height,10)+parseInt(X.borderTopWidth,10)+parseInt(X.borderBottomWidth,10)===W.offsetHeight,Ct.removeChild(F)),d}}))})();function Fe(e,t,n){var a,u,c,d,y=fe.test(t),v=e.style;return n=n||E(e),n&&(d=n.getPropertyValue(t)||n[t],y&&d&&(d=d.replace(Qe,"$1")||void 0),d===""&&!st(e)&&(d=o.style(e,t)),!z.pixelBoxStyles()&&ci.test(d)&&ue.test(t)&&(a=v.width,u=v.minWidth,c=v.maxWidth,v.minWidth=v.maxWidth=v.width=d,d=n.width,v.width=a,v.minWidth=u,v.maxWidth=c)),d!==void 0?d+"":d}function it(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Xe=["Webkit","Moz","ms"],Je=V.createElement("div").style,xt={};function Mt(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if(e=Xe[n]+t,e in Je)return e}function nt(e){var t=o.cssProps[e]||xt[e];return t||(e in Je?e:xt[e]=Mt(e)||e)}var Rr=/^(none|table(?!-c[ea]).+)/,qr={position:"absolute",visibility:"hidden",display:"block"},yn={letterSpacing:"0",fontWeight:"400"};function bn(e,t,n){var a=nr.exec(t);return a?Math.max(0,a[2]-(n||0))+(a[3]||"px"):t}function fi(e,t,n,a,u,c){var d=t==="width"?1:0,y=0,v=0,A=0;if(n===(a?"border":"content"))return 0;for(;d<4;d+=2)n==="margin"&&(A+=o.css(e,n+pt[d],!0,u)),a?(n==="content"&&(v-=o.css(e,"padding"+pt[d],!0,u)),n!=="margin"&&(v-=o.css(e,"border"+pt[d]+"Width",!0,u))):(v+=o.css(e,"padding"+pt[d],!0,u),n!=="padding"?v+=o.css(e,"border"+pt[d]+"Width",!0,u):y+=o.css(e,"border"+pt[d]+"Width",!0,u));return!a&&c>=0&&(v+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-c-v-y-.5))||0),v+A}function wn(e,t,n){var a=E(e),u=!z.boxSizingReliable()||n,c=u&&o.css(e,"boxSizing",!1,a)==="border-box",d=c,y=Fe(e,t,a),v="offset"+t[0].toUpperCase()+t.slice(1);if(ci.test(y)){if(!n)return y;y="auto"}return(!z.boxSizingReliable()&&c||!z.reliableTrDimensions()&&le(e,"tr")||y==="auto"||!parseFloat(y)&&o.css(e,"display",!1,a)==="inline")&&e.getClientRects().length&&(c=o.css(e,"boxSizing",!1,a)==="border-box",d=v in e,d&&(y=e[v])),y=parseFloat(y)||0,y+fi(e,t,n||(c?"border":"content"),d,a,y)+"px"}o.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,a){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var u,c,d,y=dt(t),v=fe.test(t),A=e.style;if(v||(t=nt(y)),d=o.cssHooks[t]||o.cssHooks[y],n!==void 0){if(c=typeof n,c==="string"&&(u=nr.exec(n))&&u[1]&&(n=Wr(e,t,u),c="number"),n==null||n!==n)return;c==="number"&&!v&&(n+=u&&u[3]||(o.cssNumber[y]?"":"px")),!z.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(A[t]="inherit"),(!d||!("set"in d)||(n=d.set(e,n,a))!==void 0)&&(v?A.setProperty(t,n):A[t]=n)}else return d&&"get"in d&&(u=d.get(e,!1,a))!==void 0?u:A[t]}},css:function(e,t,n,a){var u,c,d,y=dt(t),v=fe.test(t);return v||(t=nt(y)),d=o.cssHooks[t]||o.cssHooks[y],d&&"get"in d&&(u=d.get(e,!0,n)),u===void 0&&(u=Fe(e,t,a)),u==="normal"&&t in yn&&(u=yn[t]),n===""||n?(c=parseFloat(u),n===!0||isFinite(c)?c||0:u):u}}),o.each(["height","width"],function(e,t){o.cssHooks[t]={get:function(n,a,u){if(a)return Rr.test(o.css(n,"display"))&&(!n.getClientRects().length||!n.getBoundingClientRect().width)?J(n,qr,function(){return wn(n,t,u)}):wn(n,t,u)},set:function(n,a,u){var c,d=E(n),y=!z.scrollboxSize()&&d.position==="absolute",v=y||u,A=v&&o.css(n,"boxSizing",!1,d)==="border-box",F=u?fi(n,t,u,A,d):0;return A&&y&&(F-=Math.ceil(n["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(d[t])-fi(n,t,"border",!1,d)-.5)),F&&(c=nr.exec(a))&&(c[3]||"px")!=="px"&&(n.style[t]=a,a=o.css(n,t)),bn(n,a,F)}}}),o.cssHooks.marginLeft=it(z.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-J(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),o.each({margin:"",padding:"",border:"Width"},function(e,t){o.cssHooks[e+t]={expand:function(n){for(var a=0,u={},c=typeof n=="string"?n.split(" "):[n];a<4;a++)u[e+pt[a]+t]=c[a]||c[a-2]||c[0];return u}},e!=="margin"&&(o.cssHooks[e+t].set=bn)}),o.fn.extend({css:function(e,t){return ut(this,function(n,a,u){var c,d,y={},v=0;if(Array.isArray(a)){for(c=E(n),d=a.length;v<d;v++)y[a[v]]=o.css(n,a[v],!1,c);return y}return u!==void 0?o.style(n,a,u):o.css(n,a)},e,t,arguments.length>1)}});function Et(e,t,n,a,u){return new Et.prototype.init(e,t,n,a,u)}o.Tween=Et,Et.prototype={constructor:Et,init:function(e,t,n,a,u,c){this.elem=e,this.prop=n,this.easing=u||o.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=c||(o.cssNumber[n]?"":"px")},cur:function(){var e=Et.propHooks[this.prop];return e&&e.get?e.get(this):Et.propHooks._default.get(this)},run:function(e){var t,n=Et.propHooks[this.prop];return this.options.duration?this.pos=t=o.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Et.propHooks._default.set(this),this}},Et.prototype.init.prototype=Et.prototype,Et.propHooks={_default:{get:function(e){var t;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(t=o.css(e.elem,e.prop,""),!t||t==="auto"?0:t)},set:function(e){o.fx.step[e.prop]?o.fx.step[e.prop](e):e.elem.nodeType===1&&(o.cssHooks[e.prop]||e.elem.style[nt(e.prop)]!=null)?o.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Et.propHooks.scrollTop=Et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},o.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},o.fx=Et.prototype.init,o.fx.step={};var p,w,h=/^(?:toggle|show|hide)$/,S=/queueHooks$/;function P(){w&&(V.hidden===!1&&s.requestAnimationFrame?s.requestAnimationFrame(P):s.setTimeout(P,o.fx.interval),o.fx.tick())}function T(){return s.setTimeout(function(){p=void 0}),p=Date.now()}function j(e,t){var n,a=0,u={height:e};for(t=t?1:0;a<4;a+=2-t)n=pt[a],u["margin"+n]=u["padding"+n]=e;return t&&(u.opacity=u.width=e),u}function q(e,t,n){for(var a,u=(Y.tweeners[t]||[]).concat(Y.tweeners["*"]),c=0,d=u.length;c<d;c++)if(a=u[c].call(n,t,e))return a}function K(e,t,n){var a,u,c,d,y,v,A,F,W="width"in t||"height"in t,R=this,X={},ye=e.style,De=e.nodeType&&dr(e),Te=ae.get(e,"fxshow");n.queue||(d=o._queueHooks(e,"fx"),d.unqueued==null&&(d.unqueued=0,y=d.empty.fire,d.empty.fire=function(){d.unqueued||y()}),d.unqueued++,R.always(function(){R.always(function(){d.unqueued--,o.queue(e,"fx").length||d.empty.fire()})}));for(a in t)if(u=t[a],h.test(u)){if(delete t[a],c=c||u==="toggle",u===(De?"hide":"show"))if(u==="show"&&Te&&Te[a]!==void 0)De=!0;else continue;X[a]=Te&&Te[a]||o.style(e,a)}if(v=!o.isEmptyObject(t),!(!v&&o.isEmptyObject(X))){W&&e.nodeType===1&&(n.overflow=[ye.overflow,ye.overflowX,ye.overflowY],A=Te&&Te.display,A==null&&(A=ae.get(e,"display")),F=o.css(e,"display"),F==="none"&&(A?F=A:(Ht([e],!0),A=e.style.display||A,F=o.css(e,"display"),Ht([e]))),(F==="inline"||F==="inline-block"&&A!=null)&&o.css(e,"float")==="none"&&(v||(R.done(function(){ye.display=A}),A==null&&(F=ye.display,A=F==="none"?"":F)),ye.display="inline-block")),n.overflow&&(ye.overflow="hidden",R.always(function(){ye.overflow=n.overflow[0],ye.overflowX=n.overflow[1],ye.overflowY=n.overflow[2]})),v=!1;for(a in X)v||(Te?"hidden"in Te&&(De=Te.hidden):Te=ae.access(e,"fxshow",{display:A}),c&&(Te.hidden=!De),De&&Ht([e],!0),R.done(function(){De||Ht([e]),ae.remove(e,"fxshow");for(a in X)o.style(e,a,X[a])})),v=q(De?Te[a]:0,a,R),a in Te||(Te[a]=v.start,De&&(v.end=v.start,v.start=0))}}function Q(e,t){var n,a,u,c,d;for(n in e)if(a=dt(n),u=t[a],c=e[n],Array.isArray(c)&&(u=c[1],c=e[n]=c[0]),n!==a&&(e[a]=c,delete e[n]),d=o.cssHooks[a],d&&"expand"in d){c=d.expand(c),delete e[a];for(n in c)n in e||(e[n]=c[n],t[n]=u)}else t[a]=u}function Y(e,t,n){var a,u,c=0,d=Y.prefilters.length,y=o.Deferred().always(function(){delete v.elem}),v=function(){if(u)return!1;for(var W=p||T(),R=Math.max(0,A.startTime+A.duration-W),X=R/A.duration||0,ye=1-X,De=0,Te=A.tweens.length;De<Te;De++)A.tweens[De].run(ye);return y.notifyWith(e,[A,ye,R]),ye<1&&Te?R:(Te||y.notifyWith(e,[A,1,0]),y.resolveWith(e,[A]),!1)},A=y.promise({elem:e,props:o.extend({},t),opts:o.extend(!0,{specialEasing:{},easing:o.easing._default},n),originalProperties:t,originalOptions:n,startTime:p||T(),duration:n.duration,tweens:[],createTween:function(W,R){var X=o.Tween(e,A.opts,W,R,A.opts.specialEasing[W]||A.opts.easing);return A.tweens.push(X),X},stop:function(W){var R=0,X=W?A.tweens.length:0;if(u)return this;for(u=!0;R<X;R++)A.tweens[R].run(1);return W?(y.notifyWith(e,[A,1,0]),y.resolveWith(e,[A,W])):y.rejectWith(e,[A,W]),this}}),F=A.props;for(Q(F,A.opts.specialEasing);c<d;c++)if(a=Y.prefilters[c].call(A,e,F,A.opts),a)return Z(a.stop)&&(o._queueHooks(A.elem,A.opts.queue).stop=a.stop.bind(a)),a;return o.map(F,q,A),Z(A.opts.start)&&A.opts.start.call(e,A),A.progress(A.opts.progress).done(A.opts.done,A.opts.complete).fail(A.opts.fail).always(A.opts.always),o.fx.timer(o.extend(v,{elem:e,anim:A,queue:A.opts.queue})),A}o.Animation=o.extend(Y,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return Wr(n.elem,e,nr.exec(t),n),n}]},tweener:function(e,t){Z(e)?(t=e,e=["*"]):e=e.match(wt);for(var n,a=0,u=e.length;a<u;a++)n=e[a],Y.tweeners[n]=Y.tweeners[n]||[],Y.tweeners[n].unshift(t)},prefilters:[K],prefilter:function(e,t){t?Y.prefilters.unshift(e):Y.prefilters.push(e)}}),o.speed=function(e,t,n){var a=e&&typeof e=="object"?o.extend({},e):{complete:n||!n&&t||Z(e)&&e,duration:e,easing:n&&t||t&&!Z(t)&&t};return o.fx.off?a.duration=0:typeof a.duration!="number"&&(a.duration in o.fx.speeds?a.duration=o.fx.speeds[a.duration]:a.duration=o.fx.speeds._default),(a.queue==null||a.queue===!0)&&(a.queue="fx"),a.old=a.complete,a.complete=function(){Z(a.old)&&a.old.call(this),a.queue&&o.dequeue(this,a.queue)},a},o.fn.extend({fadeTo:function(e,t,n,a){return this.filter(dr).css("opacity",0).show().end().animate({opacity:t},e,n,a)},animate:function(e,t,n,a){var u=o.isEmptyObject(e),c=o.speed(t,n,a),d=function(){var y=Y(this,o.extend({},e),c);(u||ae.get(this,"finish"))&&y.stop(!0)};return d.finish=d,u||c.queue===!1?this.each(d):this.queue(c.queue,d)},stop:function(e,t,n){var a=function(u){var c=u.stop;delete u.stop,c(n)};return typeof e!="string"&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var u=!0,c=e!=null&&e+"queueHooks",d=o.timers,y=ae.get(this);if(c)y[c]&&y[c].stop&&a(y[c]);else for(c in y)y[c]&&y[c].stop&&S.test(c)&&a(y[c]);for(c=d.length;c--;)d[c].elem===this&&(e==null||d[c].queue===e)&&(d[c].anim.stop(n),u=!1,d.splice(c,1));(u||!n)&&o.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ae.get(this),a=n[e+"queue"],u=n[e+"queueHooks"],c=o.timers,d=a?a.length:0;for(n.finish=!0,o.queue(this,e,[]),u&&u.stop&&u.stop.call(this,!0),t=c.length;t--;)c[t].elem===this&&c[t].queue===e&&(c[t].anim.stop(!0),c.splice(t,1));for(t=0;t<d;t++)a[t]&&a[t].finish&&a[t].finish.call(this);delete n.finish})}}),o.each(["toggle","show","hide"],function(e,t){var n=o.fn[t];o.fn[t]=function(a,u,c){return a==null||typeof a=="boolean"?n.apply(this,arguments):this.animate(j(t,!0),a,u,c)}}),o.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){o.fn[e]=function(n,a,u){return this.animate(t,n,a,u)}}),o.timers=[],o.fx.tick=function(){var e,t=0,n=o.timers;for(p=Date.now();t<n.length;t++)e=n[t],!e()&&n[t]===e&&n.splice(t--,1);n.length||o.fx.stop(),p=void 0},o.fx.timer=function(e){o.timers.push(e),o.fx.start()},o.fx.interval=13,o.fx.start=function(){w||(w=!0,P())},o.fx.stop=function(){w=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(e,t){return e=o.fx&&o.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(n,a){var u=s.setTimeout(n,e);a.stop=function(){s.clearTimeout(u)}})},function(){var e=V.createElement("input"),t=V.createElement("select"),n=t.appendChild(V.createElement("option"));e.type="checkbox",z.checkOn=e.value!=="",z.optSelected=n.selected,e=V.createElement("input"),e.value="t",e.type="radio",z.radioValue=e.value==="t"}();var ce,_e=o.expr.attrHandle;o.fn.extend({attr:function(e,t){return ut(this,o.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){o.removeAttr(this,e)})}}),o.extend({attr:function(e,t,n){var a,u,c=e.nodeType;if(!(c===3||c===8||c===2)){if(typeof e.getAttribute=="undefined")return o.prop(e,t,n);if((c!==1||!o.isXMLDoc(e))&&(u=o.attrHooks[t.toLowerCase()]||(o.expr.match.bool.test(t)?ce:void 0)),n!==void 0){if(n===null){o.removeAttr(e,t);return}return u&&"set"in u&&(a=u.set(e,n,t))!==void 0?a:(e.setAttribute(t,n+""),n)}return u&&"get"in u&&(a=u.get(e,t))!==null?a:(a=o.find.attr(e,t),a==null?void 0:a)}},attrHooks:{type:{set:function(e,t){if(!z.radioValue&&t==="radio"&&le(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,a=0,u=t&&t.match(wt);if(u&&e.nodeType===1)for(;n=u[a++];)e.removeAttribute(n)}}),ce={set:function(e,t,n){return t===!1?o.removeAttr(e,n):e.setAttribute(n,n),n}},o.each(o.expr.match.bool.source.match(/\w+/g),function(e,t){var n=_e[t]||o.find.attr;_e[t]=function(a,u,c){var d,y,v=u.toLowerCase();return c||(y=_e[v],_e[v]=d,d=n(a,u,c)!=null?v:null,_e[v]=y),d}});var Ie=/^(?:input|select|textarea|button)$/i,Ne=/^(?:a|area)$/i;o.fn.extend({prop:function(e,t){return ut(this,o.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[o.propFix[e]||e]})}}),o.extend({prop:function(e,t,n){var a,u,c=e.nodeType;if(!(c===3||c===8||c===2))return(c!==1||!o.isXMLDoc(e))&&(t=o.propFix[t]||t,u=o.propHooks[t]),n!==void 0?u&&"set"in u&&(a=u.set(e,n,t))!==void 0?a:e[t]=n:u&&"get"in u&&(a=u.get(e,t))!==null?a:e[t]},propHooks:{tabIndex:{get:function(e){var t=o.find.attr(e,"tabindex");return t?parseInt(t,10):Ie.test(e.nodeName)||Ne.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),z.optSelected||(o.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});function Ue(e){var t=e.match(wt)||[];return t.join(" ")}function je(e){return e.getAttribute&&e.getAttribute("class")||""}function Tt(e){return Array.isArray(e)?e:typeof e=="string"?e.match(wt)||[]:[]}o.fn.extend({addClass:function(e){var t,n,a,u,c,d;return Z(e)?this.each(function(y){o(this).addClass(e.call(this,y,je(this)))}):(t=Tt(e),t.length?this.each(function(){if(a=je(this),n=this.nodeType===1&&" "+Ue(a)+" ",n){for(c=0;c<t.length;c++)u=t[c],n.indexOf(" "+u+" ")<0&&(n+=u+" ");d=Ue(n),a!==d&&this.setAttribute("class",d)}}):this)},removeClass:function(e){var t,n,a,u,c,d;return Z(e)?this.each(function(y){o(this).removeClass(e.call(this,y,je(this)))}):arguments.length?(t=Tt(e),t.length?this.each(function(){if(a=je(this),n=this.nodeType===1&&" "+Ue(a)+" ",n){for(c=0;c<t.length;c++)for(u=t[c];n.indexOf(" "+u+" ")>-1;)n=n.replace(" "+u+" "," ");d=Ue(n),a!==d&&this.setAttribute("class",d)}}):this):this.attr("class","")},toggleClass:function(e,t){var n,a,u,c,d=typeof e,y=d==="string"||Array.isArray(e);return Z(e)?this.each(function(v){o(this).toggleClass(e.call(this,v,je(this),t),t)}):typeof t=="boolean"&&y?t?this.addClass(e):this.removeClass(e):(n=Tt(e),this.each(function(){if(y)for(c=o(this),u=0;u<n.length;u++)a=n[u],c.hasClass(a)?c.removeClass(a):c.addClass(a);else(e===void 0||d==="boolean")&&(a=je(this),a&&ae.set(this,"__className__",a),this.setAttribute&&this.setAttribute("class",a||e===!1?"":ae.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,a=0;for(t=" "+e+" ";n=this[a++];)if(n.nodeType===1&&(" "+Ue(je(n))+" ").indexOf(t)>-1)return!0;return!1}});var di=/\r/g;o.fn.extend({val:function(e){var t,n,a,u=this[0];return arguments.length?(a=Z(e),this.each(function(c){var d;this.nodeType===1&&(a?d=e.call(this,c,o(this).val()):d=e,d==null?d="":typeof d=="number"?d+="":Array.isArray(d)&&(d=o.map(d,function(y){return y==null?"":y+""})),t=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],(!t||!("set"in t)||t.set(this,d,"value")===void 0)&&(this.value=d))})):u?(t=o.valHooks[u.type]||o.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(u,"value"))!==void 0?n:(n=u.value,typeof n=="string"?n.replace(di,""):n==null?"":n)):void 0}}),o.extend({valHooks:{option:{get:function(e){var t=o.find.attr(e,"value");return t!=null?t:Ue(o.text(e))}},select:{get:function(e){var t,n,a,u=e.options,c=e.selectedIndex,d=e.type==="select-one",y=d?null:[],v=d?c+1:u.length;for(c<0?a=v:a=d?c:0;a<v;a++)if(n=u[a],(n.selected||a===c)&&!n.disabled&&(!n.parentNode.disabled||!le(n.parentNode,"optgroup"))){if(t=o(n).val(),d)return t;y.push(t)}return y},set:function(e,t){for(var n,a,u=e.options,c=o.makeArray(t),d=u.length;d--;)a=u[d],(a.selected=o.inArray(o.valHooks.option.get(a),c)>-1)&&(n=!0);return n||(e.selectedIndex=-1),c}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=o.inArray(o(e).val(),t)>-1}},z.checkOn||(o.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Dr=s.location,_n={guid:Date.now()},pi=/\?/;o.parseXML=function(e){var t,n;if(!e||typeof e!="string")return null;try{t=new s.DOMParser().parseFromString(e,"text/xml")}catch(a){}return n=t&&t.getElementsByTagName("parsererror")[0],(!t||n)&&o.error("Invalid XML: "+(n?o.map(n.childNodes,function(a){return a.textContent}).join(`
`):e)),t};var qn=/^(?:focusinfocus|focusoutblur)$/,xn=function(e){e.stopPropagation()};o.extend(o.event,{trigger:function(e,t,n,a){var u,c,d,y,v,A,F,W,R=[n||V],X=oe.call(e,"type")?e.type:e,ye=oe.call(e,"namespace")?e.namespace.split("."):[];if(c=W=d=n=n||V,!(n.nodeType===3||n.nodeType===8)&&!qn.test(X+o.event.triggered)&&(X.indexOf(".")>-1&&(ye=X.split("."),X=ye.shift(),ye.sort()),v=X.indexOf(":")<0&&"on"+X,e=e[o.expando]?e:new o.Event(X,typeof e=="object"&&e),e.isTrigger=a?2:3,e.namespace=ye.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+ye.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=t==null?[e]:o.makeArray(t,[e]),F=o.event.special[X]||{},!(!a&&F.trigger&&F.trigger.apply(n,t)===!1))){if(!a&&!F.noBubble&&!Ee(n)){for(y=F.delegateType||X,qn.test(y+X)||(c=c.parentNode);c;c=c.parentNode)R.push(c),d=c;d===(n.ownerDocument||V)&&R.push(d.defaultView||d.parentWindow||s)}for(u=0;(c=R[u++])&&!e.isPropagationStopped();)W=c,e.type=u>1?y:F.bindType||X,A=(ae.get(c,"events")||Object.create(null))[e.type]&&ae.get(c,"handle"),A&&A.apply(c,t),A=v&&c[v],A&&A.apply&&rr(c)&&(e.result=A.apply(c,t),e.result===!1&&e.preventDefault());return e.type=X,!a&&!e.isDefaultPrevented()&&(!F._default||F._default.apply(R.pop(),t)===!1)&&rr(n)&&v&&Z(n[X])&&!Ee(n)&&(d=n[v],d&&(n[v]=null),o.event.triggered=X,e.isPropagationStopped()&&W.addEventListener(X,xn),n[X](),e.isPropagationStopped()&&W.removeEventListener(X,xn),o.event.triggered=void 0,d&&(n[v]=d)),e.result}},simulate:function(e,t,n){var a=o.extend(new o.Event,n,{type:e,isSimulated:!0});o.event.trigger(a,null,t)}}),o.fn.extend({trigger:function(e,t){return this.each(function(){o.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return o.event.trigger(e,t,n,!0)}});var Vn=/\[\]$/,Ui=/\r?\n/g,Vs=/^(?:submit|button|image|reset|file)$/i,Ys=/^(?:input|select|textarea|keygen)/i;function Yn(e,t,n,a){var u;if(Array.isArray(t))o.each(t,function(c,d){n||Vn.test(e)?a(e,d):Yn(e+"["+(typeof d=="object"&&d!=null?c:"")+"]",d,n,a)});else if(!n&&I(t)==="object")for(u in t)Yn(e+"["+u+"]",t[u],n,a);else a(e,t)}o.param=function(e,t){var n,a=[],u=function(c,d){var y=Z(d)?d():d;a[a.length]=encodeURIComponent(c)+"="+encodeURIComponent(y==null?"":y)};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!o.isPlainObject(e))o.each(e,function(){u(this.name,this.value)});else for(n in e)Yn(n,e[n],t,u);return a.join("&")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=o.prop(this,"elements");return e?o.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!o(this).is(":disabled")&&Ys.test(this.nodeName)&&!Vs.test(e)&&(this.checked||!_t.test(e))}).map(function(e,t){var n=o(this).val();return n==null?null:Array.isArray(n)?o.map(n,function(a){return{name:t.name,value:a.replace(Ui,`\r
`)}}):{name:t.name,value:n.replace(Ui,`\r
`)}}).get()}});var Xs=/%20/g,Js=/#.*$/,Ks=/([?&])_=[^&]*/,Qs=/^(.*?):[ \t]*([^\r\n]*)$/mg,Zs=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,el=/^(?:GET|HEAD)$/,tl=/^\/\//,ra={},Xn={},ia="*/".concat("*"),Jn=V.createElement("a");Jn.href=Dr.href;function na(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var a,u=0,c=t.toLowerCase().match(wt)||[];if(Z(n))for(;a=c[u++];)a[0]==="+"?(a=a.slice(1)||"*",(e[a]=e[a]||[]).unshift(n)):(e[a]=e[a]||[]).push(n)}}function oa(e,t,n,a){var u={},c=e===Xn;function d(y){var v;return u[y]=!0,o.each(e[y]||[],function(A,F){var W=F(t,n,a);if(typeof W=="string"&&!c&&!u[W])return t.dataTypes.unshift(W),d(W),!1;if(c)return!(v=W)}),v}return d(t.dataTypes[0])||!u["*"]&&d("*")}function Kn(e,t){var n,a,u=o.ajaxSettings.flatOptions||{};for(n in t)t[n]!==void 0&&((u[n]?e:a||(a={}))[n]=t[n]);return a&&o.extend(!0,e,a),e}function rl(e,t,n){for(var a,u,c,d,y=e.contents,v=e.dataTypes;v[0]==="*";)v.shift(),a===void 0&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a){for(u in y)if(y[u]&&y[u].test(a)){v.unshift(u);break}}if(v[0]in n)c=v[0];else{for(u in n){if(!v[0]||e.converters[u+" "+v[0]]){c=u;break}d||(d=u)}c=c||d}if(c)return c!==v[0]&&v.unshift(c),n[c]}function il(e,t,n,a){var u,c,d,y,v,A={},F=e.dataTypes.slice();if(F[1])for(d in e.converters)A[d.toLowerCase()]=e.converters[d];for(c=F.shift();c;)if(e.responseFields[c]&&(n[e.responseFields[c]]=t),!v&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),v=c,c=F.shift(),c){if(c==="*")c=v;else if(v!=="*"&&v!==c){if(d=A[v+" "+c]||A["* "+c],!d){for(u in A)if(y=u.split(" "),y[1]===c&&(d=A[v+" "+y[0]]||A["* "+y[0]],d)){d===!0?d=A[u]:A[u]!==!0&&(c=y[0],F.unshift(y[1]));break}}if(d!==!0)if(d&&e.throws)t=d(t);else try{t=d(t)}catch(W){return{state:"parsererror",error:d?W:"No conversion from "+v+" to "+c}}}}return{state:"success",data:t}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dr.href,type:"GET",isLocal:Zs.test(Dr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ia,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Kn(Kn(e,o.ajaxSettings),t):Kn(o.ajaxSettings,e)},ajaxPrefilter:na(ra),ajaxTransport:na(Xn),ajax:function(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};var n,a,u,c,d,y,v,A,F,W,R=o.ajaxSetup({},t),X=R.context||R,ye=R.context&&(X.nodeType||X.jquery)?o(X):o.event,De=o.Deferred(),Te=o.Callbacks("once memory"),gt=R.statusCode||{},lt={},hr={},mr="canceled",ke={readyState:0,getResponseHeader:function(Le){var Ze;if(v){if(!c)for(c={};Ze=Qs.exec(u);)c[Ze[1].toLowerCase()+" "]=(c[Ze[1].toLowerCase()+" "]||[]).concat(Ze[2]);Ze=c[Le.toLowerCase()+" "]}return Ze==null?null:Ze.join(", ")},getAllResponseHeaders:function(){return v?u:null},setRequestHeader:function(Le,Ze){return v==null&&(Le=hr[Le.toLowerCase()]=hr[Le.toLowerCase()]||Le,lt[Le]=Ze),this},overrideMimeType:function(Le){return v==null&&(R.mimeType=Le),this},statusCode:function(Le){var Ze;if(Le)if(v)ke.always(Le[ke.status]);else for(Ze in Le)gt[Ze]=[gt[Ze],Le[Ze]];return this},abort:function(Le){var Ze=Le||mr;return n&&n.abort(Ze),hi(0,Ze),this}};if(De.promise(ke),R.url=((e||R.url||Dr.href)+"").replace(tl,Dr.protocol+"//"),R.type=t.method||t.type||R.method||R.type,R.dataTypes=(R.dataType||"*").toLowerCase().match(wt)||[""],R.crossDomain==null){y=V.createElement("a");try{y.href=R.url,y.href=y.href,R.crossDomain=Jn.protocol+"//"+Jn.host!=y.protocol+"//"+y.host}catch(Le){R.crossDomain=!0}}if(R.data&&R.processData&&typeof R.data!="string"&&(R.data=o.param(R.data,R.traditional)),oa(ra,R,t,ke),v)return ke;A=o.event&&R.global,A&&o.active++==0&&o.event.trigger("ajaxStart"),R.type=R.type.toUpperCase(),R.hasContent=!el.test(R.type),a=R.url.replace(Js,""),R.hasContent?R.data&&R.processData&&(R.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(R.data=R.data.replace(Xs,"+")):(W=R.url.slice(a.length),R.data&&(R.processData||typeof R.data=="string")&&(a+=(pi.test(a)?"&":"?")+R.data,delete R.data),R.cache===!1&&(a=a.replace(Ks,"$1"),W=(pi.test(a)?"&":"?")+"_="+_n.guid+++W),R.url=a+W),R.ifModified&&(o.lastModified[a]&&ke.setRequestHeader("If-Modified-Since",o.lastModified[a]),o.etag[a]&&ke.setRequestHeader("If-None-Match",o.etag[a])),(R.data&&R.hasContent&&R.contentType!==!1||t.contentType)&&ke.setRequestHeader("Content-Type",R.contentType),ke.setRequestHeader("Accept",R.dataTypes[0]&&R.accepts[R.dataTypes[0]]?R.accepts[R.dataTypes[0]]+(R.dataTypes[0]!=="*"?", "+ia+"; q=0.01":""):R.accepts["*"]);for(F in R.headers)ke.setRequestHeader(F,R.headers[F]);if(R.beforeSend&&(R.beforeSend.call(X,ke,R)===!1||v))return ke.abort();if(mr="abort",Te.add(R.complete),ke.done(R.success),ke.fail(R.error),n=oa(Xn,R,t,ke),!n)hi(-1,"No Transport");else{if(ke.readyState=1,A&&ye.trigger("ajaxSend",[ke,R]),v)return ke;R.async&&R.timeout>0&&(d=s.setTimeout(function(){ke.abort("timeout")},R.timeout));try{v=!1,n.send(lt,hi)}catch(Le){if(v)throw Le;hi(-1,Le)}}function hi(Le,Ze,Hi,Zn){var gr,Bi,vr,Vr,Yr,Yt=Ze;v||(v=!0,d&&s.clearTimeout(d),n=void 0,u=Zn||"",ke.readyState=Le>0?4:0,gr=Le>=200&&Le<300||Le===304,Hi&&(Vr=rl(R,ke,Hi)),!gr&&o.inArray("script",R.dataTypes)>-1&&o.inArray("json",R.dataTypes)<0&&(R.converters["text script"]=function(){}),Vr=il(R,Vr,ke,gr),gr?(R.ifModified&&(Yr=ke.getResponseHeader("Last-Modified"),Yr&&(o.lastModified[a]=Yr),Yr=ke.getResponseHeader("etag"),Yr&&(o.etag[a]=Yr)),Le===204||R.type==="HEAD"?Yt="nocontent":Le===304?Yt="notmodified":(Yt=Vr.state,Bi=Vr.data,vr=Vr.error,gr=!vr)):(vr=Yt,(Le||!Yt)&&(Yt="error",Le<0&&(Le=0))),ke.status=Le,ke.statusText=(Ze||Yt)+"",gr?De.resolveWith(X,[Bi,Yt,ke]):De.rejectWith(X,[ke,Yt,vr]),ke.statusCode(gt),gt=void 0,A&&ye.trigger(gr?"ajaxSuccess":"ajaxError",[ke,R,gr?Bi:vr]),Te.fireWith(X,[ke,Yt]),A&&(ye.trigger("ajaxComplete",[ke,R]),--o.active||o.event.trigger("ajaxStop")))}return ke},getJSON:function(e,t,n){return o.get(e,t,n,"json")},getScript:function(e,t){return o.get(e,void 0,t,"script")}}),o.each(["get","post"],function(e,t){o[t]=function(n,a,u,c){return Z(a)&&(c=c||u,u=a,a=void 0),o.ajax(o.extend({url:n,type:t,dataType:c,data:a,success:u},o.isPlainObject(n)&&n))}}),o.ajaxPrefilter(function(e){var t;for(t in e.headers)t.toLowerCase()==="content-type"&&(e.contentType=e.headers[t]||"")}),o._evalUrl=function(e,t,n){return o.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(a){o.globalEval(a,t,n)}})},o.fn.extend({wrapAll:function(e){var t;return this[0]&&(Z(e)&&(e=e.call(this[0])),t=o(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this},wrapInner:function(e){return Z(e)?this.each(function(t){o(this).wrapInner(e.call(this,t))}):this.each(function(){var t=o(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z(e);return this.each(function(n){o(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){o(this).replaceWith(this.childNodes)}),this}}),o.expr.pseudos.hidden=function(e){return!o.expr.pseudos.visible(e)},o.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},o.ajaxSettings.xhr=function(){try{return new s.XMLHttpRequest}catch(e){}};var nl={0:200,1223:204},Wi=o.ajaxSettings.xhr();z.cors=!!Wi&&"withCredentials"in Wi,z.ajax=Wi=!!Wi,o.ajaxTransport(function(e){var t,n;if(z.cors||Wi&&!e.crossDomain)return{send:function(a,u){var c,d=e.xhr();if(d.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(c in e.xhrFields)d[c]=e.xhrFields[c];e.mimeType&&d.overrideMimeType&&d.overrideMimeType(e.mimeType),!e.crossDomain&&!a["X-Requested-With"]&&(a["X-Requested-With"]="XMLHttpRequest");for(c in a)d.setRequestHeader(c,a[c]);t=function(y){return function(){t&&(t=n=d.onload=d.onerror=d.onabort=d.ontimeout=d.onreadystatechange=null,y==="abort"?d.abort():y==="error"?typeof d.status!="number"?u(0,"error"):u(d.status,d.statusText):u(nl[d.status]||d.status,d.statusText,(d.responseType||"text")!=="text"||typeof d.responseText!="string"?{binary:d.response}:{text:d.responseText},d.getAllResponseHeaders()))}},d.onload=t(),n=d.onerror=d.ontimeout=t("error"),d.onabort!==void 0?d.onabort=n:d.onreadystatechange=function(){d.readyState===4&&s.setTimeout(function(){t&&n()})},t=t("abort");try{d.send(e.hasContent&&e.data||null)}catch(y){if(t)throw y}},abort:function(){t&&t()}}}),o.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return o.globalEval(e),e}}}),o.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),o.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(a,u){t=o("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(c){t.remove(),n=null,c&&u(c.type==="error"?404:200,c.type)}),V.head.appendChild(t[0])},abort:function(){n&&n()}}}});var aa=[],Qn=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=aa.pop()||o.expando+"_"+_n.guid++;return this[e]=!0,e}}),o.ajaxPrefilter("json jsonp",function(e,t,n){var a,u,c,d=e.jsonp!==!1&&(Qn.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Qn.test(e.data)&&"data");if(d||e.dataTypes[0]==="jsonp")return a=e.jsonpCallback=Z(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,d?e[d]=e[d].replace(Qn,"$1"+a):e.jsonp!==!1&&(e.url+=(pi.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return c||o.error(a+" was not called"),c[0]},e.dataTypes[0]="json",u=s[a],s[a]=function(){c=arguments},n.always(function(){u===void 0?o(s).removeProp(a):s[a]=u,e[a]&&(e.jsonpCallback=t.jsonpCallback,aa.push(a)),c&&Z(u)&&u(c[0]),c=u=void 0}),"script"}),z.createHTMLDocument=function(){var e=V.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),o.parseHTML=function(e,t,n){if(typeof e!="string")return[];typeof t=="boolean"&&(n=t,t=!1);var a,u,c;return t||(z.createHTMLDocument?(t=V.implementation.createHTMLDocument(""),a=t.createElement("base"),a.href=V.location.href,t.head.appendChild(a)):t=V),u=Ve.exec(e),c=!n&&[],u?[t.createElement(u[1])]:(u=oi([e],t,c),c&&c.length&&o(c).remove(),o.merge([],u.childNodes))},o.fn.load=function(e,t,n){var a,u,c,d=this,y=e.indexOf(" ");return y>-1&&(a=Ue(e.slice(y)),e=e.slice(0,y)),Z(t)?(n=t,t=void 0):t&&typeof t=="object"&&(u="POST"),d.length>0&&o.ajax({url:e,type:u||"GET",dataType:"html",data:t}).done(function(v){c=arguments,d.html(a?o("<div>").append(o.parseHTML(v)).find(a):v)}).always(n&&function(v,A){d.each(function(){n.apply(this,c||[v.responseText,A,v])})}),this},o.expr.pseudos.animated=function(e){return o.grep(o.timers,function(t){return e===t.elem}).length},o.offset={setOffset:function(e,t,n){var a,u,c,d,y,v,A,F=o.css(e,"position"),W=o(e),R={};F==="static"&&(e.style.position="relative"),y=W.offset(),c=o.css(e,"top"),v=o.css(e,"left"),A=(F==="absolute"||F==="fixed")&&(c+v).indexOf("auto")>-1,A?(a=W.position(),d=a.top,u=a.left):(d=parseFloat(c)||0,u=parseFloat(v)||0),Z(t)&&(t=t.call(e,n,o.extend({},y))),t.top!=null&&(R.top=t.top-y.top+d),t.left!=null&&(R.left=t.left-y.left+u),"using"in t?t.using.call(e,R):W.css(R)}},o.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(u){o.offset.setOffset(this,e,u)});var t,n,a=this[0];if(!!a)return a.getClientRects().length?(t=a.getBoundingClientRect(),n=a.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var e,t,n,a=this[0],u={top:0,left:0};if(o.css(a,"position")==="fixed")t=a.getBoundingClientRect();else{for(t=this.offset(),n=a.ownerDocument,e=a.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&o.css(e,"position")==="static";)e=e.parentNode;e&&e!==a&&e.nodeType===1&&(u=o(e).offset(),u.top+=o.css(e,"borderTopWidth",!0),u.left+=o.css(e,"borderLeftWidth",!0))}return{top:t.top-u.top-o.css(a,"marginTop",!0),left:t.left-u.left-o.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&o.css(e,"position")==="static";)e=e.offsetParent;return e||Ct})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=t==="pageYOffset";o.fn[e]=function(a){return ut(this,function(u,c,d){var y;if(Ee(u)?y=u:u.nodeType===9&&(y=u.defaultView),d===void 0)return y?y[t]:u[c];y?y.scrollTo(n?y.pageXOffset:d,n?d:y.pageYOffset):u[c]=d},e,a,arguments.length)}}),o.each(["top","left"],function(e,t){o.cssHooks[t]=it(z.pixelPosition,function(n,a){if(a)return a=Fe(n,t),ci.test(a)?o(n).position()[t]+"px":a})}),o.each({Height:"height",Width:"width"},function(e,t){o.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,a){o.fn[a]=function(u,c){var d=arguments.length&&(n||typeof u!="boolean"),y=n||(u===!0||c===!0?"margin":"border");return ut(this,function(v,A,F){var W;return Ee(v)?a.indexOf("outer")===0?v["inner"+e]:v.document.documentElement["client"+e]:v.nodeType===9?(W=v.documentElement,Math.max(v.body["scroll"+e],W["scroll"+e],v.body["offset"+e],W["offset"+e],W["client"+e])):F===void 0?o.css(v,A,y):o.style(v,A,F,y)},t,d?u:void 0,d)}})}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){o.fn[t]=function(n){return this.on(t,n)}}),o.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,a){return this.on(t,e,n,a)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),o.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){o.fn[t]=function(n,a){return arguments.length>0?this.on(t,null,n,a):this.trigger(t)}});var ol=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;o.proxy=function(e,t){var n,a,u;if(typeof t=="string"&&(n=e[t],t=e,e=n),!!Z(e))return a=f.call(arguments,2),u=function(){return e.apply(t||this,a.concat(f.call(arguments)))},u.guid=e.guid=e.guid||o.guid++,u},o.holdReady=function(e){e?o.readyWait++:o.ready(!0)},o.isArray=Array.isArray,o.parseJSON=JSON.parse,o.nodeName=le,o.isFunction=Z,o.isWindow=Ee,o.camelCase=dt,o.type=I,o.now=Date.now,o.isNumeric=function(e){var t=o.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))},o.trim=function(e){return e==null?"":(e+"").replace(ol,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return o});var al=s.jQuery,sl=s.$;return o.noConflict=function(e){return s.$===o&&(s.$=sl),e&&s.jQuery===o&&(s.jQuery=al),o},typeof r=="undefined"&&(s.jQuery=s.$=o),o})});var ws=so((Jf,bs)=>{"use strict";var{entries:os,setPrototypeOf:as,isFrozen:Il,getPrototypeOf:Ol,getOwnPropertyDescriptor:Ml}=Object,{freeze:Dt,seal:Kt,create:ss}=Object,{apply:Io,construct:Oo}=typeof Reflect!="undefined"&&Reflect;Dt||(Dt=function(r){return r});Kt||(Kt=function(r){return r});Io||(Io=function(r,i,l){return r.apply(i,l)});Oo||(Oo=function(r,i){return new r(...i)});var On=Ft(Array.prototype.forEach),Nl=Ft(Array.prototype.lastIndexOf),ls=Ft(Array.prototype.pop),on=Ft(Array.prototype.push),jl=Ft(Array.prototype.splice),Mn=Ft(String.prototype.toLowerCase),Mo=Ft(String.prototype.toString),us=Ft(String.prototype.match),an=Ft(String.prototype.replace),$l=Ft(String.prototype.indexOf),Ul=Ft(String.prototype.trim),ur=Ft(Object.prototype.hasOwnProperty),Lt=Ft(RegExp.prototype.test),sn=Wl(TypeError);function Ft(s){return function(r){for(var i=arguments.length,l=new Array(i>1?i-1:0),f=1;f<i;f++)l[f-1]=arguments[f];return Io(s,r,l)}}function Wl(s){return function(){for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return Oo(s,i)}}function Pe(s,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mn;as&&as(s,null);let l=r.length;for(;l--;){let f=r[l];if(typeof f=="string"){let m=i(f);m!==f&&(Il(r)||(r[l]=m),f=m)}s[f]=!0}return s}function Hl(s){for(let r=0;r<s.length;r++)ur(s,r)||(s[r]=null);return s}function wi(s){let r=ss(null);for(let[i,l]of os(s))ur(s,i)&&(Array.isArray(l)?r[i]=Hl(l):l&&typeof l=="object"&&l.constructor===Object?r[i]=wi(l):r[i]=l);return r}function ln(s,r){for(;s!==null;){let l=Ml(s,r);if(l){if(l.get)return Ft(l.get);if(typeof l.value=="function")return Ft(l.value)}s=Ol(s)}function i(){return null}return i}var cs=Dt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),No=Dt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jo=Dt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bl=Dt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$o=Dt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Gl=Dt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fs=Dt(["#text"]),ds=Dt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Uo=Dt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ps=Dt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Nn=Dt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zl=Kt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ql=Kt(/<%[\w\W]*|[\w\W]*%>/gm),Vl=Kt(/\$\{[\w\W]*/gm),Yl=Kt(/^data-[\-\w.\u00B7-\uFFFF]+$/),Xl=Kt(/^aria-[\-\w]+$/),hs=Kt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Jl=Kt(/^(?:\w+script|data):/i),Kl=Kt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ms=Kt(/^html$/i),Ql=Kt(/^[a-z][.\w]*(-[.\w]+)+$/i),gs=Object.freeze({__proto__:null,ARIA_ATTR:Xl,ATTR_WHITESPACE:Kl,CUSTOM_ELEMENT:Ql,DATA_ATTR:Yl,DOCTYPE_NAME:ms,ERB_EXPR:ql,IS_ALLOWED_URI:hs,IS_SCRIPT_OR_DATA:Jl,MUSTACHE_EXPR:zl,TMPLIT_EXPR:Vl}),un={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Zl=function(){return typeof window=="undefined"?null:window},eu=function(r,i){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let l=null,f="data-tt-policy-suffix";i&&i.hasAttribute(f)&&(l=i.getAttribute(f));let m="dompurify"+(l?"#"+l:"");try{return r.createPolicy(m,{createHTML(b){return b},createScriptURL(b){return b}})}catch(b){return console.warn("TrustedTypes policy "+m+" could not be created."),null}},vs=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ys(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zl(),r=fe=>ys(fe);if(r.version="3.2.4",r.removed=[],!s||!s.document||s.document.nodeType!==un.document||!s.Element)return r.isSupported=!1,r;let{document:i}=s,l=i,f=l.currentScript,{DocumentFragment:m,HTMLTemplateElement:b,Node:_,Element:C,NodeFilter:N,NamedNodeMap:oe=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:Se,DOMParser:G,trustedTypes:z}=s,Z=C.prototype,Ee=ln(Z,"cloneNode"),V=ln(Z,"remove"),O=ln(Z,"nextSibling"),H=ln(Z,"childNodes"),I=ln(Z,"parentNode");if(typeof b=="function"){let fe=i.createElement("template");fe.content&&fe.content.ownerDocument&&(i=fe.content.ownerDocument)}let M,B="",{implementation:o,createNodeIterator:xe,createDocumentFragment:le,getElementsByTagName:Oe}=i,{importNode:rt}=l,Me=vs();r.isSupported=typeof os=="function"&&typeof I=="function"&&o&&o.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:be,ERB_EXPR:Qe,TMPLIT_EXPR:At,DATA_ATTR:Er,ARIA_ATTR:vt,IS_SCRIPT_OR_DATA:Tr,ATTR_WHITESPACE:yt,CUSTOM_ELEMENT:Zr}=gs,{IS_ALLOWED_URI:ei}=gs,Ve=null,bt=Pe({},[...cs,...No,...jo,...$o,...fs]),Ye=null,Si=Pe({},[...ds,...Uo,...ps,...Nn]),Be=Object.seal(ss(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Sr=null,ti=null,ri=!0,wt=!0,Ai=!1,Zt=!0,Wt=!1,jr=!0,er=!1,Ar=!1,ft=!1,ut=!1,Cr=!1,tr=!1,$r=!0,dt=!1,rr="user-content-",zt=!0,ae=!1,ze={},ir=null,ii=Pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ni=null,Ur=Pe({},["audio","video","img","source","image","track"]),Pr=null,nr=Pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pt="http://www.w3.org/1998/Math/MathML",Ct="http://www.w3.org/2000/svg",st="http://www.w3.org/1999/xhtml",qt=st,dr=!1,Wr=null,Hr=Pe({},[pt,Ct,st],Mo),kr=Pe({},["mi","mo","mn","ms","mtext"]),Ht=Pe({},["annotation-xml"]),_t=Pe({},["title","style","font","a","script"]),pr=null,Ci=["application/xhtml+xml","text/html"],ht="text/html",Re=null,Vt=null,$i=i.createElement("form"),oi=function(E){return E instanceof RegExp||E instanceof Function},Br=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Vt&&Vt===E)){if((!E||typeof E!="object")&&(E={}),E=wi(E),pr=Ci.indexOf(E.PARSER_MEDIA_TYPE)===-1?ht:E.PARSER_MEDIA_TYPE,Re=pr==="application/xhtml+xml"?Mo:Mn,Ve=ur(E,"ALLOWED_TAGS")?Pe({},E.ALLOWED_TAGS,Re):bt,Ye=ur(E,"ALLOWED_ATTR")?Pe({},E.ALLOWED_ATTR,Re):Si,Wr=ur(E,"ALLOWED_NAMESPACES")?Pe({},E.ALLOWED_NAMESPACES,Mo):Hr,Pr=ur(E,"ADD_URI_SAFE_ATTR")?Pe(wi(nr),E.ADD_URI_SAFE_ATTR,Re):nr,ni=ur(E,"ADD_DATA_URI_TAGS")?Pe(wi(Ur),E.ADD_DATA_URI_TAGS,Re):Ur,ir=ur(E,"FORBID_CONTENTS")?Pe({},E.FORBID_CONTENTS,Re):ii,Sr=ur(E,"FORBID_TAGS")?Pe({},E.FORBID_TAGS,Re):{},ti=ur(E,"FORBID_ATTR")?Pe({},E.FORBID_ATTR,Re):{},ze=ur(E,"USE_PROFILES")?E.USE_PROFILES:!1,ri=E.ALLOW_ARIA_ATTR!==!1,wt=E.ALLOW_DATA_ATTR!==!1,Ai=E.ALLOW_UNKNOWN_PROTOCOLS||!1,Zt=E.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Wt=E.SAFE_FOR_TEMPLATES||!1,jr=E.SAFE_FOR_XML!==!1,er=E.WHOLE_DOCUMENT||!1,ut=E.RETURN_DOM||!1,Cr=E.RETURN_DOM_FRAGMENT||!1,tr=E.RETURN_TRUSTED_TYPE||!1,ft=E.FORCE_BODY||!1,$r=E.SANITIZE_DOM!==!1,dt=E.SANITIZE_NAMED_PROPS||!1,zt=E.KEEP_CONTENT!==!1,ae=E.IN_PLACE||!1,ei=E.ALLOWED_URI_REGEXP||hs,qt=E.NAMESPACE||st,kr=E.MATHML_TEXT_INTEGRATION_POINTS||kr,Ht=E.HTML_INTEGRATION_POINTS||Ht,Be=E.CUSTOM_ELEMENT_HANDLING||{},E.CUSTOM_ELEMENT_HANDLING&&oi(E.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Be.tagNameCheck=E.CUSTOM_ELEMENT_HANDLING.tagNameCheck),E.CUSTOM_ELEMENT_HANDLING&&oi(E.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Be.attributeNameCheck=E.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),E.CUSTOM_ELEMENT_HANDLING&&typeof E.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Be.allowCustomizedBuiltInElements=E.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Wt&&(wt=!1),Cr&&(ut=!0),ze&&(Ve=Pe({},fs),Ye=[],ze.html===!0&&(Pe(Ve,cs),Pe(Ye,ds)),ze.svg===!0&&(Pe(Ve,No),Pe(Ye,Uo),Pe(Ye,Nn)),ze.svgFilters===!0&&(Pe(Ve,jo),Pe(Ye,Uo),Pe(Ye,Nn)),ze.mathMl===!0&&(Pe(Ve,$o),Pe(Ye,ps),Pe(Ye,Nn))),E.ADD_TAGS&&(Ve===bt&&(Ve=wi(Ve)),Pe(Ve,E.ADD_TAGS,Re)),E.ADD_ATTR&&(Ye===Si&&(Ye=wi(Ye)),Pe(Ye,E.ADD_ATTR,Re)),E.ADD_URI_SAFE_ATTR&&Pe(Pr,E.ADD_URI_SAFE_ATTR,Re),E.FORBID_CONTENTS&&(ir===ii&&(ir=wi(ir)),Pe(ir,E.FORBID_CONTENTS,Re)),zt&&(Ve["#text"]=!0),er&&Pe(Ve,["html","head","body"]),Ve.table&&(Pe(Ve,["tbody"]),delete Sr.tbody),E.TRUSTED_TYPES_POLICY){if(typeof E.TRUSTED_TYPES_POLICY.createHTML!="function")throw sn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof E.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw sn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');M=E.TRUSTED_TYPES_POLICY,B=M.createHTML("")}else M===void 0&&(M=eu(z,f)),M!==null&&typeof B=="string"&&(B=M.createHTML(""));Dt&&Dt(E),Vt=E}},or=Pe({},[...No,...jo,...Bl]),ar=Pe({},[...$o,...Gl]),ai=function(E){let J=I(E);(!J||!J.tagName)&&(J={namespaceURI:qt,tagName:"template"});let ue=Mn(E.tagName),Fe=Mn(J.tagName);return Wr[E.namespaceURI]?E.namespaceURI===Ct?J.namespaceURI===st?ue==="svg":J.namespaceURI===pt?ue==="svg"&&(Fe==="annotation-xml"||kr[Fe]):Boolean(or[ue]):E.namespaceURI===pt?J.namespaceURI===st?ue==="math":J.namespaceURI===Ct?ue==="math"&&Ht[Fe]:Boolean(ar[ue]):E.namespaceURI===st?J.namespaceURI===Ct&&!Ht[Fe]||J.namespaceURI===pt&&!kr[Fe]?!1:!ar[ue]&&(_t[ue]||!or[ue]):!!(pr==="application/xhtml+xml"&&Wr[E.namespaceURI]):!1},mt=function(E){on(r.removed,{element:E});try{I(E).removeChild(E)}catch(J){V(E)}},Gr=function(E,J){try{on(r.removed,{attribute:J.getAttributeNode(E),from:J})}catch(ue){on(r.removed,{attribute:null,from:J})}if(J.removeAttribute(E),E==="is")if(ut||Cr)try{mt(J)}catch(ue){}else try{J.setAttribute(E,"")}catch(ue){}},si=function(E){let J=null,ue=null;if(ft)E="<remove></remove>"+E;else{let Xe=us(E,/^[\r\n\t ]+/);ue=Xe&&Xe[0]}pr==="application/xhtml+xml"&&qt===st&&(E='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+E+"</body></html>");let Fe=M?M.createHTML(E):E;if(qt===st)try{J=new G().parseFromString(Fe,pr)}catch(Xe){}if(!J||!J.documentElement){J=o.createDocument(qt,"template",null);try{J.documentElement.innerHTML=dr?B:Fe}catch(Xe){}}let it=J.body||J.documentElement;return E&&ue&&it.insertBefore(i.createTextNode(ue),it.childNodes[0]||null),qt===st?Oe.call(J,er?"html":"body")[0]:er?J.documentElement:it},Pi=function(E){return xe.call(E.ownerDocument||E,E,N.SHOW_ELEMENT|N.SHOW_COMMENT|N.SHOW_TEXT|N.SHOW_PROCESSING_INSTRUCTION|N.SHOW_CDATA_SECTION,null)},zr=function(E){return E instanceof Se&&(typeof E.nodeName!="string"||typeof E.textContent!="string"||typeof E.removeChild!="function"||!(E.attributes instanceof oe)||typeof E.removeAttribute!="function"||typeof E.setAttribute!="function"||typeof E.namespaceURI!="string"||typeof E.insertBefore!="function"||typeof E.hasChildNodes!="function")},ki=function(E){return typeof _=="function"&&E instanceof _};function Bt(fe,E,J){On(fe,ue=>{ue.call(r,E,J,Vt)})}let li=function(E){let J=null;if(Bt(Me.beforeSanitizeElements,E,null),zr(E))return mt(E),!0;let ue=Re(E.nodeName);if(Bt(Me.uponSanitizeElement,E,{tagName:ue,allowedTags:Ve}),E.hasChildNodes()&&!ki(E.firstElementChild)&&Lt(/<[/\w]/g,E.innerHTML)&&Lt(/<[/\w]/g,E.textContent)||E.nodeType===un.progressingInstruction||jr&&E.nodeType===un.comment&&Lt(/<[/\w]/g,E.data))return mt(E),!0;if(!Ve[ue]||Sr[ue]){if(!Sr[ue]&&sr(ue)&&(Be.tagNameCheck instanceof RegExp&&Lt(Be.tagNameCheck,ue)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(ue)))return!1;if(zt&&!ir[ue]){let Fe=I(E)||E.parentNode,it=H(E)||E.childNodes;if(it&&Fe){let Xe=it.length;for(let Je=Xe-1;Je>=0;--Je){let xt=Ee(it[Je],!0);xt.__removalCount=(E.__removalCount||0)+1,Fe.insertBefore(xt,O(E))}}}return mt(E),!0}return E instanceof C&&!ai(E)||(ue==="noscript"||ue==="noembed"||ue==="noframes")&&Lt(/<\/no(script|embed|frames)/i,E.innerHTML)?(mt(E),!0):(Wt&&E.nodeType===un.text&&(J=E.textContent,On([be,Qe,At],Fe=>{J=an(J,Fe," ")}),E.textContent!==J&&(on(r.removed,{element:E.cloneNode()}),E.textContent=J)),Bt(Me.afterSanitizeElements,E,null),!1)},Ri=function(E,J,ue){if($r&&(J==="id"||J==="name")&&(ue in i||ue in $i))return!1;if(!(wt&&!ti[J]&&Lt(Er,J))){if(!(ri&&Lt(vt,J))){if(!Ye[J]||ti[J]){if(!(sr(E)&&(Be.tagNameCheck instanceof RegExp&&Lt(Be.tagNameCheck,E)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(E))&&(Be.attributeNameCheck instanceof RegExp&&Lt(Be.attributeNameCheck,J)||Be.attributeNameCheck instanceof Function&&Be.attributeNameCheck(J))||J==="is"&&Be.allowCustomizedBuiltInElements&&(Be.tagNameCheck instanceof RegExp&&Lt(Be.tagNameCheck,ue)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(ue))))return!1}else if(!Pr[J]){if(!Lt(ei,an(ue,yt,""))){if(!((J==="src"||J==="xlink:href"||J==="href")&&E!=="script"&&$l(ue,"data:")===0&&ni[E])){if(!(Ai&&!Lt(Tr,an(ue,yt,"")))){if(ue)return!1}}}}}}return!0},sr=function(E){return E!=="annotation-xml"&&us(E,Zr)},ui=function(E){Bt(Me.beforeSanitizeAttributes,E,null);let{attributes:J}=E;if(!J||zr(E))return;let ue={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ye,forceKeepAttr:void 0},Fe=J.length;for(;Fe--;){let it=J[Fe],{name:Xe,namespaceURI:Je,value:xt}=it,Mt=Re(Xe),nt=Xe==="value"?xt:Ul(xt);if(ue.attrName=Mt,ue.attrValue=nt,ue.keepAttr=!0,ue.forceKeepAttr=void 0,Bt(Me.uponSanitizeAttribute,E,ue),nt=ue.attrValue,dt&&(Mt==="id"||Mt==="name")&&(Gr(Xe,E),nt=rr+nt),jr&&Lt(/((--!?|])>)|<\/(style|title)/i,nt)){Gr(Xe,E);continue}if(ue.forceKeepAttr||(Gr(Xe,E),!ue.keepAttr))continue;if(!Zt&&Lt(/\/>/i,nt)){Gr(Xe,E);continue}Wt&&On([be,Qe,At],qr=>{nt=an(nt,qr," ")});let Rr=Re(E.nodeName);if(!!Ri(Rr,Mt,nt)){if(M&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!Je)switch(z.getAttributeType(Rr,Mt)){case"TrustedHTML":{nt=M.createHTML(nt);break}case"TrustedScriptURL":{nt=M.createScriptURL(nt);break}}try{Je?E.setAttributeNS(Je,Xe,nt):E.setAttribute(Xe,nt),zr(E)?mt(E):ls(r.removed)}catch(qr){}}}Bt(Me.afterSanitizeAttributes,E,null)},ci=function fe(E){let J=null,ue=Pi(E);for(Bt(Me.beforeSanitizeShadowDOM,E,null);J=ue.nextNode();)Bt(Me.uponSanitizeShadowNode,J,null),li(J),ui(J),J.content instanceof m&&fe(J.content);Bt(Me.afterSanitizeShadowDOM,E,null)};return r.sanitize=function(fe){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=null,ue=null,Fe=null,it=null;if(dr=!fe,dr&&(fe="<!-->"),typeof fe!="string"&&!ki(fe))if(typeof fe.toString=="function"){if(fe=fe.toString(),typeof fe!="string")throw sn("dirty is not a string, aborting")}else throw sn("toString is not a function");if(!r.isSupported)return fe;if(Ar||Br(E),r.removed=[],typeof fe=="string"&&(ae=!1),ae){if(fe.nodeName){let xt=Re(fe.nodeName);if(!Ve[xt]||Sr[xt])throw sn("root node is forbidden and cannot be sanitized in-place")}}else if(fe instanceof _)J=si("<!---->"),ue=J.ownerDocument.importNode(fe,!0),ue.nodeType===un.element&&ue.nodeName==="BODY"||ue.nodeName==="HTML"?J=ue:J.appendChild(ue);else{if(!ut&&!Wt&&!er&&fe.indexOf("<")===-1)return M&&tr?M.createHTML(fe):fe;if(J=si(fe),!J)return ut?null:tr?B:""}J&&ft&&mt(J.firstChild);let Xe=Pi(ae?fe:J);for(;Fe=Xe.nextNode();)li(Fe),ui(Fe),Fe.content instanceof m&&ci(Fe.content);if(ae)return fe;if(ut){if(Cr)for(it=le.call(J.ownerDocument);J.firstChild;)it.appendChild(J.firstChild);else it=J;return(Ye.shadowroot||Ye.shadowrootmode)&&(it=rt.call(l,it,!0)),it}let Je=er?J.outerHTML:J.innerHTML;return er&&Ve["!doctype"]&&J.ownerDocument&&J.ownerDocument.doctype&&J.ownerDocument.doctype.name&&Lt(ms,J.ownerDocument.doctype.name)&&(Je="<!DOCTYPE "+J.ownerDocument.doctype.name+`>
`+Je),Wt&&On([be,Qe,At],xt=>{Je=an(Je,xt," ")}),M&&tr?M.createHTML(Je):Je},r.setConfig=function(){let fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Br(fe),Ar=!0},r.clearConfig=function(){Vt=null,Ar=!1},r.isValidAttribute=function(fe,E,J){Vt||Br({});let ue=Re(fe),Fe=Re(E);return Ri(ue,Fe,J)},r.addHook=function(fe,E){typeof E=="function"&&on(Me[fe],E)},r.removeHook=function(fe,E){if(E!==void 0){let J=Nl(Me[fe],E);return J===-1?void 0:jl(Me[fe],J,1)[0]}return ls(Me[fe])},r.removeHooks=function(fe){Me[fe]=[]},r.removeAllHooks=function(){Me=vs()},r}var tu=ys();bs.exports=tu});var Wo=lo(mo());var Rn=class{constructor(r,i){r=r||[],this.lines=r,this.text=i,this.offset2loc=new Map,this.line2offset=new Map;for(var l of r)l.offset>=0&&(this.offset2loc[l.offset]||(this.offset2loc[l.offset]=l),this.line2offset[l.line]||(this.line2offset[l.line]=l.offset))}findLineForOffset(r,i){if(this.offset2loc)for(var l=0;l<=i;l++){var f=this.offset2loc[r];if(f)return f;r--}return null}lineCount(){return this.lines.length}};function wa(s){return"errors"in s}function _a(s){return"output"in s}var xa=lo(mo()),go=class{constructor(r){this.preset_id=Rt(r)}async getRemoteFile(r){return new Promise((i,l)=>Vi(r,i,gi(r)?"arraybuffer":"text"))}async getFileData(r){var i="presets/"+this.preset_id+"/"+r,l=await this.getRemoteFile(i);return l&&console.log("read",i,l.length,"bytes"),l}async setFileData(r,i){}};var Xi=class{constructor(r,i){this.basefs=r,this.overlayfs=i}async getFileData(r){var i=await this.overlayfs.getFileData(r);return i==null?this.basefs.getFileData(r):i}async setFileData(r,i){return await this.overlayfs.setFileData(r,i),this.basefs.setFileData(r,i)}},vo=class{constructor(r){this.store=r}async getFileData(r){return this.store.getItem(r)}async setFileData(r,i){return this.store.setItem(r,i)}};var yo=class{constructor(r,i,l,f){this.filedata={};this.pendingWorkerMessages=0;this.hasDoneInitialCompilation=!1;this.tools_preloaded={};this.isCompiling=!1;this.filename2path={};this.worker=r,this.platform_id=i,this.platform=l,this.filesystem=f,r.onmessage=m=>{this.receiveWorkerMessage(m.data)}}receiveWorkerMessage(r){var i=this.pendingWorkerMessages>1;i?(this.sendBuild(),this.pendingWorkerMessages=1):(this.callbackBuildStatus&&this.callbackBuildStatus(!1),this.isCompiling||(console.log(this.pendingWorkerMessages),console.trace()),this.isCompiling=!1,this.pendingWorkerMessages=0,this.hasDoneInitialCompilation=!0),r&&_a(r)?this.processBuildResult(r):wa(r)&&this.processBuildListings(r),this.callbackBuildResult(r)}getToolForFilename(r){return this.remoteTool?"remote:"+this.remoteTool:this.platform.getToolForFilename(r)}preloadWorker(r){var i=this.getToolForFilename(r);i&&!this.tools_preloaded[i]&&(this.worker.postMessage({preload:i,platform:this.platform_id}),this.tools_preloaded[i]=!0)}pushAllFiles(r,i){r.push(i);var l=uo(this.mainPath);l.length>0&&l!="local"&&r.push(l+"/"+i)}parseIncludeDependencies(r){let i=[],l;if(this.platform_id.startsWith("verilog")){let f=/^\s*(`include|[.]include)\s+"(.+?)"/gmi;for(;l=f.exec(r);)this.pushAllFiles(i,l[2]);let m=/^\s*\$(include|\$dofile|\$write_image_in_table)\('(.+?)'/gmi;for(;l=m.exec(r);)this.pushAllFiles(i,l[2]);let b=/^\s*([.]arch)\s+(\w+)/gmi;for(;l=b.exec(r);)this.pushAllFiles(i,l[2]+".json");let _=/\$readmem[bh]\("(.+?)"/gmi;for(;l=_.exec(r);)this.pushAllFiles(i,l[1])}else{let f=/^\s*[.#%]?(include|incbin|embed)\s+"(.+?)"/gmi;for(;l=f.exec(r);)this.pushAllFiles(i,l[2]);let m=/^\s*([;']|[/][/])#(resource)\s+"(.+?)"/gm;for(;l=m.exec(r);)this.pushAllFiles(i,l[3]);let b=/^\s+(USE|ASM)\s+(\S+[.]\S+)/gm;for(;l=b.exec(r);)this.pushAllFiles(i,l[2]);let _=/^\s*(import|embed)\s*"(.+?)";/gmi;for(;l=_.exec(r);)l[1]=="import"?this.pushAllFiles(i,l[2]+".wiz"):this.pushAllFiles(i,l[2]);let C=/^\s*(import)\s*"(.+?)"/gmi;for(;l=C.exec(r);)this.pushAllFiles(i,l[2]);let N=/^[!]src\s+"(.+?)"/gmi;for(;l=N.exec(r);)this.pushAllFiles(i,l[1])}return i}parseLinkDependencies(r){let i=[],l;if(!this.platform_id.startsWith("verilog")){let f=/^\s*([;]|[/][/])#link\s+"(.+?)"/gm;for(;l=f.exec(r);)this.pushAllFiles(i,l[2])}return i}loadFileDependencies(r){let i=this.parseIncludeDependencies(r),l=this.parseLinkDependencies(r),f=i.concat(l);return this.loadFiles(f).then(m=>{if(m)for(let b of m)b.link=l.indexOf(b.path)>=0;return m})}okToSend(){let r=window.autoCompileEnabled===!0,i=!this.hasDoneInitialCompilation;return this.mainPath!=null&&(r||i)?this.pendingWorkerMessages++==0:!1}updateFileInStore(r,i){this.filesystem.setFileData(r,i)}buildWorkerMessage(r){this.preloadWorker(this.mainPath);var i={updates:[],buildsteps:[]},l=this.stripLocalPath(this.mainPath),f=this.getFile(this.mainPath),m=[];i.updates.push({path:l,data:f}),this.filename2path[l]=this.mainPath;let _=this.getToolForFilename(this.mainPath).startsWith("remote:");for(var C of r)(!C.link||_)&&(i.updates.push({path:C.filename,data:C.data}),m.push(C.filename)),this.filename2path[C.filename]=C.path;i.buildsteps.push({path:l,files:[l].concat(m),platform:this.platform_id,tool:this.getToolForFilename(this.mainPath),mainfile:!0});for(var C of r)C.data&&C.link&&(this.preloadWorker(C.filename),i.updates.push({path:C.filename,data:C.data}),i.buildsteps.push({path:C.filename,files:[C.filename].concat(m),platform:this.platform_id,tool:this.getToolForFilename(C.path)}));return this.dataItems&&(i.setitems=this.dataItems),i}async loadFiles(r){var i=[],l=(b,_)=>{i.push({path:b,filename:this.stripLocalPath(b),link:!0,data:_})};for(var f of r)if(f in this.filedata){var m=this.filedata[f];m&&l(f,m)}else{var m=await this.filesystem.getFileData(f);m?(this.filedata[f]=m,l(f,m)):this.filedata[f]=null}return i}getFile(r){return this.filedata[r]}iterateFiles(r){for(var i in this.filedata)r(i,this.getFile(i))}sendBuild(){if(!this.mainPath)throw Error("need to call setMainFile first");var r=this.getFile(this.mainPath);if(r instanceof Uint8Array){this.isCompiling=!0,this.receiveWorkerMessage({output:r,errors:[],listings:null,symbolmap:null,params:{}});return}var i=typeof r=="string"?r:"";return this.loadFileDependencies(i).then(l=>{l||(l=[]);var f=this.buildWorkerMessage(l);this.worker.postMessage(f),this.isCompiling=!0})}updateFile(r,i){this.filedata[r]!=i&&(this.updateFileInStore(r,i),this.filedata[r]=i,this.okToSend()&&(this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()))}setMainFile(r){this.mainPath=r,this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()}processBuildListings(r){if(r.listings){this.listings=r.listings;for(var i in this.listings){var l=this.listings[i];l.lines&&(l.sourcefile=new Rn(l.lines,l.text)),l.asmlines&&(l.assemblyfile=new Rn(l.asmlines,l.text))}}}processBuildResult(r){this.processBuildListings(r),this.processBuildSegments(r)}processBuildSegments(r){var i=this.platform.getMemoryMap&&this.platform.getMemoryMap().main||[];(i==null?void 0:i.length)&&i.forEach(l=>l.source="native"),r.segments&&(r.segments.forEach(l=>l.source="linker"),i=i.concat(r.segments||[])),i.sort((l,f)=>l.start-f.start),this.segments=i}getListings(){return this.listings}getListingForFile(r){var i=ct(this.stripLocalPath(r)),l=this.getListings();for(var f in l)if(f==r)return l[f];for(var f in l)if(ct(f)==i)return l[f]}stripLocalPath(r){if(this.mainPath){var i=uo(this.mainPath);i!=""&&r.startsWith(i+"/")&&(r=r.substring(i.length+1))}return r}updateDataItems(r){this.dataItems=r,this.okToSend()&&this.sendBuild()}};function Ji(s){var r=xa.default.createInstance({name:"__"+s,version:2});return r}var bo=Ta(),wo=class{constructor(r,i){this.id2window={};this.id2createfn={};this.id2showfn={};this.id2div={};this.containerdiv=r,this.project=i,this.undofiles=[]}isWindow(r){return this.id2createfn[r]!=null}setCreateFunc(r,i){this.id2createfn[r]=i}setShowFunc(r,i){this.id2showfn[r]=i}create(r){var i=this.id2window[r];i||(console.log("creating window",r),i=this.id2window[r]=this.id2createfn[r](r));var l=this.id2div[r];return l||(l=this.id2div[r]=i.createDiv(this.containerdiv),bo(l).hide()),i}createOrShow(r,i){var l=this.create(r),f=this.id2div[r];return this.activewnd!=l?(this.activediv&&bo(this.activediv).hide(),this.activewnd&&this.activewnd.setVisible&&this.activewnd.setVisible(!1),this.activediv=f,this.activewnd=l,bo(f).show(),this.refresh(!0),this.refreshErrors(),l.setVisible&&l.setVisible(!0),this.id2showfn[r]&&this.id2showfn[r](r,l)):this.refresh(i),this.activeid=r,l}put(r,i){this.id2window[r]=i}refresh(r){this.activewnd&&this.activewnd.refresh&&this.activewnd.refresh(r)}tick(){this.activewnd&&this.activewnd.tick&&this.activewnd.tick()}setErrors(r){this.lasterrors=r,this.refreshErrors()}refreshErrors(){this.activewnd&&this.activewnd.markErrors&&(this.lasterrors&&this.lasterrors.length?this.activewnd.markErrors(this.lasterrors):this.activewnd.clearErrors())}getActive(){return this.activewnd}getActiveID(){return this.activeid}getCurrentText(){if(this.activewnd&&this.activewnd.getValue)return this.activewnd.getValue();bootbox.alert("Please switch to an editor window.")}resize(){this.activeid&&this.activewnd&&this.activewnd.recreateOnResize&&(this.activewnd=null,this.id2window[this.activeid]=null,this.id2div[this.activeid]=null,this.createOrShow(this.activeid))}updateFile(r,i){var l=this.id2window[r];l&&l.setText&&typeof i=="string"?(l.setText(i),this.undofiles.push(r)):this.project.updateFile(r,i)}undoStep(){var r=this.undofiles.pop(),i=this.id2window[r];i&&i.undoStep?i.undoStep():bootbox.alert("No more steps to undo.")}updateAllOpenWindows(r){for(var i in this.id2window){var l=this.id2window[i];l&&l.setText&&r.getItem(i).then(f=>{this.updateFile(i,f)})}}findWindowWithFilePrefix(r){r=kt(ct(r));for(var i in this.id2createfn)if(!(i.toLowerCase().endsWith(".h")||i.toLowerCase().endsWith(".inc")||i.toLowerCase().endsWith(".bas"))&&kt(ct(i))==r)return i;return null}};var vl=`$NAME
=====

[Open this project in 8bitworkshop](http://8bitworkshop.com/redir.html?platform=$PLATFORM&githubURL=$GITHUBURL&file=$MAINFILE).
`;function Oi(){for(var s={},r=0;r<localStorage.length;r++){var i=localStorage.key(r);if(i.startsWith("__repo__")){var l=JSON.parse(localStorage.getItem(i)),f=i.substring("__repo__".length);s[f]=l}}return s}function Ki(s){var r=s.split("/",8);return r.length<5||r[0]!="https:"||r[2]!="github.com"||r[5]&&r[5]!="tree"?null:{user:r[3],repo:r[4],repopath:r[3]+"/"+r[4],branch:r[6],subtreepath:r[7]}}var _o=class{constructor(r,i,l,f){this.githubCons=r,this.githubToken=i,this.store=l,this.project=f,this.recreateGithub()}recreateGithub(){this.github=new this.githubCons({token:this.githubToken})}login(){if(this.githubToken&&this.githubToken.length)return new Promise((i,l)=>{i()});var r=new firebase.auth.GithubAuthProvider;return r.addScope("repo"),firebase.auth().signInWithPopup(r).then(i=>{this.githubToken=i.credential.accessToken;var l=i.user;this.recreateGithub(),document.cookie="__github_key="+this.githubToken+";path=/;max-age=31536000",console.log("Stored GitHub OAUTH key")})}logout(){return this.githubToken&&this.githubToken.length?firebase.auth().signOut().then(()=>{document.cookie="__github_key=;path=/;max-age=0",this.githubToken=null,this.recreateGithub()}):new Promise((r,i)=>{r()})}isFileIgnored(r){return r=r.toUpperCase(),!!(r.startsWith("LICENSE")||r.startsWith("README")||r.startsWith("."))}async getGithubSession(r){var i=Ki(r);if(!i)throw new Error("Please enter a valid GitHub URL.");var l=Oi()[i.repopath],f=i.branch||l&&l.branch,m=this.github.repos(i.user,i.repo);try{f=(await m.fetch()).defaultBranch||"master"}catch(_){console.log("could not fetch default branch: "+_),f="main"}console.log("branch =",f);var b={url:r,user:i.user,reponame:i.repo,repopath:i.repopath,branch:f,subtreepath:i.subtreepath,prefix:"",repo:m,platform_id:this.project?this.project.platform_id:l?l.platform_id:null};return b}getGithubHEADTree(r){var i;return this.getGithubSession(r).then(l=>(i=l,i.repo.git.refs.heads(i.branch).fetch())).then(l=>(i.head=l,i.sha=l.object.sha,i.repo.git.trees(i.sha).fetch())).then(l=>{if(i.subtreepath){for(let f of l.tree)if(f.type=="tree"&&f.path==i.subtreepath&&f.sha)return i.repo.git.trees(f.sha).fetch();throw Error("Cannot find subtree '"+i.subtreepath+"' in tree "+l.sha)}return l}).then(l=>(i.tree=l,i))}bind(r,i){var l="__repo__"+r.repopath;if(i){var f={url:r.url,branch:r.branch,platform_id:r.platform_id,mainPath:r.mainPath,sha:r.sha};console.log("storing",f),localStorage.setItem(l,JSON.stringify(f))}else localStorage.removeItem(l)}import(r){var i;return this.getGithubSession(r).then(l=>(i=l,i.repo.contents("README.md").read())).catch(l=>(console.log(l),console.log("no README.md found"),i.repo.fetch().then(f=>""))).then(l=>{var f;if(f=/8bitworkshop.com[^)]+file=([^)&]+)/.exec(l),f&&f[1]&&(console.log("main path: '"+f[1]+"'"),i.mainPath=f[1]),f=/8bitworkshop.com[^)]+platform=([A-Za-z0-9._\-]+)/.exec(l),f){if(console.log("platform id: '"+f[1]+"'"),i.platform_id&&!i.platform_id.startsWith(f[1]))throw Error("Platform mismatch: Repository is "+f[1]+", you have "+i.platform_id+" selected.");i.platform_id=f[1]}return this.bind(i,!0),i})}pull(r,i){var l;return this.getGithubHEADTree(r).then(f=>{l=f;let m=[];return l.paths=[],l.tree.tree.forEach(b=>{if(console.log(b.path,b.type,b.size),l.paths.push(b.path),b.type=="blob"&&!this.isFileIgnored(b.path)){var _=l.repo.git.blobs(b.sha).fetch().then(C=>{var N=l.prefix+b.path,oe=b.size,Se=C.encoding,G=C.content;if(C.encoding=="base64"){var z=Pn(atob(G)),Z=gi(b.path,z);G=Z?z:qi(z)}return C.size!=G.length&&(G=G.slice(0,C.size)),(i||this.store).setItem(N,G)});m.push(_)}else console.log("ignoring "+b.path)}),Promise.all(m)}).then(f=>l)}importAndPull(r){return this.import(r).then(i=>this.pull(r))}publish(r,i,l,f){var m,b=this.project.platform_id,_=this.project.stripLocalPath(this.project.mainPath);return this.github.user.repos.create({name:r,description:i,private:f,auto_init:!1,license_template:l}).then(C=>{m=C;var N=vl;N=N.replace(/\$NAME/g,encodeURIComponent(r)),N=N.replace(/\$PLATFORM/g,encodeURIComponent(b)),N=N.replace(/\$GITHUBURL/g,encodeURIComponent(m.htmlUrl)),N=N.replace(/\$MAINFILE/g,encodeURIComponent(_));var oe={message:"8bitworkshop: updated metadata in README.md",content:btoa(N)};return m.contents("README.md").add(oe)}).then(()=>this.getGithubSession(m.htmlUrl))}commit(r,i,l){var f;return i||(i="updated from 8bitworkshop.com"),this.getGithubHEADTree(r).then(m=>{if(f=m,f.subtreepath)throw Error("Sorry, right now you can only commit files to the root directory of a repository.");return Promise.all(l.map(b=>typeof b.data=="string"?f.repo.git.blobs.create({content:b.data,encoding:"utf-8"}):f.repo.git.blobs.create({content:btoa(kn(b.data)),encoding:"base64"})))}).then(m=>f.repo.git.trees.create({tree:l.map((b,_)=>({path:b.path,mode:"100644",type:"blob",sha:m[_].sha})),base_tree:f.tree.sha})).then(m=>f.repo.git.commits.create({message:i,tree:m.sha,parents:[f.head.object.sha]})).then(m=>f.repo.commits(m.sha).fetch()).then(m=>(f.commit=m,f))}push(r){return r.head.update({sha:r.commit.sha}).then(i=>r)}deleteRepository(r){return this.getGithubSession(r).then(i=>i.repo.remove())}};var Qi=window.matchMedia&&window.matchMedia("only screen and (max-width: 760px)").matches;function Sa(s,r){var i=s.charCoords({line:r,ch:0},"local").top,l=s.getScrollerElement().offsetHeight/2;s.scrollTo(null,i-l-5)}function Aa(s,r){var i=document.createElement("span");return i.setAttribute("class",r),i.appendChild(document.createTextNode(s)),i}var Ln=64,yl=200,xo={default:{theme:"mbo"},"6502":{isAsm:!0},z80:{isAsm:!0},jsasm:{isAsm:!0},gas:{isAsm:!0},vasm:{isAsm:!0},nasm:{isAsm:!0},inform6:{theme:"cobalt"},markdown:{lineWrap:!0},fastbasic:{noGutters:!0},basic:{noLineNumbers:!0,noGutters:!0},qbasic:{noLineNumbers:!0,noGutters:!0},pascal:{theme:"mbo"},ecs:{theme:"mbo",isAsm:!0},c:{theme:"mbo"}},Ca={input:null},Zi=class{constructor(r,i){this.updateTimer=null;this.dirtylisting=!0;this.errormsgs=[];this.errorwidgets=[];this.errormarks=[];this.refreshDelayMsec=300;this.path=r,this.mode=i}createDiv(r){var i=document.createElement("div");i.setAttribute("class","editor"),r.appendChild(i);var l=me.getFile(this.path),f=l&&this.mode=="verilog"&&/__asm\b([\s\S]+?)\b__endasm\b/.test(l);return this.newEditor(i,f),l&&(this.setText(l),this.editor.setSelection({line:0,ch:0},{line:0,ch:0},{scroll:!0})),this.setupEditor(),me.getToolForFilename(this.path).startsWith("remote:")&&(this.refreshDelayMsec=1e3),i}setVisible(r){r&&this.editor.focus()}newEditor(r,i){var l=xo[this.mode]||xo.default,f=i||l.isAsm,m=!!l.lineWrap,b=l.theme||xo.default.theme,_=!l.noLineNumbers&&!Qi;te.embed&&(_=!1,f=!1);var C=["CodeMirror-linenumbers","gutter-offset","gutter-info"];f&&(C=["CodeMirror-linenumbers","gutter-offset","gutter-bytes","gutter-clock","gutter-info"]),(l.noGutters||Qi)&&(C=["gutter-info"]),this.editor=CodeMirror(r,{theme:b,lineNumbers:_,matchBrackets:!0,tabSize:8,indentAuto:!0,lineWrapping:m,gutters:C})}editorChanged(){clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{me.updateFile(this.path,this.editor.getValue())},this.refreshDelayMsec),this.markHighlight&&(this.markHighlight.clear(),this.markHighlight=null)}setupEditor(){this.editor.on("changes",(r,i)=>{this.editorChanged()}),this.editor.on("cursorActivity",r=>{this.inspectUnderCursor()}),this.editor.on("gutterClick",(r,i)=>{this.toggleBreakpoint(i)}),this.editor.setOption("mode",this.mode),this.editor.on("beforeChange",(r,i)=>{Ca.input&&i.text&&(i.text=i.text.map(Ca.input))})}inspectUnderCursor(){var r=this.editor.getCursor(!0),i=this.editor.getCursor(!1);if(r.line==i.line&&r.ch<i.ch&&i.ch-r.ch<80){var l=this.editor.getSelection();this.inspect(l)}else this.inspect(null)}inspect(r){var i;if(D.inspect&&(i=D.inspect(r)),this.inspectWidget&&(this.inspectWidget.clear(),this.inspectWidget=null),i){var l=Aa(i,"tooltipinfoline"),f=this.editor.getCursor().line;this.inspectWidget=this.editor.addLineWidget(f,l,{above:!1})}}setText(r){var i,l,f=this.editor.getValue();f!=r&&(this.editor.setValue(r),f==""&&this.editor.clearHistory())}insertText(r){var i=this.editor.getCursor();this.editor.replaceRange(r,i,i)}highlightLines(r,i){var l="hilite-span",f={className:l,inclusiveLeft:!0};this.markHighlight=this.editor.markText({line:r,ch:0},{line:i,ch:0},f),this.editor.scrollIntoView({from:{line:r,ch:0},to:{line:i,ch:0}})}replaceSelection(r,i,l){this.editor.setSelection(this.editor.posFromIndex(r),this.editor.posFromIndex(i)),this.editor.replaceSelection(l)}getValue(){return this.editor.getValue()}getPath(){return this.path}addError(r){if(!r.path||this.path.endsWith(r.path)){var i=this.editor.lineCount(),l=r.line-1;if((isNaN(l)||l<0||l>=i)&&(l=0),this.addErrorMarker(l,r.msg),r.start!=null){var f={className:"mark-error",inclusiveLeft:!0},m={line:l,ch:r.end?r.start:r.start-1},b={line:l,ch:r.end?r.end:r.start},_=this.editor.markText(m,b,f);this.errormarks.push(_)}}}addErrorMarker(r,i){var l=document.createElement("div");l.setAttribute("class","tooltipbox tooltiperror"),l.appendChild(document.createTextNode("\u24CD")),this.editor.setGutterMarker(r,"gutter-info",l),this.errormsgs.push({line:r,msg:i}),$(l).mouseover(f=>{this.expandErrors()})}addErrorLine(r,i){var l=Aa(i,"tooltiperrorline");this.errorwidgets.push(this.editor.addLineWidget(r,l))}expandErrors(){for(var r;r=this.errormsgs.shift();)this.addErrorLine(r.line,r.msg)}markErrors(r){this.clearErrors(),r=r.slice(0,yl);for(var i of r)this.addError(i)}clearErrors(){for(this.dirtylisting=!0,this.editor.clearGutter("gutter-info"),this.errormsgs=[];this.errorwidgets.length;)this.errorwidgets.shift().clear();for(;this.errormarks.length;)this.errormarks.shift().clear()}getSourceFile(){return this.sourcefile}updateListing(){this.clearErrors(),this.editor.clearGutter("gutter-bytes"),this.editor.clearGutter("gutter-offset"),this.editor.clearGutter("gutter-clock");var r=this.sourcefile.lines||[];for(var i of r)if(i.offset>=0&&this.setGutter("gutter-offset",i.line-1,br(i.offset&65535,4)),i.insns){var l=i.insns.length>9?"...":i.insns;if(this.setGutter("gutter-bytes",i.line-1,l),i.iscode){if(i.cycles)this.setGutter("gutter-clock",i.line-1,i.cycles+"");else if(D.getOpcodeMetadata){var f=parseInt(i.insns.split(" ")[0],16),m=D.getOpcodeMetadata(f,i.offset);if(m&&m.minCycles){var b=m.minCycles+"";this.setGutter("gutter-clock",i.line-1,b)}}}}}setGutter(r,i,l){var f=this.editor.lineInfo(i);if(!(f&&f.gutterMarkers&&f.gutterMarkers[r])){var m=document.createTextNode(l);this.editor.setGutterMarker(i,r,m)}}setGutterBytes(r,i){this.setGutter("gutter-bytes",r-1,i)}setTimingResult(r){if(this.editor.clearGutter("gutter-bytes"),this.sourcefile!=null)for(let m of Object.keys(this.sourcefile.line2offset)){let b=this.sourcefile.line2offset[m],_=r.pc2clockrange[b];var i=_&&_.minclocks,l=_&&_.maxclocks;if(i>=0&&l>=0){var f;l==i?f=i+"":f=i+"-"+l,l==r.MAX_CLOCKS&&(f+="+"),this.setGutterBytes(parseInt(m),f)}}}setCurrentLine(r,i){var l=D.isBlocked&&D.isBlocked(),f=_=>{var C=document.createElement("div"),N=l?"currentpc-marker-blocked":"currentpc-marker";C.classList.add(N),C.appendChild(document.createTextNode("\u25B6")),this.editor.setGutterMarker(_.line-1,"gutter-info",C)};if(this.clearCurrentLine(i),r){f(r),i&&this.editor.setCursor({line:r.line-1,ch:r.start||0},{scroll:!0});var m=l?"currentpc-span-blocked":"currentpc-span",b={className:m,inclusiveLeft:!0};r.start||r.end?this.markCurrentPC=this.editor.markText({line:r.line-1,ch:r.start},{line:r.line-1,ch:r.end||r.start+1},b):this.markCurrentPC=this.editor.markText({line:r.line-1,ch:0},{line:r.line,ch:0},b),this.currentDebugLine=r}}clearCurrentLine(r){this.currentDebugLine&&(this.editor.clearGutter("gutter-info"),r&&this.editor.setSelection(this.editor.getCursor()),this.currentDebugLine=null),this.markCurrentPC&&(this.markCurrentPC.clear(),this.markCurrentPC=null)}getActiveLine(){if(this.sourcefile){var r=Ir&&Ir.c;if(!r&&D.getCPUState&&!D.isRunning()&&(r=D.getCPUState()),r){var i=r&&(r.EPC||r.PC),l=this.sourcefile.findLineForOffset(i,Ln);return l}}}refreshDebugState(r){this.clearCurrentLine(r);var i=this.getActiveLine();i&&this.setCurrentLine(i,r)}refreshListing(){var r=me.getListingForFile(this.path);r&&r.sourcefile&&r.sourcefile!==this.sourcefile&&(this.sourcefile=r.sourcefile,this.dirtylisting=!0),!(!this.sourcefile||!this.dirtylisting)&&(this.updateListing(),this.dirtylisting=!1)}refresh(r){this.refreshListing(),this.refreshDebugState(r)}tick(){this.refreshDebugState(!1)}getLine(r){return this.editor.getLine(r-1)}getCurrentLine(){return this.editor.getCursor().line+1}getCursorPC(){for(var r=this.getCurrentLine();this.sourcefile&&r>=0;){var i=this.sourcefile.line2offset[r];if(i>=0)return i;r--}return-1}undoStep(){this.editor.execCommand("undo")}toggleBreakpoint(r){if(this.sourcefile!=null){var i=this.sourcefile.line2offset[r+1];en(i)}}},Eo=1024,Pa=class{getDisasmView(){return this.disasmview}createDiv(r){var i=document.createElement("div");return i.setAttribute("class","editor"),r.appendChild(i),this.newEditor(i),i}newEditor(r){this.disasmview=CodeMirror(r,{mode:"z80",theme:"cobalt",tabSize:8,readOnly:!0,styleActiveLine:!0})}refresh(r){let i=Ir||D.saveState(),l=i.c?i.c.PC:0,f=0,m=0,b=D.debugSymbols&&D.debugSymbols.addr2symbol||{},_=(oe,Se)=>{let G="",z=0;for(;z<Se;){let Z=oe+z|0,Ee=D.disassemble(Z,D.readAddress.bind(D)),V="",O="";for(let M=0;M<Ee.nbytes;M++)V+=br(D.readAddress(Z+M));for(;V.length<14;)V+=" ";let H=Ee.line;if(b&&Ee.isaddr&&(H=H.replace(/([^#])[$]([0-9A-F]+)/,(M,...B)=>{let o=parseInt(B[1],16),xe=b[o];return xe?B[0]+xe:(xe=b[o-1],xe?B[0]+xe+"+1":M)})),b){let M=b[Z];M&&(O="; "+M)}G+=br(Z,4)+"	"+Cn(V,14)+"	"+Cn(H,30)+O+`
`,Z==l&&(m=f),f++,z+=Ee.nbytes||1}return G};var C=l<0?l-Eo:Math.max(0,l-Eo);let N=_(C,l-C)+_(l,Eo);this.disasmview.setValue(N),r&&this.disasmview.setCursor(m,0),Sa(this.disasmview,m)}getCursorPC(){var r=this.disasmview.getCursor().line;if(r>=0){var i=this.disasmview.getLine(r).trim().split(/\s+/);if(i&&i.length>=1){var l=parseInt(i[0],16);if(l>=0)return l}}return-1}},To=class extends Pa{constructor(r){super();this.path=r}refreshListing(){var r=me.getListingForFile(this.path);this.assemblyfile=r&&(r.assemblyfile||r.sourcefile)}refresh(r){if(this.refreshListing(),!!this.assemblyfile){var i=this.assemblyfile.text,l=this.getDisasmView();if(l.setValue(i),!!D.saveState){var f=Ir||D.saveState(),m=f.c?f.c.EPC||f.c.PC:0;if(m>=0&&this.assemblyfile){var b=this.assemblyfile.findLineForOffset(m,Ln);b&&(r&&l.setCursor(b.line-1,0),Sa(l,b.line-1))}}}}};var So=class{constructor(r,i){this.recreateOnResize=!0;this.path=r,this.data=i}createDiv(r){return this.vlist=new pa(r),this.vlist.create(r,this.data.length+15>>4,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(r){for(var i=r*16,l=0,f=16,m=br(i+l,4)+" ",b=0;b<l;b++)m+="   ";l>8&&(m+=" ");for(var b=l;b<f;b++){var _=this.data[i+b];b==8&&(m+=" "),m+=" "+(_>=0?br(_,2):"  ")}return{text:m}}refresh(){this.vlist.refresh()}getPath(){return this.path}};function Fn(){let s=$(".modal-backdrop");s.length>1&&s.slice(0,-1).remove(),$(".modal-backdrop").each(function(){let r=$(this);$(".modal.in, .modal.show").length===0&&(r.remove(),$("body").removeClass("modal-open"))})}function pe(s){s?(Fn(),jt(0),$("#pleaseWaitModal").modal("show")):(jt(1),$("#pleaseWaitModal").modal("hide"),setTimeout(()=>{Fn()},350))}function jt(s){$("#pleaseWaitProgressBar").css("width",s*100+"%").show()}function se(s){pe(!1),setTimeout(()=>{Fn(),bootbox.alert({title:'<span class="glyphicon glyphicon-alert" aria-hidden="true"></span> Alert',message:Ii.sanitize(s)})},350)}function et(s){pe(!1),setTimeout(()=>{Fn(),bootbox.alert(Ii.sanitize(s))},350)}function ka(s){throw se(s),new Error(s)}function bl(){if(window.GA4_TRACKING_ID)return window.GA4_TRACKING_ID;if(typeof gtag!="undefined"&&window.dataLayer){let s=window.dataLayer;for(let r=0;r<s.length;r++)if(s[r][0]==="config"&&s[r][1])return s[r][1]}return null}function We(s,r,i,l){if(typeof gtag!="undefined"){let f={event_category:s,event_label:i};l!==void 0&&(f.value=l),gtag("event",r,f)}}function Ra(s){if(typeof gtag!="undefined"){let r=bl();r?gtag("config",r,{page_path:s}):gtag("event","page_view",{page_path:s})}}var Co;async function bi(){if(!Co){await Jt("lib/octokat.js"),await Jt("https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"),await Jt("https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"),await Jt("config.js");var s=yi("__github_key");Co=new _o(Octokat,s,Or(),$t()),console.log("loaded github service")}return Co}function tn(){var s=(qe||"").split("/");return s.length!=2?(se("You are not in a GitHub repository. Choose one from the pulldown, or Import or Publish one."),null):"https://github.com/"+s[0]+"/"+s[1]}async function In(s,r){var i,l=Ki(s);if(!l){se("Could not parse Github URL.");return}var f=Oi()[l.repopath];if(!(f&&!confirm("You've already imported "+l.repopath+" -- do you want to replace all local files?"))){pe(!0);var m=Ji(l.repopath);jt(.25);var b=await bi();return b.import(s).then(_=>(i=_,jt(.75),b.pull(s,m))).then(_=>{pe(!1),We("sync","import",s),Jr(r,{repo:l.repopath})}).catch(_=>{pe(!1),console.log(_),se("Could not import "+s+"."+_)})}}async function Da(s){var r=await bi();r.login().then(()=>{et("You are signed in to Github.")}).catch(i=>{se("Could not sign in."+i)})}async function La(s){var r=await bi();r.logout().then(()=>{et("You are logged out of Github.")})}function Fa(s){var r=$("#importGithubModal"),i=$("#importGithubButton");r.modal("show"),i.off("click").on("click",()=>{var l=$("#importGithubURL").val()+"";r.modal("hide"),In(l,!1)})}function Ia(s){if(!(qe&&!confirm("This project ("+$t().mainPath+") is already bound to a Github repository. Do you want to re-publish to a new repository? (You can instead choose 'Push Changes' to update files in the existing repository.)"))){var r=$("#publishGithubModal"),i=$("#publishGithubButton");$("#githubRepoName").val(ct(kt($t().mainPath))),r.modal("show"),i.off("click").on("click",async()=>{var l=$("#githubRepoName").val()+"",f=$("#githubRepoDesc").val()+"",m=$("#githubRepoPrivate").val()=="private",b=$("#githubRepoLicense").val()+"",_;if(!l){se("You did not enter a project name.");return}r.modal("hide"),pe(!0);var C=await bi();C.login().then(()=>(jt(.25),C.publish(l,f,b,m))).then(N=>(_=N,jt(.5),Na("initial import from 8bitworkshop.com"))).then(()=>{We("sync","publish",m?"":l),In(_.url,!1)}).catch(N=>{pe(!1),console.log(N),se("Could not publish GitHub repository: "+N)})})}}function Oa(s){var r=tn();if(!!r){var i=$("#pushGithubModal"),l=$("#pushGithubButton");i.modal("show"),l.off("click").on("click",()=>{var f=$("#githubCommitMsg").val()+"";i.modal("hide"),Na(f)})}}function Ma(s){var r=tn();!r||bootbox.confirm("Pull from repository and replace all local files? Any changes you've made will be overwritten.",async i=>{if(i){pe(!0);var l=await bi();l.pull(r).then(f=>{pe(!1),ve.updateAllOpenWindows(Or())})}})}function wl(s){return new Promise((r,i)=>{var l=s.commit.files;if(console.log(l),l.length==0){pe(!1),et("No files changed.");return}var f="";for(var m of l)f+=Ii.sanitize(m.filename)+": "+m.status,(m.additions||m.deletions||m.changes)&&(f+=" ("+m.additions+" additions, "+m.deletions+" deletions, "+m.changes+" changes)"),f+="<br/>";bootbox.confirm(f,b=>{b?r(s):pe(!1)})})}async function Na(s){var r=tn();if(!!r){var i=[];for(var l in $t().filedata){var f=$t().stripLocalPath(l),m=$t().filedata[l];f&&m&&i.push({path:f,data:m})}if(ot()instanceof Uint8Array){let _="bin/"+Ke()+".rom";i.push({path:_,data:ot()})}pe(!0);var b=await bi();return b.login().then(()=>(jt(.5),b.commit(r,s,i))).then(_=>wl(_)).then(_=>b.push(_)).then(_=>(pe(!1),et("Pushed files to "+r),_)).catch(_=>{pe(!1),console.log(_),se("Could not push GitHub repository: "+_)})}}function ja(){var s=tn();!s||bootbox.prompt("<p>Are you sure you want to delete this repository ("+Ii.sanitize(s)+") from browser storage?</p><p>All changes since last commit will be lost.</p><p>Type DELETE to proceed.<p>",r=>{r.trim().toUpperCase()=="DELETE"&&_l()})}async function _l(){var s=tn();pe(!0);let r=await bi(),i=await r.getGithubSession(s);r.bind(i,!1),await Or().keys().then(l=>Promise.all(l.map(f=>Or().removeItem(f)))),pe(!1),Jr(!1,{repo:"/"})}var xl="https://api.retrogamecoders.com",$a=class{constructor(r=xl){this.authToken=null;this.baseUrl=r,this.authToken=yi("__rgc_api_token")}getToken(){return this.authToken}setToken(r){this.authToken=r,r?Yi("__rgc_api_token",r,365):Yi("__rgc_api_token","",-1)}isAuthenticated(){return!!this.authToken}async apiRequest(r,i={}){let l=`${this.baseUrl}${r}`,f=ao({"Content-Type":"application/json",Accept:"application/json"},i.headers);this.authToken&&(f.Authorization=`Bearer ${this.authToken}`);let m;try{console.log("API Request:",i.method||"GET",l),m=await fetch(l,ca(ao({},i),{headers:f})),console.log("API Response:",m.status,m.statusText)}catch(_){let C=_.message||"Network error";if(console.error("API Request failed:",_),C.includes("Failed to fetch")||C.includes("NetworkError")){let N=window.location.origin,oe=N.includes("localhost")||N.includes("127.0.0.1"),Se="";oe?Se=`
\u26A0\uFE0F You're running on localhost (${N})
The API server needs to allow requests from localhost for local development.

Add to your API server CORS configuration:
- Access-Control-Allow-Origin: ${N}
- Or for development: Access-Control-Allow-Origin: *

`:Se=`The API server at ${this.baseUrl} needs to allow requests from:
${N}

`;let G=`Cannot connect to API server.

URL: ${l}
Origin: ${N}
Error: ${C}

This is likely a CORS (Cross-Origin Resource Sharing) issue.
`+Se+`Please check:
- CORS headers are configured on the API server
- The API server allows requests from your IDE domain (including localhost for development)
- Check browser console (F12) for more details
- Check Network tab to see the actual request/response`;throw new Error(G)}throw new Error(`Network error: ${C}`)}if(!m.ok){let _=`HTTP ${m.status}: ${m.statusText}`;try{let C=await m.json();C.message?_=C.message:C.error?_=C.error:typeof C=="string"&&(_=C)}catch(C){try{let N=await m.text();N&&(_=N)}catch(N){}}throw new Error(_)}let b=m.headers.get("content-type");if(b&&b.includes("application/json")){let _=await m.text();return _?JSON.parse(_):null}return null}async register(r,i,l,f){let m={name:r,email:i,password:l};f!==void 0&&(m.password_confirmation=f);let b=await this.apiRequest("/api/auth/register",{method:"POST",body:JSON.stringify(m)});return b.token&&this.setToken(b.token),b}async login(r,i){let l=await this.apiRequest("/api/auth/login",{method:"POST",body:JSON.stringify({email:r,password:i})});return l.token&&this.setToken(l.token),l}async getUser(){return this.apiRequest("/api/auth/user")}async updateUser(r){return this.apiRequest("/api/auth/user",{method:"PUT",body:JSON.stringify(r)})}async logout(){try{await this.apiRequest("/api/auth/logout",{method:"POST"})}finally{this.setToken(null)}}async forgotPassword(r){return this.apiRequest("/api/auth/password/forgot",{method:"POST",body:JSON.stringify({email:r})})}async resetPassword(r,i,l){return this.apiRequest("/api/auth/password/reset",{method:"POST",body:JSON.stringify({token:r,email:i,password:l})})}async socialLogin(r,i){let l=await this.apiRequest(`/api/auth/social/${r}`,{method:"POST",body:JSON.stringify({token:i})});return l.token&&this.setToken(l.token),l}async getProjects(){return this.apiRequest("/api/projects")}async getProject(r){return this.apiRequest(`/api/projects/${r}`)}async createProject(r){return this.apiRequest("/api/projects",{method:"POST",body:JSON.stringify({title:r.title,description:r.description||null,public:r.public!==void 0?r.public:!1})})}async updateProject(r,i){return this.apiRequest(`/api/projects/${r}`,{method:"PUT",body:JSON.stringify(i)})}async deleteProject(r){return this.apiRequest(`/api/projects/${r}`,{method:"DELETE"})}async getProjectFiles(r){return this.apiRequest(`/api/projects/${r}/files`)}async getFiles(){return this.apiRequest("/api/files")}async getFile(r){return this.apiRequest(`/api/files/${r}`)}async createFile(r){return this.apiRequest("/api/files",{method:"POST",body:JSON.stringify({title:r.title,content:r.content,filetype:r.filetype||null,language:r.language||null,project_id:r.project_id||null,public:r.public!==void 0?r.public:!1})})}async updateFile(r,i){return this.apiRequest(`/api/files/${r}`,{method:"PUT",body:JSON.stringify(i)})}async deleteFile(r){return this.apiRequest(`/api/files/${r}`,{method:"DELETE"})}async getFileRevisions(r){return this.apiRequest(`/api/files/${r}/revisions`)}async revertFile(r,i){return this.apiRequest(`/api/files/${r}/revert/${i}`,{method:"POST"})}async pushProjectFiles(r,i,l){let f=await this.getProjectFiles(r),m={};for(let _ of f)m[_.title]=_;let b={};for(let[_,C]of Object.entries(i)){let N=_,oe=typeof C=="string"?C:new TextDecoder().decode(C),Se=l==null?void 0:l[_];m[N]?b[_]=await this.updateFile(m[N].id,{content:oe,filetype:Se}):b[_]=await this.createFile({title:N,content:oe,filetype:Se,project_id:r})}return b}async pullProjectFiles(r){var f;let i=await this.getProjectFiles(r);console.log("pullProjectFiles: Got",i.length,"files from API");let l={};for(let m of i)console.log("pullProjectFiles: Processing file",m.title,"content length:",((f=m.content)==null?void 0:f.length)||0),l[m.title]=m.content;return console.log("pullProjectFiles: Returning",Object.keys(l).length,"files:",Object.keys(l)),l}};var Po=null;function _r(){return Po||(Po=new $a),Po}var rn=null,El=null;function Ua(s){if(!ne||!D)return;let r=s.toLowerCase().substring(s.lastIndexOf(".")),l={".bas":"basic",".c":"c",".h":"c",".asm":"asm",".s":"asm",".prg":"prg",".rom":"rom",".bin":"bin",".txt":"text",".json":"json",".png":"png",".jpg":"jpg",".jpeg":"jpeg",".gif":"gif"}[r]||r.substring(1);return`${ne}/${l}`}function Wa(s){El=s,rn=s?s.id:null}async function Ha(){let s=$("#registerApiModal"),r=$("#registerApiButton");s.modal("show"),r.off("click").on("click",async()=>{let i=($("#registerApiName").val()+"").trim(),l=($("#registerApiEmail").val()+"").trim(),f=($("#registerApiPassword").val()+"").trim(),m=($("#registerApiConfirmPassword").val()+"").trim();if($("#registerApiPassword, #registerApiConfirmPassword").removeClass("is-invalid"),!i||!l||!f||!m){se("Please fill in all fields."),f||$("#registerApiPassword").addClass("is-invalid"),m||$("#registerApiConfirmPassword").addClass("is-invalid");return}if(f.length<8){se("Password must be at least 8 characters."),$("#registerApiPassword").addClass("is-invalid");return}if(f!==m){se("Passwords do not match. Please check and try again."),$("#registerApiPassword").addClass("is-invalid"),$("#registerApiConfirmPassword").addClass("is-invalid");return}s.modal("hide"),pe(!0);try{let _=await _r().register(i,l,f,m);pe(!1),et(`Welcome ${_.user.name}! You are now registered and logged in.`),We("api","register","success"),s.modal("hide"),nn()}catch(b){pe(!1),se("Registration failed: "+b.message),We("api","register","error")}})}async function Ba(){let s=$("#loginApiModal"),r=$("#loginApiButton");s.modal("show"),r.off("click").on("click",async()=>{let i=$("#loginApiEmail").val()+"",l=$("#loginApiPassword").val()+"";if(!i||!l){se("Please enter email and password.");return}s.modal("hide"),pe(!0);try{let m=await _r().login(i,l);pe(!1),et(`Welcome back, ${m.user.name}!`),We("api","login","success"),nn()}catch(f){pe(!1),se("Login failed: "+f.message),We("api","login","error")}})}async function Ga(){if(Mi(),!!confirm("Are you sure you want to logout?")){pe(!0);try{await _r().logout(),Wa(null),pe(!1),et("You have been logged out."),We("api","logout","success"),nn()}catch(s){pe(!1),se("Logout failed: "+s.message)}}}function Tl(s){function r(V,O){let H=V[0],I=V[1],M=V[2],B=V[3];H=l(H,I,M,B,O[0],7,-680876936),B=l(B,H,I,M,O[1],12,-389564586),M=l(M,B,H,I,O[2],17,606105819),I=l(I,M,B,H,O[3],22,-1044525330),H=l(H,I,M,B,O[4],7,-176418897),B=l(B,H,I,M,O[5],12,1200080426),M=l(M,B,H,I,O[6],17,-1473231341),I=l(I,M,B,H,O[7],22,-45705983),H=l(H,I,M,B,O[8],7,1770035416),B=l(B,H,I,M,O[9],12,-1958414417),M=l(M,B,H,I,O[10],17,-42063),I=l(I,M,B,H,O[11],22,-1990404162),H=l(H,I,M,B,O[12],7,1804603682),B=l(B,H,I,M,O[13],12,-40341101),M=l(M,B,H,I,O[14],17,-1502002290),I=l(I,M,B,H,O[15],22,1236535329),H=f(H,I,M,B,O[1],5,-165796510),B=f(B,H,I,M,O[6],9,-1069501632),M=f(M,B,H,I,O[11],14,643717713),I=f(I,M,B,H,O[0],20,-373897302),H=f(H,I,M,B,O[5],5,-701558691),B=f(B,H,I,M,O[10],9,38016083),M=f(M,B,H,I,O[15],14,-660478335),I=f(I,M,B,H,O[4],20,-405537848),H=f(H,I,M,B,O[9],5,568446438),B=f(B,H,I,M,O[14],9,-1019803690),M=f(M,B,H,I,O[3],14,-187363961),I=f(I,M,B,H,O[8],20,1163531501),H=f(H,I,M,B,O[13],5,-1444681467),B=f(B,H,I,M,O[2],9,-51403784),M=f(M,B,H,I,O[7],14,1735328473),I=f(I,M,B,H,O[12],20,-1926607734),H=m(H,I,M,B,O[5],4,-378558),B=m(B,H,I,M,O[8],11,-2022574463),M=m(M,B,H,I,O[11],16,1839030562),I=m(I,M,B,H,O[14],23,-35309556),H=m(H,I,M,B,O[1],4,-1530992060),B=m(B,H,I,M,O[4],11,1272893353),M=m(M,B,H,I,O[7],16,-155497632),I=m(I,M,B,H,O[10],23,-1094730640),H=m(H,I,M,B,O[13],4,681279174),B=m(B,H,I,M,O[0],11,-358537222),M=m(M,B,H,I,O[3],16,-722521979),I=m(I,M,B,H,O[6],23,76029189),H=m(H,I,M,B,O[9],4,-640364487),B=m(B,H,I,M,O[12],11,-421815835),M=m(M,B,H,I,O[15],16,530742520),I=m(I,M,B,H,O[2],23,-995338651),H=b(H,I,M,B,O[0],6,-198630844),B=b(B,H,I,M,O[7],10,1126891415),M=b(M,B,H,I,O[14],15,-1416354905),I=b(I,M,B,H,O[5],21,-57434055),H=b(H,I,M,B,O[12],6,1700485571),B=b(B,H,I,M,O[3],10,-1894986606),M=b(M,B,H,I,O[10],15,-1051523),I=b(I,M,B,H,O[1],21,-2054922799),H=b(H,I,M,B,O[8],6,1873313359),B=b(B,H,I,M,O[15],10,-30611744),M=b(M,B,H,I,O[6],15,-1560198380),I=b(I,M,B,H,O[13],21,1309151649),H=b(H,I,M,B,O[4],6,-145523070),B=b(B,H,I,M,O[11],10,-1120210379),M=b(M,B,H,I,O[2],15,718787259),I=b(I,M,B,H,O[9],21,-343485551),V[0]=_(H,V[0]),V[1]=_(I,V[1]),V[2]=_(M,V[2]),V[3]=_(B,V[3])}function i(V,O,H,I,M,B){return O=_(_(O,V),_(I,B)),_(O<<M|O>>>32-M,H)}function l(V,O,H,I,M,B,o){return i(O&H|~O&I,V,O,M,B,o)}function f(V,O,H,I,M,B,o){return i(O&I|H&~I,V,O,M,B,o)}function m(V,O,H,I,M,B,o){return i(O^H^I,V,O,M,B,o)}function b(V,O,H,I,M,B,o){return i(H^(O|~I),V,O,M,B,o)}function _(V,O){return V+O&4294967295}function C(V){let O="0123456789abcdef",H="";for(let I=0;I<4;I++)H+=O.charAt(V>>I*8+4&15)+O.charAt(V>>I*8&15);return H}let N=[];for(let V=0;V<s.length;V++){let O=s.charCodeAt(V);if(O<128)N.push(O);else if(O<2048)N.push(192|O>>6),N.push(128|O&63);else if(O<55296||O>=57344)N.push(224|O>>12),N.push(128|O>>6&63),N.push(128|O&63);else{V++;let H=s.charCodeAt(V),I=65536+((O&1023)<<10|H&1023);N.push(240|I>>18),N.push(128|I>>12&63),N.push(128|I>>6&63),N.push(128|I&63)}}let oe=[],Se=[],G;for(G=0;G<N.length;G++)oe[G>>2]|=(N[G]&255)<<G%4*8;oe[G>>2]|=128<<G%4*8;let z=(G+8>>6)+1,Z=new Array(z*16);for(G=0;G<z*16;G++)Z[G]=oe[G]||0;Z[z*16-2]=N.length*8;let Ee=[1732584193,-271733879,-1732584194,271733878];for(G=0;G<Z.length;G+=16)Se=Z.slice(G,G+16),r(Ee,Se);return C(Ee[0])+C(Ee[1])+C(Ee[2])+C(Ee[3])}async function Sl(s,r){if(r.avatar_url){s.attr("src",r.avatar_url);return}if(r.email){let b=r.email.trim().toLowerCase(),C=`https://www.gravatar.com/avatar/${Tl(b)}?s=64&d=404&r=pg`;if(await Al(C)){s.attr("src",C);return}}let i=r.name.toLowerCase().replace(/\s+/g,"-"),l=r.name.split(" ").map(b=>b[0]).join("").toUpperCase().substring(0,2),f=`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(i)}&size=64&backgroundColor=9305eb,a799ff,d6ccf7,99ffff&fontSize=40`;s.attr("src",f);let m=new Image;m.onerror=()=>{let b=document.createElement("canvas");b.width=32,b.height=32;let _=b.getContext("2d");if(_){let C=["#9305eb","#a799ff","#d6ccf7","#99ffff"],N=r.name.charCodeAt(0)%C.length;_.fillStyle=C[N],_.fillRect(0,0,32,32),_.fillStyle="#fff",_.font="bold 12px Arial",_.textAlign="center",_.textBaseline="middle",_.fillText(l,16,16)}s.attr("src",b.toDataURL())},m.src=f}function Al(s){return new Promise(r=>{let i=new Image;i.onload=()=>r(!0),i.onerror=()=>r(!1),i.src=s,setTimeout(()=>r(!1),2e3)})}async function nn(){let s=_r(),r=s.isAuthenticated();if($("#apiAuthButtons").toggle(!r),$("#apiUserAvatar").toggle(r),["#item_api_projects","#item_api_create_project","#item_api_push","#item_api_pull"].forEach(l=>{let f=$(l),m=f.parent("li");r?(f.removeClass("disabled"),m.removeClass("disabled"),f.css("opacity","1").css("pointer-events","auto")):(f.addClass("disabled"),m.addClass("disabled"),f.css("opacity","0.65").css("pointer-events","none"))}),r)try{let l=await s.getUser();$("#apiUserName").text(l.name),$("#apiUserEmail").text(l.email);let f=$("#apiAvatarImg");await Sl(f,l)}catch(l){console.error("Failed to get user info:",l)}}function Mi(){$("#apiUserMenu").hide(),$(document).off("click.apiMenu")}function za(){$("#apiUserMenu").toggle(),$(document).on("click.apiMenu",function(r){$(r.target).closest("#apiUserAvatar").length||Mi()})}async function qa(){Mi();let s=_r();if(!s.isAuthenticated()){se("Please login first.");return}let r=$("#createApiProjectModal"),i=$("#createApiProjectButton"),l=Ke();l&&$("#createApiProjectTitle").val(ct(l)),r.modal("show"),i.off("click").on("click",async()=>{let f=$("#createApiProjectTitle").val()+"",m=$("#createApiProjectDescription").val()+"",b=$("#createApiProjectPublic").is(":checked");if(!f){se("Please enter a project title.");return}r.modal("hide"),r.one("hidden.bs.modal",async()=>{pe(!0);try{let _=await s.createProject({title:f,description:m||void 0,public:b});pe(!1),et(`Project "${_.title}" created successfully!`),We("api","project","create"),confirm("Would you like to sync your current files to this project?")&&await Ya(_)}catch(_){pe(!1),se("Failed to create project: "+_.message),We("api","project","create_error")}})})}async function Va(){Mi();let s=_r();if(!s.isAuthenticated()){se("Please login first.");return}pe(!0);try{let r=await s.getProjects();if(pe(!1),r.length===0){et("You don't have any projects yet. Create one to get started!");return}Cl(r)}catch(r){pe(!1),se("Failed to load projects: "+r.message)}}function Cl(s){let r='<div class="list-group">';for(let i of s)r+=`<a href="#" class="list-group-item list-group-item-action" data-project-id="${i.id}">
      <h5 class="mb-1">${i.title}</h5>
      <p class="mb-1">${i.description||"No description"}</p>
      <small>${i.public?"Public":"Private"}</small>
    </a>`;r+="</div>",bootbox.dialog({title:"Select a Project",message:r,buttons:{cancel:{label:"Cancel",className:"btn-secondary"}}}),setTimeout(()=>{$(".bootbox .list-group-item").off("click").on("click",function(i){i.preventDefault();let l=$(this).data("project-id"),f=s.find(m=>m.id===l);f&&(bootbox.hideAll(),Ya(f))})},100)}async function Ya(s){pe(!0);try{Wa(s);let i=await _r().pullProjectFiles(s.id),l=$t();console.log("bindToApiProject: Got",Object.keys(i).length,"files:",Object.keys(i));let f=null;for(let[m,b]of Object.entries(i)){if(m.startsWith("bin/")&&(m.endsWith(".rom")||m.endsWith(".prg"))){console.log("bindToApiProject: Skipping compiled binary file",m,"- these are generated from source");continue}console.log("bindToApiProject: Updating file",m,"content type:",typeof b,"length:",typeof b=="string"?b.length:"binary"),await l.updateFileInStore(m,b),l.filedata[m]=b,ve.updateFile(m,b),!f&&!m.startsWith("bin/")&&(m.endsWith(".bas")||m.endsWith(".c")||m.endsWith(".asm")||m.endsWith(".prg"))&&(f=m)}if(Kr(),f&&!l.mainPath)console.log("bindToApiProject: Setting main file to",f),l.setMainFile(f),ve.createOrShow(f);else if(f&&l.mainPath!==f)console.log("bindToApiProject: Updating main file from",l.mainPath,"to",f),l.setMainFile(f),ve.createOrShow(f);else if(Object.keys(i).length>0&&!f){let m=Object.keys(i)[0];l.mainPath||(console.log("bindToApiProject: Setting main file to first file",m),l.setMainFile(m),ve.createOrShow(m))}pe(!1),et(`Synced with project "${s.title}". Files pulled from server.`),We("api","project","bind")}catch(r){pe(!1),se("Failed to sync with project: "+r.message)}}async function Xa(){Mi();let s=_r();if(!s.isAuthenticated()){se("Please login first.");return}if(!rn){se("No project selected. Please create or select a project first.");return}let r=$("#pushApiModal"),i=$("#pushApiButton");r.modal("show"),i.off("click").on("click",async()=>{if(!($("#pushApiCommitMsg").val()+"")){se("Please enter a commit message.");return}r.modal("hide"),r.one("hidden.bs.modal",async()=>{pe(!0),jt(.3);try{let f=$t(),m={},b={};for(let[C,N]of Object.entries(f.filedata))if(N&&!C.startsWith("bin/")){m[C]=N;let oe=Ua(C);oe&&(b[C]=oe)}let _=ot();if(_ instanceof Uint8Array){let N=`bin/${Ke()}.rom`;m[N]=_;let oe=Ua(N);oe&&(b[N]=oe)}jt(.6),await s.pushProjectFiles(rn,m,b),pe(!1),et("Files pushed to server successfully!"),We("api","sync","push")}catch(f){pe(!1),se("Failed to push files: "+f.message),We("api","sync","push_error")}})})}async function Ja(){Mi();let s=_r();if(!s.isAuthenticated()){se("Please login first.");return}if(!rn){se("No project selected. Please create or select a project first.");return}if(!!confirm("Pull from server and replace all local files? Any unsaved changes will be overwritten.")){pe(!0);try{let r=await s.pullProjectFiles(rn);console.log("_pullFromApi: Got",Object.keys(r).length,"files:",Object.keys(r));let i=$t();for(let[l,f]of Object.entries(r)){if(l.startsWith("bin/")&&(l.endsWith(".rom")||l.endsWith(".prg"))){console.log("_pullFromApi: Skipping compiled binary file",l,"- these are generated from source");continue}console.log("_pullFromApi: Updating file",l,"content type:",typeof f,"length:",typeof f=="string"?f.length:"binary"),await i.updateFileInStore(l,f),i.filedata[l]=f,ve.updateFile(l,f)}Kr(),pe(!1),et(`Files pulled from server successfully! (${Object.keys(r).length} files)`),We("api","sync","pull")}catch(r){pe(!1),console.error("_pullFromApi: Error:",r),se("Failed to pull files: "+r.message),We("api","sync","pull_error")}}}var ko=class{constructor(r){this.options=r,this.sampleRate=44100,this.soundData=[],this.tapData=[67,54,52,45,84,65,80,69,45,82,65,87,1,0,0,0,0,0,0,0]}getWAVHeader(){let r=new Uint8Array(44),i=new DataView(r.buffer);return i.setUint32(0,1380533830,!1),i.setUint32(4,44+this.soundData.length,!0),i.setUint32(8,1463899717,!1),i.setUint32(12,1718449184,!1),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,1,!0),i.setUint32(24,this.sampleRate,!0),i.setUint32(28,this.sampleRate*2,!0),i.setUint16(32,1,!0),i.setUint16(34,8,!0),i.setUint32(36,1684108385,!1),i.setUint32(40,this.soundData.length,!0),r}addSilence(r){let i=Math.floor(this.sampleRate*r);for(let f=0;f<i;f++)this.soundData.push(0);let l=at.CLOCK_RATE*r;this.tapData.push(0),this.tapData.push(l&255),this.tapData.push(l>>8&255),this.tapData.push(l>>16&255)}addCycle(r){this.tapData.push(r);let i=Math.floor(this.sampleRate*at.TAP_LENGTH_IN_SECONDS*r);for(let l=0;l<i;l++){let f;this.options.sine_wave?f=-Math.sin(l/i*2*Math.PI):l<i/2?f=-1:f=1,this.options.invert_waveform&&(f=-f),this.soundData.push(Math.round(128+f*127))}}updateTAPHeader(){let r=this.tapData.length-20;this.tapData[16]=r&255,this.tapData[17]=r>>8&255,this.tapData[18]=r>>16&255,this.tapData[19]=r>>24&255}getTAPData(){return this.updateTAPHeader(),new Uint8Array(this.tapData)}getSoundData(){let r=this.getWAVHeader(),i=new Uint8Array(r.length+this.soundData.length);return i.set(r,0),i.set(new Uint8Array(this.soundData),r.length),i}},tt=class{constructor(r,i){this.options=i,this.checksum=0,this.data=new Uint8Array(0),this.filenameData=this.makeFilename(r),this.startAddress=0,this.endAddress=0,this.fileType=tt.FILE_TYPE_NONE,this.waveFile=null}makeFilename(r){let i=[],l=32;r=r.toUpperCase();for(let f=0;f<tt.FILENAME_BUFFER_SIZE;f++)if(r.length<=f)i.push(l);else{let m=r.charCodeAt(f);i.push(m)}return i}setContent(r){this.data=r.data,this.startAddress=r.startAddress,this.endAddress=r.startAddress+r.data.length,this.fileType=r.type}generateSound(r){this.waveFile=r,this.addHeader(!1),this.addHeader(!0),r.addSilence(.1),this.addFile()}addTapCycle(r){this.waveFile.addCycle(r)}addBit(r){r===0?(this.addTapCycle(tt.SHORT_PULSE),this.addTapCycle(tt.MEDIUM_PULSE)):(this.addTapCycle(tt.MEDIUM_PULSE),this.addTapCycle(tt.SHORT_PULSE))}addDataMarker(r){r?(this.addTapCycle(tt.LONG_PULSE),this.addTapCycle(tt.MEDIUM_PULSE)):(this.addTapCycle(tt.LONG_PULSE),this.addTapCycle(tt.SHORT_PULSE))}resetChecksum(){this.checksum=0}addByteFrame(r,i){let l=1;for(let f=0;f<8;f++){let m=(r&1<<f)!=0?1:0;this.addBit(m),l^=m}this.addBit(l),this.addDataMarker(i),this.checksum^=r}addLeader(r){let i;r===tt.LEADER_TYPE_HEADER?i=27136:r===tt.LEADER_TYPE_CONTENT?i=6656:i=79;for(let l=0;l<i;l++)this.addTapCycle(tt.SHORT_PULSE)}addSyncChain(r){let i;r?i=9:i=137;let l=9;for(;l>0;)this.addByteFrame(i,!0),i-=1,l-=1}addData(){for(let r=0;r<this.data.length;r++)this.addByteFrame(this.data[r],!0)}addFilename(){for(let r=0;r<this.filenameData.length;r++)this.addByteFrame(this.filenameData[r],!0)}addHeader(r){r?this.addLeader(tt.LEADER_TYPE_REPEATED):this.addLeader(tt.LEADER_TYPE_HEADER),this.addDataMarker(!0),this.addSyncChain(r),this.resetChecksum(),this.addByteFrame(this.fileType,!0),this.addByteFrame(this.startAddress&255,!0),this.addByteFrame((this.startAddress&65280)>>8,!0),this.addByteFrame(this.endAddress&255,!0),this.addByteFrame((this.endAddress&65280)>>8,!0),this.addFilename();for(let i=0;i<tt.NUMBER_OF_PADDING_BYTES;i++)this.addByteFrame(tt.PADDING_CHARACTER,!0);this.addByteFrame(this.checksum,!1)}addFile(){let r=!1;for(let i=0;i<2;i++)r?this.addLeader(tt.LEADER_TYPE_REPEATED):this.addLeader(tt.LEADER_TYPE_CONTENT),this.addDataMarker(!0),this.addSyncChain(r),this.resetChecksum(),this.addData(),this.addByteFrame(this.checksum,!1),r=!0;this.addLeader(1)}},at=tt;at.CLOCK_RATE=985248,at.TAP_LENGTH_IN_SECONDS=8/tt.CLOCK_RATE,at.FILENAME_BUFFER_SIZE=16,at.FILE_TYPE_NONE=0,at.FILE_TYPE_RELOCATABLE=1,at.FILE_TYPE_SEQUENTIAL=2,at.FILE_TYPE_NON_RELOCATABLE=3,at.LEADER_TYPE_HEADER=0,at.LEADER_TYPE_CONTENT=1,at.LEADER_TYPE_REPEATED=2,at.NUMBER_OF_PADDING_BYTES=171,at.PADDING_CHARACTER=32,at.SHORT_PULSE=48,at.MEDIUM_PULSE=66,at.LONG_PULSE=86;var xr=lo(gl());function Ka(s){return ot()==null?(se("Please fix errors before sharing."),!0):ot()instanceof Uint8Array?(Pl(),Jt("lib/liblzg.js").then(()=>{var r=da(window.Module,Array.from(ot()));window.Module=null;var i=btoa(kn(r)),l={p:ne,r:i},f=$.param(l),m=kl(f,"player.html"),b='<iframe width=640 height=600 src="'+m+'">';$("#embedLinkTextarea").text(m),$("#embedIframeTextarea").text(b),$("#embedLinkModal").modal("show"),$("#embedAdviceWarnAll").hide(),$("#embedAdviceWarnIE").hide(),m.length>=65536?$("#embedAdviceWarnAll").show():m.length>=5120&&$("#embedAdviceWarnIE").show()}),!0):(se("Can't share a Verilog executable yet. (It's not actually a ROM...)"),!0)}function Pl(){console.log("clipboard"),import("./clipboard-2SP4SJIP.js").then(s=>{let r=s.default;new r(".btn")})}function kl(s,r){console.log(s);var i=window.location,l=i.pathname.replace("index.html",""),f=i.host=="8bitworkshop.com"?"https:":i.protocol,m=f+"//"+i.host+l+r+"?"+s;return m}function Rl(s){var i;var r=(i=Ao())==null?void 0:i.code_start;Jt("lib/c2t.js").then(()=>{var l="",f=function(G){l+=G+`
`},m=window.c2t({noInitialRun:!0,print:f,printErr:f}),b=m.FS,_=Ke()+".bin",C=Ke()+".wav";b.writeFile(_,ot(),{encoding:"binary"});var N=["-2bc",_+","+r.toString(16),C];m.callMain(N);var oe=b.readFile(C,{encoding:"binary"});if(oe){var Se=new Blob([oe],{type:"audio/wav"});(0,xr.saveAs)(Se,C),l+="Then connect your audio output to the cassette input, turn up the volume, and play the audio file.",et(l)}})}function Dl(s){Jt("lib/makewav.js").then(()=>{let r="",i=function(_){r+=_+`
`};var l=ct(Ke());let f=l+".bin",m=l+".wav";window.makewav({noInitialRun:!1,print:i,printErr:i,arguments:["-ts","-f0","-v10",f],preRun:_=>{_.FS.writeFile(f,ot(),{encoding:"binary"})}}).ready.then(_=>{let C=[f];_.run(C),console.log(r);let oe=_.FS.readFile(m,{encoding:"binary"});if(oe){let Se=new Blob([oe],{type:"audio/wav"});(0,xr.saveAs)(Se,m),r+=`
Connect your audio output to the SuperCharger input, turn up the volume, and play the audio file.`,et(r)}})})}function Ll(s){var r=ct(Ke());let i=r+".tap",l=new at(r),f=new ko({sine_wave:!0}),m=ot(),b=m[0]+m[1]*256;m=m.slice(2),l.setContent({data:m,startAddress:b,type:at.FILE_TYPE_NON_RELOCATABLE}),l.generateSound(f);let _=f.getTAPData();if(_){let C=new Blob([_],{type:"application/octet-stream"});(0,xr.saveAs)(C,i)}}function Ro(){switch(Rt(ne)){case"vcs":return Dl;case"apple2":return Rl;case"c64":return Ll}}function Qa(s){if(ot()==null)return se("Please fix errors before exporting."),!0;var r=Ro();if(r===void 0)return se("Cassette export is not supported on this platform."),!0;r(s)}function Do(s){if(console.log("_downloadROMImage called, platform:",ne),console.log("getCurrentOutput():",ot()),console.log("platform.getDownloadFile exists:",!!D.getDownloadFile),ot()==null)return se("Please finish compiling with no errors before downloading ROM."),!0;var r=ct(Ke());if(D.getDownloadFile){var i=D.getDownloadFile();if(console.log("platform.getDownloadFile() returned:",i),i){var r=ct(Ke());console.log("Downloading file:",r+i.extension),(0,xr.saveAs)(i.blob,r+i.extension),We("download","rom",ne)}else console.log("getDownloadFile() returned null/undefined"),se("No downloadable file available. Make sure you have compiled a program.")}else if(ot()instanceof Uint8Array){var l=new Blob([ot()],{type:"application/octet-stream"}),f=D.getROMExtension&&D.getROMExtension(ot())||"-"+Rt(ne)+".bin";console.log("Using fallback download, suffix:",f),(0,xr.saveAs)(l,r+f),We("download","rom",ne)}else se(`The "${ne}" platform doesn't have downloadable ROMs.`)}function Za(s){var r=ve.getCurrentText();if(!r)return!1;var i=new Blob([r],{type:"text/plain;charset=utf-8"});(0,xr.saveAs)(i,Fo(),{autoBom:!1}),We("download","source",ne)}async function es(){let s=(await import("./jszip.min-QZ4ZBVAS.js")).default;return new s}async function ts(s){var r=await es();$t().iterateFiles((i,l)=>{l&&r.file(kt(i),l)}),r.generateAsync({type:"blob"}).then(i=>{(0,xr.saveAs)(i,Ke()+"-"+Rt(ne)+".zip"),We("download","zip",ne)})}function rs(s){let r=D.getDebugSymbolFile&&D.getDebugSymbolFile();if(!r){se("This project does not have debug information.");return}var i=ct(Ke());(0,xr.saveAs)(r.blob,i+r.extension,{autoBom:!1})}async function is(s){var r=await es(),i=await Or().keys();pe(!0);try{var l=0;await Promise.all(i.map(m=>Or().getItem(m).then(b=>{jt(l++/(i.length+1)),b&&r.file(m,b)})));var f=await r.generateAsync({type:"blob"});(0,xr.saveAs)(f,Rt(ne)+"-all.zip")}finally{pe(!1)}}var Lo=!1;function Fl(){var s=document.getElementById("canvas");if(s)return s;var r=document.getElementById("c64-chips-screen");if(r){var i=r.querySelector("canvas");if(i)return i}var l=document.getElementById("vic20-chips-screen");if(l){var f=l.querySelector("canvas");if(f)return f}var m=document.getElementById("javatari-screen");if(m){var b=m.querySelector("canvas");if(b)return b}var _=document.getElementById("emuscreen");if(_){var C=_.querySelector("canvas");if(C)return C}var N=$("#emulator").find("canvas")[0];return N||null}function ns(){Lo||Jt("lib/gif.js").then(()=>{var s=Fl();if(!s){se("Could not find canvas element to record video! Video recording is not supported for iframe-based emulators (e.g., BBC Micro).");return}var r=0;s.style&&s.style.transform&&(s.style.transform.indexOf("rotate(-90deg)")>=0?r=-1:s.style.transform.indexOf("rotate(90deg)")>=0&&(r=1));var i=new GIF({workerScript:"lib/gif.worker.js",workers:4,quality:10,rotate:r}),l=$("#videoPreviewImage");i.on("progress",C=>{jt(C)}),i.on("finished",C=>{l.attr("src",URL.createObjectURL(C)),pe(!1),D.resume(),$("#videoPreviewModal").modal("show")});var f=20,m=300,b=0;console.log("Recording video",s),$("#emulator").css("backgroundColor","#cc3333");var _=()=>{b++>m?(console.log("Rendering video"),$("#emulator").css("backgroundColor","inherit"),pe(!0),D.pause(),i.render(),Lo=!1):(i.addFrame(s,{delay:f,copy:!0}),setTimeout(_,f),Lo=!0)};_()})}var ru=ml(),_i=ws(),te=co(window.location.search||"?"),ne,Qt,qe,D,me,ve,xi=null,Ho=!1,Ir,jn,Bo,cn=$("#controls_top"),Ge,It,Go,Ei,$n,Gt,Ut=!0,_s="retrogamecoders_auto_compile";function iu(){let s=yi(_s);return s!==null?s==="true":!0}function nu(s){Yi(_s,s.toString(),365)}var fn=Fi(te.electron),Ot=Fi(te.embed),dn,pn,Un=!1,Ni=!1,Wn=null,xs=null,zo=!1,Es="c.PC == 0x6000";function Or(){return Gt}function $t(){return me}function ot(){return Ei}function Ao(){return jn}var ou={dasm:"6502",acme:"6502",cc65:"text/x-csrc",ca65:"6502",nesasm:"6502",z80asm:"z80",sdasz80:"z80",sdcc:"text/x-csrc",verilator:"verilog",jsasm:"z80",zmac:"z80",bataribasic:"bataribasic",markdown:"markdown",js:"javascript",xasm6809:"z80",cmoc:"text/x-csrc",yasm:"gas",smlrc:"text/x-csrc",inform6:"inform6",fastbasic:"fastbasic",basic:"basic",c64basic:"c64basic",silice:"verilog",wiz:"text/x-wiz",none:"text/x-csrc",vasmarm:"vasm",armips:"vasm",ecs:"ecs","remote:llvm-mos":"text/x-csrc",cc7800:"text/x-csrc",armtcc:"text/x-csrc",oscar64:"text/x-csrc",bbcbasic:"basic"},au={dasm:"https://raw.githubusercontent.com/sehugg/dasm/master/doc/dasm.txt",cc65:"https://cc65.github.io/doc/cc65.html",ca65:"https://cc65.github.io/doc/ca65.html",sdcc:"http://sdcc.sourceforge.net/doc/sdccman.pdf",verilator:"https://www.veripool.org/ftp/verilator_doc.pdf",fastbasic:"https://github.com/dmsc/fastbasic/blob/master/manual.md",bataribasic:"help/bataribasic/manual.html",wiz:"https://github.com/wiz-lang/wiz/blob/master/readme.md#wiz",silice:"https://github.com/sylefeb/Silice",zmac:"https://raw.githubusercontent.com/sehugg/zmac/master/doc.txt",cmoc:"http://perso.b2b2c.ca/~sarrazip/dev/cmoc.html","remote:llvm-mos":"https://llvm-mos.org/wiki/Welcome",acme:"https://raw.githubusercontent.com/sehugg/acme/main/docs/QuickRef.txt"};function su(){return new Worker(`./gen/worker/bundle.js?t=${Date.now()}`)}var cr=function(){try{let r="__some_random_key_you_are_not_going_to_use__";localStorage.setItem(r,r);var s=localStorage.getItem(r)==r;return localStorage.removeItem(r),s}catch(r){return!1}}(),Ts=class{setLastPreset(r){cr&&!Ot&&(qe&&ne&&!fn?localStorage.setItem("__lastrepo_"+ne,qe):localStorage.removeItem("__lastrepo_"+ne),localStorage.setItem("__lastplatform",ne),localStorage.setItem("__lastid_"+Qt,r))}unsetLastPreset(){cr&&!Ot&&(delete te.file,localStorage.removeItem("__lastid_"+Qt))}getLastPreset(){return cr&&!Ot&&localStorage.getItem("__lastid_"+Qt)}getLastPlatformID(){return cr&&!Ot&&localStorage.getItem("__lastplatform")}getLastRepoID(r){return cr&&!Ot&&r&&localStorage.getItem("__lastrepo_"+r)}shouldCompleteTour(){return!1}completedTour(){cr&&!Ot&&localStorage.setItem("8bitworkshop.hello","true")}},Ti=new Ts;function qo(s,r){navigator.storage&&navigator.storage.persist&&navigator.storage.persist().then(i=>{console.log("requestPersistPermission =",i),i&&s&&!r&&et("Your browser says it will persist your local file edits, but you may want to back up your work anyway.")})}function lu(){return $n?$n.title||$n.name||me.mainPath||"ROM":me.mainPath||"ROM"}async function uu(){var s=new go(ne);return fn?(console.log("using electron with local filesystem",alternateLocalFilesystem),new Xi(s,alternateLocalFilesystem)):te.localfs!=null?new Xi(s,await wu(te.localfs)):new Xi(s,new vo(Gt))}async function cu(){var s=await uu(),r=su();me=new yo(r,ne,D,s),me.remoteTool=te.tool||null,ve=new wo($("#workspace")[0],me),me.callbackBuildResult=i=>{Cu(i)},me.callbackBuildStatus=i=>{fu(i)},window.worker=r}function fu(s){s?cn.addClass("is-busy"):cn.removeClass("is-busy"),$("#compile_spinner").css("visibility",s?"visible":"hidden")}function Vo(s,r){var i=document.createElement("li"),l=document.createElement("a");return l.setAttribute("class","dropdown-item"),l.setAttribute("href","#"),l.setAttribute("data-wndid",s),s==ve.getActiveID()&&$(l).addClass("dropdown-item-checked"),l.appendChild(document.createTextNode(r)),i.appendChild(l),{li:i,a:l}}function Kr(){var s=$("#windowMenuList").empty(),r=!1;function i(C,N,oe){r&&(s.append(document.createElement("hr")),r=!1);let{li:Se,a:G}=Vo(C,N);if(s.append(Se),oe){var z=(Z,Ee)=>{s.find("a").removeClass("dropdown-item-checked"),$(G).addClass("dropdown-item-checked")};ve.setCreateFunc(C,oe),ve.setShowFunc(C,z),$(G).click(Z=>{ve.createOrShow(C),Wn=C})}}function l(C){var N=D.getToolForFilename(C);N=="dasm"&&C.endsWith(".h")&&Ke().endsWith(".c")&&(N="cc65");var oe=N&&ou[N];return new Zi(C,oe)}function f(C){i(C,kt(C),()=>{var N=me.getFile(C);if(typeof N=="string")return l(C);if(N instanceof Uint8Array)return new So(C,N)})}f(me.mainPath),me.iterateFiles((C,N)=>{N&&C!=me.mainPath&&f(C)}),r=!0;var m=me.getListings();if(m)for(var b in m){var _=m[b];(_.assemblyfile&&_.assemblyfile.text||_.sourcefile&&_.sourcefile.text||_.text)&&i(b,kt(b),C=>new To(C))}r=!0}function du(s,r){if(r){var i=te.highlight.split(","),l=parseInt(i[0])-1,f=parseInt(i[1])-1,m=ve.createOrShow(s);m.highlightLines(l,f)}}function Ss(s){Kr(),ve.createOrShow(s),me.setMainFile(s),du(s,te.highlight)}async function pu(s){me.mainPath=s,Ti.setLastPreset(s);var r=await me.loadFiles([s]);if(r&&r.length)Ss(s);else{var i=await hu(s);me.filedata[s]=i||`
`,Ss(s),te.newfile?qo(!0,!0):et('Could not find file "'+s+'". Loading default file.'),delete te.newfile,vn()}}function Yo(s){if(s=="/")te={repo:"/"};else if(s.indexOf("://")>=0){var r=Ki(s);r&&(te={repo:r.repopath})}else te.platform=ne,te.file=s;Jr()}async function hu(s){var r=D.getToolForFilename(s);try{return await $.get("presets/"+Rt(ne)+"/skeleton."+r,"text")}catch(i){se("Could not load skeleton for "+ne+"/"+r+"; using blank file")}}function Xo(s){return s.indexOf(" ")>=0?(se("No spaces in filenames, please."),!1):!0}function Hn(){setTimeout(()=>{let s=document.querySelector(".bootbox.modal");s&&(s.removeAttribute("aria-hidden"),s.setAttribute("aria-hidden","false"),console.log("Fixed modal aria-hidden attribute"))},100)}function mu(s){return bootbox.prompt({title:"Enter the name of your new main source file.",placeholder:"newfile"+D.getDefaultExtension(),callback:r=>{if(r&&r.trim().length>0){if(!Xo(r))return;r.indexOf(".")<0&&(r+=D.getDefaultExtension());var i=r;We("workspace","file","new"),te.newfile="1",Yo(i)}}}),Hn(),!0}function gu(s){let r=$('<input type="file" multiple accept="*" style="display:none">'),i=r[0];r.change(l=>{vu(i.files)}),r.click()}function vu(s){console.log(s);var r=0;function i(){var l=s[r++];if(!l)console.log("Done uploading",r),r>2?(et("Files uploaded."),setTimeout(hn,1e3)):(te.file=s[0].name,bootbox.confirm({message:"Open '"+_i.sanitize(te.file)+"' as main project file?",buttons:{confirm:{label:"Open As New Project"},cancel:{label:"Include/Link With Project Later"}},callback:b=>{b?Jr():setTimeout(hn,1e3)}})),We("workspace","file","upload");else{var f=l.name,m=new FileReader;m.onload=function(b){var _=b.target.result,C=new Uint8Array(_);gi(f,C)||(C=qi(C).replace(`\r
`,`
`)),ve.updateFile(f,C),console.log("Uploaded "+f+" "+C.length+" bytes"),i()},m.readAsArrayBuffer(l)}}s&&i()}async function yu(s){var r=window.showDirectoryPicker;r||se("This browser can't open local files on your computer, yet. Try Chrome.");var i=await r(),l=i.name,f="__localfs__"+l,m={handle:i},b=Wo.createInstance({name:f,version:2});await b.setItem(f,m),te={localfs:l},Jr(!0)}async function bu(s){return new Promise((r,i)=>{bootbox.prompt(_i.sanitize(s),l=>{r(l)})}).then(r=>(Hn(),r))}async function wu(s){let r={mode:"readwrite"};var i="__localfs__"+s,l=Wo.createInstance({name:i,version:2}),f=await l.getItem(i),m=f.handle;console.log(f,m);var b=await m.queryPermission(r);if(console.log(b),b!=="granted"&&(await bu("Request permissions to access filesystem?"),b=await m.requestPermission(r)),b!=="granted"){se("Could not get permission to access filesystem.");return}return{getFileData:async _=>{console.log("getFileData",_);let C=await m.getFileHandle(_,{create:!1});console.log("getFileData",C);let N=await C.getFile();console.log("getFileData",N);let oe=await(gi(_)?N.binary():N.text());return console.log(C,N,oe),oe},setFileData:async(_,C)=>{}}}function Ke(){return kt(me.mainPath)}function Fo(){return kt(ve.getActiveID())}function _u(s){var r=ve.getActive();if(r&&r.setText){var i=ve.getActiveID();$.get("presets/"+Rt(ne)+"/"+i,l=>{bootbox.confirm("Reset '"+_i.sanitize(i)+"' to default?",f=>{f&&r.setText(l)})},"text").fail(()=>{qe?se("Can only revert built-in examples. If you want to revert all files, You can pull from the repository."):se("Can only revert built-in examples.")})}else se("Cannot revert the active window. Please choose a text file.")}function xu(s){var r=ve.getActive();if(r&&r.getPath){var i=ve.getActiveID();bootbox.confirm("Delete '"+_i.sanitize(i)+"'?",l=>{l&&Gt.removeItem(i).then(()=>{te.file==i?(Ti.unsetLastPreset(),Jr()):(hn(),et("Deleted "+i))})})}else se("Cannot delete the active window.")}function Eu(s){var r=ve.getActive();if(r&&r.getPath&&me.getFile(r.getPath())){var i=ve.getActiveID();bootbox.prompt({title:"Rename '"+_i.sanitize(i)+"' to?",value:i,callback:l=>{var f=me.getFile(r.getPath());if(l&&l!=i&&f){if(!Xo(l))return;Gt.removeItem(i).then(()=>Gt.setItem(l,f)).then(()=>{hn(),alert("Renamed "+i+" to "+l),i==me.mainPath&&Yo(l)})}}}),Hn()}else se("Cannot rename the active window.")}function Tu(s){let r={},i,l=D.getPresets?D.getPresets():[];for(var f=0;f<l.length;f++){var m=l[f],b=m.chapter?m.chapter+". "+m.name:m.name,_=m.id==me.mainPath;m.category?i=$("<optgroup />").attr("label","Examples: "+m.category).appendTo(s):i||(i=$("<optgroup />").attr("label","Examples").appendTo(s)),i.append($("<option />").val(m.id).text(b).attr("selected",_?"selected":null)),_&&($n=m),r[m.id]=b}return r}function Su(s){if(cr&&!fn){var r=0,i=Oi();if(i){let f=$("<optgroup />").attr("label","Repositories").appendTo(s);for(let m in i){var l=i[m];l.platform_id&&Rt(l.platform_id)==Rt(ne)&&f.append($("<option />").val(l.url).text(l.url.substring(l.url.indexOf("/"))))}}}}async function As(s,r,i,l){let f=await Gt.keys();f||(f=[]);let m;for(var b=0;b<f.length;b++){let _=f[b];if(_.startsWith(i)&&!l[_]){m||(m=$("<optgroup />").attr("label",r).appendTo(s));let C=_.substring(i.length);m.append($("<option />").val(_).text(C).attr("selected",_==me.mainPath?"selected":null))}}}function Cs(s){s.css("visibility","visible");var r=me.mainPath;s.val()!=r&&s.append($("<option />").val(r).text(r).attr("selected","selected"))}async function hn(){var s=$("#preset_select").empty();if(qe)s.append($("<option />").val("/").text("Leave Repository")),$("#repo_name").text(kt(qe)+"/").show(),await As(s,qe,"",{}),Cs(s);else{Su(s);var r=Tu(s);await As(s,"Local Files","",r),Cs(s)}s.off("change").change(function(i){Yo($(this).val().toString())})}function Au(s){var r=$("<p/>");if(s.path!=null){var i=s.line?s.label?`(${s.path} @ ${s.label})`:`(${s.path}:${s.line})`:`(${s.path})`,l=$("<a/>").text(i),f=s.path;f==Ke()&&(f=me.mainPath),ve.isWindow(f)&&l.click(m=>{var b=ve.createOrShow(f);b instanceof Zi&&b.setCurrentLine(s,!0)}),r.append(l),r.append("&nbsp;")}return r.append($("<span/>").text(s.msg)),r}function Ps(){$("#error_alert").hide(),zo=!1}function Jo(s,r){var i=$("#error_alert_msg").empty();for(var l of s.slice(0,10))i.append(Au(l));$("#error_alert").show(),zo=r,$("#error_alert").attr("tabindex","-1"),$("#error_alert").css("outline","none"),setTimeout(()=>{let f=document.querySelector(".CodeMirror textarea");f&&f.focus()},100)}function ks(s,r){if(r!=null){var i={msg:r,line:0};s instanceof po&&s.$loc&&(i=Object.create(s.$loc),i.msg=r,console.log(i)),Jo([i],!0)}}async function Cu(s){if("errors"in s&&s.errors.length>0)cn.addClass("has-errors"),ve.setErrors(s.errors),Kr(),Jo(s.errors,!1),We("compile","error",ne,s.errors.length.toString());else{if(cn.removeClass("has-errors"),ve.setErrors(null),Ps(),s==null||"unchanged"in s&&s.unchanged||!("output"in s))return;D.debugSymbols=new ha(s.symbolmap,s.debuginfo),jn=s.params;var r=s.output;if(r!=null)try{ji(),Os(),await D.loadROM(lu(),r),Ei=r,Go||Mr(),vc(),We("compile","success",ne,r.length.toString())}catch(i){console.log(i),cn.addClass("has-errors"),ks(i,i+""),Ei=null,Kr();return}Kr(),ve.refresh(!1)}}async function Pu(){if(D.loadBIOS){var s=ne+".rom",r=await Gt.getItem(s);r instanceof Uint8Array?(console.log("loading BIOS",s,r.length+" bytes"),D.loadBIOS(s,r)):console.log("BIOS file must be binary",s)}}function Rs(){var s=$("#mem_info");s.hide(),dn=null}function mn(s){if(!!ma(D)){var r=$("#mem_info"),i=$("#mem_info_msg"),l=D.getDebugCategories();l&&!pn&&(pn=l[0]);var f=s&&D.getDebugInfo(pn,s);if(typeof f=="string"){var m=dn?fa(dn,f):f;r.show(),i.html(m);var b=$('<div class="mem_info_links">'),_=N=>{var oe=$("<a>"+N+"</a>");N==pn&&oe.addClass("selected"),oe.click(Se=>{pn=N,dn=null,mn(Ir)}),b.append(oe),b.append("<span> </span>")};for(var C of l)_(C);i.append("<br>"),i.append(b),dn=f}else Rs()}}function Bn(s,r){$("#debug_bar, #run_bar").find("button").removeClass("btn_active").removeClass("btn_stopped"),$("#dbg_"+s).addClass("btn_"+r)}function Ko(){return D&&Ei!=null}function fr(){return Ko()?!0:(se("Can't do this until build successfully completes."),!1)}function ku(s){if(Wn&&Wn.startsWith("#")||["toline","restart","tovsync","stepover"].includes(xs)||!D.disassemble)return;let r=me.getListings(),i="#disasm",l=256;if(r){let f=s.c?s.c.EPC||s.c.PC:0;for(let m in r){let b=r[m],_=b.assemblyfile||b.sourcefile,C=me.filename2path[m]||m;if(_==b.sourcefile&&(C=ve.findWindowWithFilePrefix(m)),ve.isWindow(C)){let N=_&&_.findLineForOffset(f,Ln);if(N){let oe=_.lines[N.line+1];if(!oe||f<oe.offset){let Se=f-N.offset;Se<l&&(i=C,l=Se)}}}}}ve.createOrShow(i,!0)}function Gn(s){Ir=s,mn(s),ku(s),ve.refresh(!0),Un=!0}function Ds(s){D.setupDebug&&(D.setupDebug((r,i)=>{Gn(r),Bn(s||"pause","stopped"),i&&Jo([{msg:"STOPPED: "+i,line:0}],!0)}),xs=s)}function wr(s){!fr()||(Zo(),Ds(s),s&&Bn(s,"active"))}function Qr(){D&&D.isRunning()&&(D.pause(),console.log("Paused")),Bn("pause","stopped")}function Ru(){!fr()||(ji(),Qr(),Go=!0)}function Mr(){D.isRunning()||(D.resume(),console.log("Resumed")),Bn("go","active"),zo&&Ps()}function Ls(){!fr()||(ji(),D.isRunning()||ve.refresh(!1),Mr(),Go=!1,Wn=null)}function Du(){!fr()||(wr("step"),D.step())}function Lu(){!fr()||(wr("stepover"),D.stepOver())}function Fu(){!fr()||(wr("tovsync"),D.runToVsync())}function Fs(){var s=ve.getActive();return s&&s.getCursorPC&&s.getCursorPC()}function en(s){!fr()||!(s>=0)||(wr("toline"),console.log("Run to",s.toString(16)),D.runToPC?D.runToPC(s):D.runEval(r=>r.PC==s))}function Iu(){D.restartAtPC(Fs())?Ls():se("Could not restart program at selected line.")}function Ou(){en(Fs())}function Mu(){!fr()||(wr("stepout"),D.runUntilReturn())}function Nu(){!fr()||(wr("stepback"),D.stepBack())}function ji(){Ir=null,D.clearDebug&&D.clearDebug(),Ds(),mn()}function Qo(){D.reset(),Os()}function ju(){!fr()||(ji(),Qo(),Mr())}function $u(){if(!!fr()){var s=Ni;Zo(),D.setupDebug&&D.runEval?(ji(),Mr(),Qo(),wr("restart"),D.runEval(r=>!0)):(Qo(),Mr()),s&&Ms()}}function Uu(){var s=$("#debugExprModal"),r=$("#debugExprSubmit");$("#debugExprInput").val(Es),$("#debugExprExamples").text(Wu()),s.modal("show"),r.off("click").on("click",()=>{var i=$("#debugExprInput").val()+"";s.modal("hide"),Hu(i)})}function Wu(){var s=D.saveState&&D.saveState(),r=s.c;console.log(r,s);var i="";return r.PC&&(i+="c.PC == 0x"+br(r.PC)+`
`),r.SP&&(i+="c.SP < 0x"+br(r.SP)+`
`),r.HL&&(i+=`c.HL == 0x4000
`),D.readAddress&&(i+=`this.readAddress(0x1234) == 0x0
`),D.readVRAMAddress&&(i+=`this.readVRAMAddress(0x1234) != 0x80
`),D.getRasterScanline&&(i+=`this.getRasterScanline() > 222
`),i}function Hu(s){var r=new Function("c","return ("+s+");").bind(D);wr(),D.runEval(r),Es=s}function Is(){D.isRunning()?(ve.tick(),Un=!1):Un||(ve.tick(),Un=!0),setTimeout(Is,100)}function gn(s){D.setFrameRate(s),s>.01?$("#fps_label").text(s.toFixed(2)):$("#fps_label").text("1/"+Math.round(1/s))}function Bu(){var s=D.getFrameRate();s=s/2,s>1e-5&&gn(s)}function Gu(){var s=D.getFrameRate();s=Math.min(60,s*2),gn(s)}function zu(){gn(60/65536)}function qu(){Mr(),gn(60)}function Vu(){ve.refresh(!1);var s=ve.getActive();if(s.getSourceFile&&s.setTimingResult){var r=D.newCodeAnalyzer();r.showLoopTimingForPC(0),s.setTimingResult(r)}}function Zo(){Ni&&(D.setRecorder(null),$("#dbg_record").removeClass("btn_recording"),$("#replaydiv").hide(),Rs(),Ni=!1)}function Os(){Ni&&It.reset()}function Ms(){It.reset(),D.setRecorder(It),$("#dbg_record").addClass("btn_recording"),$("#replaydiv").show(),Ni=!0}function Yu(){Ni?Zo():Ms()}function Nr(s,r,i){var l=ve.getActive();l&&l.insertText?(bootbox.prompt({title:"Add "+_i.sanitize(s)+" File to Project",value:"filename"+_i.sanitize(r),callback:f=>{if(f&&f.trim().length>0){if(!Xo(f))return;var m=f,b=`
`+i(f)+`
`;me.loadFiles([m]).then(_=>{_&&_.length?se(f+" already exists; including anyway"):me.updateFile(m,`
`),l.insertText(b),Kr()})}}}),Hn()):se("Can't insert text in this window -- switch back to main file")}function Xu(){var s=Ke(),r=D.getToolForFilename(s);s.endsWith(".c")||r=="sdcc"||r=="cc65"||r=="cmoc"||r=="smlrc"?Nr("Header",".h",i=>'#include "'+i+'"'):r=="dasm"||r=="zmac"?Nr("Include",".inc",i=>'	include "'+i+'"'):r=="ca65"||r=="sdasz80"||r=="vasm"||r=="armips"?Nr("Include",".inc",i=>'	.include "'+i+'"'):r=="verilator"?Nr("Verilog",".v",i=>'`include "'+i+'"'):r=="wiz"?Nr("Include",".wiz",i=>'import "'+i+'";'):r=="ecs"?Nr("Include",".ecs",i=>'import "'+i+'"'):r=="acme"?Nr("Include",".acme",i=>'!src "'+i+'"'):se("Can't add include file to this project type ("+r+")")}function Ju(){var s=Ke(),r=D.getToolForFilename(s);s.endsWith(".c")||r=="sdcc"||r=="cc65"||r=="cmoc"||r=="smlrc"?Nr("Linked C (or .s)",".c",i=>'//#link "'+i+'"'):s.endsWith("asm")||s.endsWith(".s")||r=="ca65"||r=="lwasm"?Nr("Linked ASM",".inc",i=>';#link "'+i+'"'):se("Can't add linked file to this project type ("+r+")")}function Ns(){Ut=!Ut,nu(Ut),window.autoCompileEnabled=Ut,js(),console.log("Auto-compile",Ut?"enabled":"disabled")}function Ku(){me&&me.mainPath&&(console.log("Manual build and run triggered"),window.isManualCompilation=!0,me.sendBuild(),setTimeout(()=>{window.isManualCompilation=!1},1e3))}function js(){let s=document.getElementById("auto_compile_checkbox"),r=document.getElementById("auto_compile_toggle"),i=document.getElementById("manual_build_btn"),l=document.getElementById("auto_compile_status");s&&(s.checked=!!Ut),r&&r.setAttribute("title",Ut?"Auto-Compile Enabled (Ctrl+Alt+C)":"Auto-Compile Disabled (Ctrl+Alt+C)"),l&&(Ut?(l.textContent="Auto-Compile: ON",l.style.color="#5cb85c"):(l.textContent="Auto-Compile: OFF",l.style.color="#b0b0b0")),i&&(Ut?i.style.display="none":i.style.display="inline-block")}function Qu(){Ge=new ga($("#toolbar")[0],null),Ge.grp.prop("id","run_bar"),Ge.add("ctrl+alt+r","Reset","glyphicon-refresh",ju).prop("id","dbg_reset"),Ge.add("ctrl+alt+,","Pause","glyphicon-pause",Ru).prop("id","dbg_pause"),Ge.add("ctrl+alt+.","Resume","glyphicon-play",Ls).prop("id","dbg_go"),D.restartAtPC&&Ge.add("ctrl+alt+/","Restart at Cursor","glyphicon-play-circle",Iu).prop("id","dbg_restartatline"),Ge.newGroup(),Ge.grp.prop("id","compile_bar"),Ge.add("ctrl+alt+c","Toggle Auto-Compile",null,Ns);let s=$('<span id="auto_compile_toggle" class="auto-compile-switch" />').appendTo(Ge.grp),r=$('<label class="switch" />').appendTo(s),i=$('<input type="checkbox" id="auto_compile_checkbox" />').appendTo(r),l=$('<span class="slider round"></span>').appendTo(r);if(i.on("change",()=>{Ns()}),$('<span class="auto-compile-status">Auto-Compile: ON</span>').appendTo(Ge.grp).prop("id","auto_compile_status"),Ge.add("ctrl+alt+m","Build and Run","glyphicon-play",Ku).prop("id","manual_build_btn"),Ge.newGroup(),Ge.grp.prop("id","debug_bar"),D.runEval&&Ge.add("ctrl+alt+e","Reset and Debug","glyphicon-fast-backward",$u).prop("id","dbg_restart"),D.stepBack&&Ge.add("ctrl+alt+b","Step Backwards","glyphicon-step-backward",Nu).prop("id","dbg_stepback"),D.step&&Ge.add("ctrl+alt+s","Single Step","glyphicon-step-forward",Du).prop("id","dbg_step"),D.stepOver&&Ge.add("ctrl+alt+t","Step Over","glyphicon-hand-right",Lu).prop("id","dbg_stepover"),D.runUntilReturn&&Ge.add("ctrl+alt+o","Step Out of Subroutine","glyphicon-hand-up",Mu).prop("id","dbg_stepout"),D.runToVsync&&Ge.add("ctrl+alt+n","Next Frame/Interrupt","glyphicon-forward",Fu).prop("id","dbg_tovsync"),(D.runEval||D.runToPC)&&!ne.startsWith("verilog")&&Ge.add("ctrl+alt+l","Run To Line","glyphicon-save",Ou).prop("id","dbg_toline"),Ge.newGroup(),Ge.grp.prop("id","xtra_bar"),js(),$(".dropdown-menu").collapse({toggle:!1}),$("#item_new_file").click(mu),$("#item_upload_file").click(gu),$("#item_open_directory").click(yu),$("#item_github_login").click(Da),$("#item_github_logout").click(La),$("#item_github_import").click(Fa),$("#item_github_publish").click(Ia),$("#item_github_push").click(Oa),$("#item_github_pull").click(Ma),$("#item_repo_delete").click(ja),$("#apiLoginButton").click(Ba),$("#apiRegisterButton").click(Ha),$("#apiUserAvatar").click(_=>{_.stopPropagation(),za()}),$("#item_api_logout").click(_=>{_.preventDefault(),Ga()}),$("#item_api_projects").click(_=>{_.preventDefault(),!$(_.target).hasClass("disabled")&&Va()}),$("#item_api_create_project").click(_=>{_.preventDefault(),!$(_.target).hasClass("disabled")&&qa()}),$("#item_api_push").click(_=>{_.preventDefault(),!$(_.target).hasClass("disabled")&&Xa()}),$("#item_api_pull").click(_=>{_.preventDefault(),!$(_.target).hasClass("disabled")&&Ja()}),$("#item_share_file").click(Ka),$("#item_reset_file").click(_u),$("#item_rename_file").click(Eu),$("#item_delete_file").click(xu),D.runEval?$("#item_debug_expr").click(Uu).show():$("#item_debug_expr").hide(),$("#item_download_rom").click(Do),$("#item_download_file").click(Za),$("#item_download_zip").click(ts),D.getDebugSymbolFile?$("#item_download_sym").click(rs):$("#item_download_sym").hide(),$("#item_download_allzip").click(is),$("#item_record_video").click(ns),Ro()?$("#item_export_cassette").click(Qa):$("#item_export_cassette").hide(),D.setFrameRate&&D.getFrameRate&&($("#dbg_slower").click(Bu),$("#dbg_faster").click(Gu),$("#dbg_slowest").click(zu),$("#dbg_fastest").click(qu)),$("#item_addfile_include").click(Xu),$("#item_addfile_link").click(Ju),$("#item_request_persist").click(()=>qo(!0,!1)),Is(),D.newCodeAnalyzer&&Ge.add(null,"Analyze CPU Timing","glyphicon-time",Vu),D.setRecorder&&D.advance&&Zu(),D.showHelp){let{li:_,a:C}=Vo("help__"+ne,Bo+" Help");$("#help_menu").append(_),$(C).click(()=>window.open(D.showHelp(),"_8bws_help"))}let m=D.getToolForFilename(Ke()),b=au[m];if(b){let{li:_,a:C}=Vo("help__"+m,m+" Help");$("#help_menu").append(_),$(C).click(()=>window.open(b,"_8bws_help"))}}function Zu(){var s=$("#replayslider"),r=$("#clockslider"),i=$("#replay_frame"),l=$("#replay_clock");D.advanceFrameClock||$("#clockdiv").hide();var f=()=>{i.text(It.lastSeekFrame+""),l.text(It.lastSeekStep+"")},m=C=>{Qr();var N=parseInt(s.val().toString()),oe=parseInt(r.val().toString());It.loadFrame(N,oe)>=0&&(r.attr("min",0),r.attr("max",It.lastStepCount),f(),Gn(D.saveState()))},b=C=>{Qr(),It.loadFrame(C)>=0&&(s.val(C),f(),Gn(D.saveState()))},_=C=>{Qr();var N=parseInt(s.val().toString());It.loadFrame(N,C)>=0&&(r.val(C),f(),Gn(D.saveState()))};It.callbackStateChanged=()=>{s.attr("min",0),s.attr("max",It.numFrames()),s.val(It.currentFrame()),r.val(It.currentStep()),f(),mn(D.saveState())},s.on("input",m),r.on("input",m),$("#replay_min").click(()=>{b(1)}),$("#replay_max").click(()=>{b(It.numFrames())}),$("#replay_back").click(()=>{b(parseInt(s.val().toString())-1)}),$("#replay_fwd").click(()=>{b(parseInt(s.val().toString())+1)}),$("#clock_back").click(()=>{_(parseInt(r.val().toString())-1)}),$("#clock_fwd").click(()=>{_(parseInt(r.val().toString())+1)}),$("#replay_bar").show(),Ge.add("ctrl+alt+0","Start/Stop Replay Recording","glyphicon-record",Yu).prop("id","dbg_record")}function ec(){try{var s=window.screen.orientation||window.screen.msOrientation||window.screen.mozOrientation||null;if(s){if(s.type.indexOf("landscape")!==-1)return!0;if(s.type.indexOf("portrait")!==-1)return!1}if("orientation"in window){var r=window.orientation;if(r===0||r===180)return!1;if(r===90||r===270)return!0}}catch(i){}return window.innerWidth>window.innerHeight}async function tc(){if(Ti.shouldCompleteTour()){await Jt("lib/bootstrap-tourist.js");var s=ne.startsWith("vcs"),r=[{element:"#platformsMenuButton",placement:"right",title:"Platform Selector",content:`You're currently on the "<b>`+ne+'</b>" platform. You can choose a different one from the menu.'},{element:"#preset_select",title:"Project Selector",content:"You can choose different code examples, create your own files, or import projects from GitHub."},{element:"#workspace",title:"Code Editor",content:s?"Type your 6502 assembly code into the editor, and it'll be assembled in real-time.":"Type your source code into the editor, and it'll be compiled in real-time."},{element:"#emulator",placement:"left",title:"Emulator",content:"We'll load your compiled code into the emulator whenever you make changes."},{element:"#debug_bar",placement:"bottom",title:"Debug Tools",content:"Use these buttons to set breakpoints, single step through code, pause/resume, and use debugging tools."},{element:"#dropdownMenuButton",title:"Main Menu",content:"Click the menu to create new files, download your code, or share your work with others."},{element:"#sidebar",title:"Sidebar",content:"Pull right to expose the sidebar. It lets you switch between source files, view assembly listings, and use other tools like Disassembler, Memory Browser, and Asset Editor."}];ec()||r.unshift({element:"#controls_top",placement:"bottom",title:"Portrait mode detected",content:"This site works best on desktop browsers. For best results, rotate your device to landscape orientation."}),window.location.host.endsWith("8bitworkshop.com")&&(r.unshift({element:"#dropdownMenuButton",placement:"right",title:"Cookie Consent",content:'Before we start, we should tell you that this website stores cookies and other data in your browser. You can review our <a href="/privacy.html" target="_new">privacy policy</a>.'}),r.push({element:"#booksMenuButton",placement:"left",title:"Books",content:"Get some books that explain how to program all of this stuff, and write some games!"})),fn&&(r.unshift({element:"#dropdownMenuButton",placement:"right",title:"Developer Analytics",content:"BTW, we send stack traces to sentry.io when exceptions are thrown. Hope that's ok."}),r.unshift({element:"#dropdownMenuButton",placement:"right",title:"Welcome to 8bitworkshop Desktop!",content:'The directory "~/8bitworkshop" contains all of your file edits and built ROM images. You can create new projects under the platform directories (e.g. "c64/myproject")'}));var i=new Tour({autoscroll:!1,steps:r,onEnd:()=>{Ti.completedTour()}});setTimeout(()=>{i.start()},2500)}}function zn(s){var r=(s.message||s.error||s)+"";if(r.indexOf("QuotaExceededError")>=0)qo(!1,!1);else{var i=s.error||s.reason;i!=null&&i instanceof po&&$s(i)}}function $s(s){console.log("haltEmulation"),Qr(),mc(s)}function rc(){window.addEventListener("error",zn),window.addEventListener("unhandledrejection",zn)}function Us(){window.removeEventListener("error",zn),window.removeEventListener("unhandledrejection",zn)}function Jr(s,r){r&&(te=r),Us(),s?window.location.replace("?"+$.param(te)):window.location.href="?"+$.param(te)}function vn(){ne&&(te.platform=ne),delete te[""],history.replaceState({},"","?"+$.param(te))}function ic(){var s=!1;document.addEventListener("visibilitychange",()=>{document.visibilityState=="hidden"&&D&&D.isRunning()?(Qr(),s=!0):document.visibilityState=="visible"&&s&&(Mr(),s=!1)}),$(window).on("focus",()=>{s&&(Mr(),s=!1)}),$(window).on("blur",()=>{D&&D.isRunning()&&(Qr(),s=!0)}),$(window).on("orientationchange",()=>{D&&D.resize&&setTimeout(D.resize.bind(D),200)})}function nc(){var s=$(document).find(".emucontrols-"+vi(ne));ne.endsWith(".mame")&&s.show();var r=$("#emulator").find("canvas");r&&(r.on("focus",()=>{D.isRunning()&&(s.fadeIn(200),D.pause(),D.resume())}),r.on("blur",()=>{s.fadeOut(200)}))}function oc(){window.ga&&($(".dropdown-item").click(s=>{s.target&&s.target.id&&We("menu",s.target.id)}),Ra(location.pathname+"?platform="+ne+(qe?"&repo="+qe:"&file="+te.file)))}async function ac(){if(!fo[ne])throw Error("Invalid platform '"+ne+"'.");let s=$("#emuscreen")[0],r=co(te.options||"");D=new fo[ne](s,r),dc(),It=new va(D);let i=D.getPresets?D.getPresets():[];if(!te.file){var l=Ti.getLastPreset(),f=l||(qe?null:i[0].id);te.file=f||"DEFAULT",f||se("There is no default main file for this project. Try selecting one from the pulldown.")}ne=="vcs"&&te.file.startsWith("examples/")&&!te.file.endsWith(".a")&&(te.file+=".a"),vn(),rc(),oc(),We("platform","select",ne),await D.start(),await Pu(),await cu(),xi&&(me.filedata[xi.filename]=xi.content,me.mainPath=xi.filename,te.file=xi.filename,xi=null),await pu(te.file),D.sourceFileFetch=m=>me.filedata[m],Ho&&me&&me.mainPath&&(Ho=!1,setTimeout(()=>{me&&me.mainPath&&(console.log("Auto-compiling URL-loaded file:",me.mainPath),me.sendBuild())},300)),Ut=iu(),window.autoCompileEnabled=Ut,console.log("Auto-compile state loaded from cookie:",Ut?"enabled":"disabled"),Qu(),ic(),nc(),Ot?sc():(hn(),lc(),tc()),Ws(),nn()}function sc(){$("#dropdownMenuButton").hide(),$("#platformsMenuButton").hide(),$("#booksMenuButton").hide()}function lc(){vi(ne)=="nes"?$(".book-nes").addClass("book-active"):vi(ne)=="vcs"?$(".book-vcs").addClass("book-active"):vi(ne)=="verilog"?$(".book-verilog").addClass("book-active"):vi(ne)=="c64"?$(".book-c64").addClass("book-active"):D.getToolForFilename(Ke())=="sdcc"&&$(".book-arcade").addClass("book-active")}function Ws(){setTimeout(()=>{$("#controls_dynamic").css("visibility","inherit")},250)}function Hs(){var s="workspace-split3-"+ne;Ot&&(s="embed-"+s);var r;ne.startsWith("vcs")?r=[0,50,50]:Ot||Qi?r=[0,55,45]:r=[12,44,44];var i=cr&&localStorage.getItem(s);if(i)try{r=JSON.parse(i)}catch(f){console.log(f)}var l=ru(["#sidebar","#workspace","#emulator"],{sizes:r,minSize:[0,250,250],onDrag:()=>{D&&D.resize&&D.resize()},onDragEnd:()=>{cr&&localStorage.setItem(s,JSON.stringify(l.getSizes())),ve&&ve.resize()}})}async function uc(s){if(!ne){se("Platform must be specified when using url parameter. Please add ?platform=XXX to the URL.");return}try{let i=new URL(s);if(i.protocol!=="http:"&&i.protocol!=="https:"){se("Only http and https URLs are supported. Invalid URL: "+s);return}}catch(i){se("Invalid URL format: "+s+". Please provide a valid http:// or https:// URL.");return}pe(!0);let r;te.filename?r=te.filename:(r=kt(s),(!r||r===s)&&(r="loaded"+(ne==="c64"||ne==="bbc"||ne==="vic20"?".bas":".c"))),console.log("Loading file from URL:",s),console.log("Using filename:",r),Vi(s,async i=>{try{if(!i){se("Could not load file from URL: "+s+`

Possible reasons:
- File not found (404)
- CORS restrictions
- Network error
- Invalid URL`),pe(!1);return}let l;if(i instanceof Uint8Array)try{l=qi(i)}catch(f){se("Could not decode file as text. Binary files are not supported in this phase."),pe(!1);return}else l=i;console.log("Loaded "+l.length+" bytes from URL"),xi={filename:r,content:l},Ho=!0,delete te.url,delete te.filename,te.file=r,vn(),pe(!1),await ea()}catch(l){console.error("Error loading from URL:",l),se("Error loading file from URL: "+s+`

`+l.message),pe(!1)}},"text")}function cc(s){let r=Fi(te.ignore)||Ot;pe(!0),Vi(s,async i=>{if(i){var l=kt(s);console.log("Importing "+i.length+" bytes as "+l);try{var f=await Gt.getItem(l);pe(!1),f!=null&&r||(f==null||confirm("Replace existing file '"+l+"'?"))&&await Gt.setItem(l,i),delete te.importURL,te.file=l,vn(),ea()}finally{pe(!1)}}else se("Could not load source code from URL: "+s),pe(!1)},"text")}async function fc(){var s=Fi(te.ignore),r=Fi(te.force);Ot?s=!r:r=!1;for(var i=0;i<20;i++){let f=te["file"+i+"_name"],m=te["file"+i+"_data"];if(f==null||m==null)break;var l=await Gt.getItem(f);if(!(s&&l)){let b=m;te["file"+i+"_type"]=="binary"&&(b=Pn(atob(b))),(!l||r||confirm("Replace existing file '"+f+"'?"))&&await Gt.setItem(f,b)}i==0&&(te.file=f),delete te["file"+i+"_name"],delete te["file"+i+"_data"],delete te["file"+i+"_type"]}delete te.ignore,delete te.force,vn()}function dc(){var s=D.getPlatformName&&D.getPlatformName(),r=$('a[href="?platform='+ne+'"]');r.length&&(r.addClass("dropdown-item-checked"),s=s||r.text()||s),Bo=s||ne,$(".platform_name").text(Bo)}function Bs(){if(ne=te.platform||Ti.getLastPlatformID(),qe=te.repo,!te.repo&&!te.file&&(qe=Ti.getLastRepoID(ne)),cr&&qe&&qe!=="/"){var s=Oi()[qe];s&&(console.log(ne,te,s),te.repo=qe,s.platform_id&&!te.platform&&(te.platform=ne=s.platform_id),s.mainPath&&!te.file&&(te.file=s.mainPath))}else qe="",delete te.repo;ne||(Ot&&ka("The 'platform' must be specified when embed=1"),ne=te.platform="c64")}async function Gs(){if(te.githubURL){In(te.githubURL,!0);return}if(te.url){if(!te.platform){se(`Platform must be specified when using url parameter. Please add ?platform=XXX&url=... to the URL.

Example: ?platform=c64&url=https://example.com/game.bas`);return}Bs(),Hs(),Qt=qe||Rt(ne),Ot&&(Qt=(document.referrer||document.location.href)+Qt),Gt=Ji(Qt),await uc(te.url);return}if(Bs(),Hs(),Qt=qe||Rt(ne),Ot&&(Qt=(document.referrer||document.location.href)+Qt),Gt=Ji(Qt),te.importURL){cc(te.importURL);return}te.file0_name&&await fc(),ea()}async function ea(){try{let r=ne.includes("")?ne:vi(ne);var s=await ya(r);console.log("starting platform",ne),await ac(),document.title=document.title+" ["+ne+"] - "+(qe?"["+qe+"] - ":"")+me.mainPath}catch(r){console.log(r),se('Platform "'+ne+'" failed to load.')}finally{Ws()}}var ta="__use_https";function zs(s){document.cookie=ta+"="+s+";domain=8bitworkshop.com;path=/;max-age=315360000"}function pc(){var s=yi(ta);if(typeof s=="string")return!!s;var r=cr&&!localStorage.getItem("__lastplatform")?1:0;return zs(r),!!r}function hc(){bootbox.confirm('<p>Do you want to force the browser to use HTTPS from now on?</p><p>WARNING: This will make all of your local files unavailable, so you should "Download All Changes" first for each platform where you have done work.</p><p>You can go back to HTTP by setting the "'+ta+'" cookie to 0.</p>',s=>{s&&(zs(1),qs())})}function qs(){window.location.protocol=="http:"&&window.location.host=="8bitworkshop.com"&&(pc()?(Us(),window.location.replace(window.location.href.replace(/^http:/,"https:"))):$("#item_switch_https").click(hc).show())}qs();function Dd(s,r){D.writeFile(s,r)}function Ld(s){return D.readFile(s)}function Fd(){return D.saveState()}function mc(s){var r=s&&s.message||r;ks(s,r),ve.refresh(!1),D.saveState&&mn(D.saveState())}async function gc(s){var r=me.filedata[s];r!=null&&(ve.updateFile(s,await alternateLocalFilesystem.getFileData(s)),console.log("updating file",s))}function vc(){if(fn&&Ei instanceof Uint8Array){var s=ct(Ke()),r=D.getROMExtension&&D.getROMExtension(Ei)||"-"+Rt(ne)+".bin";alternateLocalFilesystem.setFileData(`bin/${s}${r}`,Ei)}}function yc(s){var r=ve.getActive();if(r instanceof Zi){var i=r.editor.getSearchCursor(s);i.findNext()&&r.editor.setSelection(i.pos.to,i.pos.from)}}function bc(){let s=!1;new IntersectionObserver((i,l)=>{for(var f of i)f.isIntersecting&&!s&&(Gs(),s=!0),f.intersectionRatio==0&&Ko()&&D.isRunning()&&Qr(),f.intersectionRatio>0&&Ko()&&!D.isRunning()&&Mr()},{}).observe($("#emulator")[0])}typeof process=="undefined"&&(Ot&&typeof IntersectionObserver=="function"?bc():Gs());function wc(){window.autoCompileEnabled=Ut,window.IDE={platform:D,platform_id:ne,current_project:me,projectWindows:ve,qs:te,store_id:Qt,repo_id:qe,lastDebugState:Ir,autoCompileEnabled:Ut,getCurrentProject:$t,getCurrentMainFilename:Ke,getCurrentEditorFilename:Fo,getCurrentOutput:ot,getPlatformStore:Or,haltEmulation:$s,gotoNewLocation:Jr,setFrameRateUI:gn,setupBreakpoint:wr,runToPC:en,clearBreakpoint:ji,reloadWorkspaceFile:gc,highlightSearch:yc,_downloadROMImage:Do,loadROM:s=>{let r=s||ot();if(!r){console.error("\u274C No compiled output available. Please compile your project first.");return}if(!(r instanceof Uint8Array)){console.error("\u274C Output is not binary data:",typeof r);return}console.log("\u2705 Loading ROM with",r.length,"bytes"),D.loadROM(Ke(),r)},debugCompilation:()=>{console.log("=== DEBUGGING COMPILATION OUTPUT ===");let s=ot();if(s?(console.log("\u2705 Current output found:",s),console.log("Current output length:",s.length),s.length>0&&(console.log("First 32 bytes (hex):",Array.from(s.slice(0,32)).map(r=>r.toString(16).padStart(2,"0")).join(" ")),console.log("First 32 bytes (decimal):",Array.from(s.slice(0,32)).join(" ")))):console.log("\u274C No current output found"),typeof jn!="undefined"?console.log("\u2705 Compilation parameters found:",jn):console.log("\u274C No compilation parameters found"),D?(console.log("\u2705 Platform found:",D.getName?D.getName():"Unknown"),D.debugSymbols&&console.log("\u2705 Debug symbols found:",D.debugSymbols)):console.log("\u274C No platform found"),window.worker){if(console.log("\u2705 Worker found"),window.worker.store){console.log("\u2705 Store found");let r=Object.keys(window.worker.store.workfs||{});console.log("Files in virtual file system:",r);for(let i of r){let l=window.worker.store.workfs[i];if(console.log(`File: ${i} (${l.data.length} bytes)`),l.data.length>0){let f=Array.from(l.data.slice(0,16));console.log(`  First 16 bytes: ${f.map(m=>m.toString(16).padStart(2,"0")).join(" ")}`)}}}}else console.log("\u274C No worker found")}},console.log("IDE variables exposed globally. Access via window.IDE"),console.log("Use window.IDE.loadROM() to load the current compiled output"),console.log("Use window.IDE.debugCompilation() to debug compilation output")}setTimeout(wc,1e3);export{Ca as a,te as b,ne as c,Qt as d,qe as e,D as f,me as g,ve as h,Ir as i,Or as j,$t as k,ot as l,Ao as m,Kr as n,Ke as o,Fo as p,wr as q,en as r,ji as s,gn as t,$s as u,Jr as v,Hs as w,Bs as x,Gs as y,Dd as z,Ld as A,Fd as B,mc as C,gc as D,yc as E};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */
/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */
//# sourceMappingURL=chunk-CKG4YKSD.js.map
