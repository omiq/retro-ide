import{J as S,K as k}from"./chunk-KXQZZRQB.js";import{d as x}from"./chunk-WAARL7ET.js";var E=x((d,v)=>{(function(l,e){typeof define=="function"&&define.amd?define([],e):typeof d!="undefined"?e():(e(),l.FileSaver={})})(d,function(){"use strict";function l(t,r){return typeof r=="undefined"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function e(t,r,c){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){u(a.response,r,c)},a.onerror=function(){console.error("could not download file")},a.send()}function i(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch(c){}return 200<=r.status&&299>=r.status}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(c){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,m=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(t,r,c){var a=o.URL||o.webkitURL,n=document.createElement("a");r=r||t.name||"download",n.download=r,n.rel="noopener",typeof t=="string"?(n.href=t,n.origin===location.origin?s(n):i(n.href)?e(t,r,c):s(n,n.target="_blank")):(n.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){s(n)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,c){if(r=r||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(l(t,c),r);else if(i(t))e(t,r,c);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){s(a)})}}:function(t,r,c,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof t=="string")return e(t,r,c);var n=t.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||n&&g||m)&&typeof FileReader!="undefined"){var f=new FileReader;f.onloadend=function(){var p=f.result;p=b?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=p:location=p,a=null},f.readAsDataURL(t)}else{var w=o.URL||o.webkitURL,h=w.createObjectURL(t);a?a.location=h:location.href=h,a=null,setTimeout(function(){w.revokeObjectURL(h)},4e4)}});o.saveAs=u.saveAs=u,typeof v!="undefined"&&(v.exports=u)})});var C=class{constructor(e){this.checkpointInterval=10;this.maxCheckpoints=300;this.reset(),this.platform=e}reset(){this.checkpoints=[],this.framerecs=[],this.frameCount=0,this.lastSeekFrame=0,this.lastSeekStep=0,this.lastStepCount=0,this.callbackStateChanged&&this.callbackStateChanged()}frameRequested(){var e={controls:this.platform.saveControlsState(),seed:S()},i=!1;return this.lastSeekFrame<this.frameCount?this.loadControls(this.lastSeekFrame):(this.platform.saveControlsState&&this.framerecs.push(e),i=this.frameCount++%this.checkpointInterval==0),this.lastSeekFrame++,this.lastSeekStep=0,this.callbackStateChanged&&this.callbackStateChanged(),i}numFrames(){return this.frameCount}currentFrame(){return this.lastSeekFrame}currentStep(){return this.lastSeekStep}recordFrame(e){this.checkpoints.push(e),this.callbackNewCheckpoint&&this.callbackNewCheckpoint(e),this.checkpoints.length>this.maxCheckpoints&&(this.checkpoints.shift(),this.framerecs=this.framerecs.slice(this.checkpointInterval),this.lastSeekFrame-=this.checkpointInterval,this.frameCount-=this.checkpointInterval,this.callbackStateChanged&&this.callbackStateChanged())}getStateAtOrBefore(e){if(e<=0&&this.checkpoints.length>0)return{frame:0,state:this.checkpoints[0]};var i=Math.floor(e/this.checkpointInterval),s=i<this.checkpoints.length?i:this.checkpoints.length-1,o=s*this.checkpointInterval;return{frame:o,state:this.checkpoints[s]}}loadFrame(e,i){if(e|=0,i|=0,e==this.lastSeekFrame&&i==this.lastSeekStep)return e;let{frame:s,state:o}=this.getStateAtOrBefore(e-1);if(o){var m=0;for(this.platform.pause(),this.platform.loadState(o);s<e;)s<this.framerecs.length&&this.loadControls(s),s++,m=this.platform.advance(s<e);return s==0&&(m=this.platform.advance(!0),this.platform.loadState(o)),i>0&&this.platform.advanceFrameClock&&(i=this.platform.advanceFrameClock(null,i)),this.lastSeekFrame=e,this.lastSeekStep=i,this.lastStepCount=m,e}else return-1}loadControls(e){this.platform.loadControlsState&&this.platform.loadControlsState(this.framerecs[e].controls),k(this.framerecs[e].seed)}getLastCheckpoint(){return this.checkpoints.length&&this.checkpoints[this.checkpoints.length-1]}};function R(l){switch(l){case"apple2":return import("./apple2-EVUWTWPJ.js");case"apple2.mame":return import("./apple2-EVUWTWPJ.js");case"apple2e":return import("./apple2e-3G3ZAFYP.js");case"arm32":return import("./arm32-P3EQB6N6.js");case"astrocade":return import("./astrocade-4GAZ7YUR.js");case"astrocade-bios":return import("./astrocade-4GAZ7YUR.js");case"astrocade-arcade":return import("./astrocade-4GAZ7YUR.js");case"atari7800":return import("./atari7800-YW6Y5JD3.js");case"atari8":return import("./atari8-3XWRATWR.js");case"atari8-800":return import("./atari8-3XWRATWR.js");case"atari8-5200":return import("./atari8-3XWRATWR.js");case"atari8-800.xlmame":return import("./atari8-3XWRATWR.js");case"atari8-800xl.mame":return import("./atari8-3XWRATWR.js");case"atari8-5200.mame":return import("./atari8-3XWRATWR.js");case"basic":return import("./basic-6BLFBGCC.js");case"c64":return import("./c64-WXLTQTWN.js");case"c64.mame":return import("./del_c64-IU6XDT76.js");case"coleco":return import("./coleco-T3R5G44J.js");case"coleco.mame":return import("./coleco-T3R5G44J.js");case"cpc":return import("./cpc-X2GC7CPY.js");case"cpc.6128":return import("./cpc-X2GC7CPY.js");case"cpc.464":return import("./cpc-X2GC7CPY.js");case"cpc.kcc":return import("./cpc-X2GC7CPY.js");case"devel":return import("./devel-L55ETTEU.js");case"devel-6502":return import("./devel-L55ETTEU.js");case"exidy":return import("./exidy-G2ENTDC6.js");case"galaxian":return import("./galaxian-4HDFEKLK.js");case"galaxian-scramble":return import("./galaxian-4HDFEKLK.js");case"kim1":return import("./kim1-NMLI2NN3.js");case"markdown":return import("./markdown-NUMAFD2A.js");case"msx":return import("./msx-POMZ2ETV.js");case"msx-libcv":return import("./msx-POMZ2ETV.js");case"msx-cpm":return import("./msx-cpm-D37IOB5W.js");case"msx-shell":return import("./msx-shell-KQGOPEUS.js");case"mw8080bw":return import("./mw8080bw-UJCBVUB2.js");case"nes":return import("./nes-5L2IQXSK.js");case"nes-asm":return import("./nes-5L2IQXSK.js");case"nes.mame":return import("./nes-5L2IQXSK.js");case"pce":return import("./pce-L2J3XDEV.js");case"sms":return import("./sms-EW2ENYPR.js");case"sms-sg1000-libcv":return import("./sms-EW2ENYPR.js");case"sms-sms-libcv":return import("./sms-EW2ENYPR.js");case"sms-gg-libcv":return import("./sms-EW2ENYPR.js");case"sound_konami":return import("./sound_konami-SQFWZWP7.js");case"sound_williams":return import("./sound_williams-HNRHMJ3M.js");case"sound_williams-z80":return import("./sound_williams-HNRHMJ3M.js");case"vcs":return import("./vcs-HYCQTXWE.js");case"vcs.mame":return import("./vcs-HYCQTXWE.js");case"vcs.stellerator":return import("./vcs-HYCQTXWE.js");case"vector":return import("./vector-EG4E3FPH.js");case"vector-ataribw":return import("./vector-EG4E3FPH.js");case"vector-ataricolor":return import("./vector-EG4E3FPH.js");case"vector-z80color":return import("./vector-EG4E3FPH.js");case"vectrex":return import("./vectrex-ZNRCUVC3.js");case"verilog":return import("./verilog-XOBKL7GG.js");case"verilog-vga":return import("./verilog-XOBKL7GG.js");case"verilog-test":return import("./verilog-XOBKL7GG.js");case"vic20":return import("./vic20-IEGKXNEO.js");case"vicdual":return import("./vicdual-AFCBLY6Q.js");case"williams":return import("./williams-DDFQRYPZ.js");case"williams.old":return import("./williams-DDFQRYPZ.js");case"williams-defender":return import("./williams-DDFQRYPZ.js");case"williams-z80":return import("./williams-DDFQRYPZ.js");case"x86":return import("./x86-Y3CXDPOX.js");case"x86dosbox":return console.log("Importing x86dosbox platform..."),import("./x86dosbox-HNOEVBF3.js");case"zmachine":return import("./zmachine-FMKV46H6.js");case"zx":return import("./zx-7M2VIUE2.js");case"bbc":case"bbc-micro":case"bbc.b":case"bbc.model.b":return import("./bbc-3HUHQ2YV.js");default:throw new Error(`Platform not recognized: '${l}'`)}}export{C as a,R as b,E as c};
//# sourceMappingURL=chunk-I7XH2CP4.js.map
