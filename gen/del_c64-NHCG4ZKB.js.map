{
  "version": 3,
  "sources": ["../src/platform/del_c64.ts"],
  "sourcesContent": ["\nimport { Platform, Base6502MachinePlatform, getToolForFilename_6502, getOpcodeMetadata_6502, Preset } from \"../common/baseplatform\";\nimport { PLATFORMS } from \"../common/emu\";\nimport { BaseMAME6502Platform } from \"../common/mameplatform\";\n\nconst C64_PRESETS : Preset[] = [\n  {id:'helloc.c', name:'Hello World', category:'C'},\n  {id:'screen_ram.c', name:'Screen RAM'},\n  {id:'siegegame.c', name:'Siege Game'},\n  {id:'joymove.c', name:'Sprite Movement'},\n  {id:'sprite_collision.c', name:'Sprite Collision'},\n  {id:'scroll1.c', name:'Scrolling (Single Buffer)'},\n  {id:'test_setirq.c', name:'Raster Interrupts'},\n  {id:'test_display_list.c', name:'Raster IRQ Library'},\n  {id:'scrolling_text.c', name:'Big Scrolling Text'},\n  {id:'side_scroller.c', name:'Side-Scrolling Game'},\n  {id:'scroll2.c', name:'Scrolling (Double Buffer)'},\n  {id:'scroll3.c', name:'Scrolling (Multidirectional)'},\n  {id:'scroll4.c', name:'Scrolling (Color RAM Buffering)'},\n  {id:'scroll5.c', name:'Scrolling (Camera Following)'},\n  {id:'scrollingmap1.c', name:'Scrolling Tile Map'},\n  {id:'fullscrollgame.c', name:'Full-Scrolling Game'},\n  {id:'test_multiplex.c', name:'Sprite Retriggering'},\n  {id:'test_multispritelib.c', name:'Sprite Multiplexing Library'},\n  {id:'mcbitmap.c', name:'Multicolor Bitmap Mode'},\n  {id:'testlz4.c', name:'LZ4 Bitmap Compression'},\n  {id:'mandel.c', name:'Mandelbrot Fractal'},\n  {id:'musicplayer.c', name:'Music Player'},\n  {id:'sidtune.dasm', name:'Tiny SID Tune (ASM)'},\n  {id:'siddemo.c', name:'SID Player Demo'},\n  {id:'digisound.c', name:'Digi Sound Player'},\n  {id:'climber.c', name:'Climber Game'},\n  {id:'test_border_sprites.c', name:'Sprites in the Borders'},\n  {id:'sprite_stretch.c', name:'Sprite Stretching'},\n  {id:'linecrunch.c', name:'Linecrunch'},\n  {id:'fld.c', name:'Flexible Line Distance'},\n  {id:'plasma.c', name:'Plasma Demo'},\n  {id:'23matches.c', name:'23 Matches'},\n  {id:'tgidemo.c', name:'TGI Graphics Demo'},\n  {id:'upandaway.c', name:'Up, Up and Away'},\n  {id:'hello.dasm', name:'Hello World (DASM)', category:'Assembly Language'},\n  {id:'hello.acme', name:'Hello World (ACME)'},\n  {id:'hello.wiz', name:'Hello Wiz (Wiz)'},\n];\n\nconst C64_MEMORY_MAP = { main:[\n  {name:'6510 Registers',start:0x0,  size:0x2,type:'io'},\n  {name:'BIOS Reserved', start:0x200,   size:0xa7},\n  {name:'Default Screen RAM', start:0x400,   size:1024,type:'ram'},\n  //{name:'RAM',          start:0x2,   size:0x7ffe,type:'ram'},\n  {name:'Cartridge ROM',start:0x8000,size:0x2000,type:'rom'},\n  {name:'BASIC ROM',    start:0xa000,size:0x2000,type:'rom'},\n  {name:'Upper RAM',    start:0xc000,size:0x1000,type:'ram'},\n  {name:'Character ROM',start:0xd000,size:0x1000,type:'rom'},\n  {name:'VIC-II I/O',   start:0xd000,size:0x0400,type:'io'},\n  {name:'SID',          start:0xd400,size:0x0400,type:'io'},\n  {name:'Color RAM',    start:0xd800,size:0x0400,type:'io'},\n  {name:'CIA 1',        start:0xdc00,size:0x0100,type:'io'},\n  {name:'CIA 2',        start:0xdd00,size:0x0100,type:'io'},\n  {name:'I/O 1',        start:0xde00,size:0x0100,type:'io'},\n  {name:'I/O 2',        start:0xdf00,size:0x0100,type:'io'},\n  {name:'KERNAL ROM',   start:0xe000,size:0x2000,type:'rom'},\n] }\n\n// WASM C64 platform - REMOVED (using chips-test instead)\n\n// C64 MAME platform\nabstract class C64MAMEPlatform extends BaseMAME6502Platform {\n  getPresets() { return C64_PRESETS; }\n  getToolForFilename = getToolForFilename_6502;\n  getOpcodeMetadata = getOpcodeMetadata_6502;\n  getDefaultExtension() { return \".c\"; }\n  loadROM(title, data) {\n    if (!this.started) {\n      this.startModule(this.mainElement, {\n        jsfile:'mame8bitpc.js',\n        biosfile:'c64.zip',\n        cfgfile:'c64.cfg',\n        driver:'c64',\n        width:418,\n        height:235,\n        romfn:'/emulator/image.crt',\n        romdata:new Uint8Array(data),\n        romsize:0x10000,\n        extraargs: ['-autoboot_delay','5','-autoboot_command','load \"$\",8,1\\n'],\n        preInit:function(_self) {\n        },\n      });\n    } else {\n      this.loadROMFile(data);\n      this.loadRegion(\":quickload\", data);\n      var result = this.luacall(`image:load(\"/emulator/image.prg\")`)\n      console.log('load rom', result);\n      //this.loadRegion(\":exp:standard\", data);\n    }\n  }\n  start() {\n  }\n  getMemoryMap() { return C64_MEMORY_MAP; }\n}\n\n\n// Temporarily redirect old C64 to chips-test implementation\n// TODO: Remove this once chips-test is fully tested\nimport C64ChipsPlatform from \"./c64\";\nPLATFORMS['c64'] = C64ChipsPlatform;\nPLATFORMS['c64.mame'] = C64MAMEPlatform;\n"],
  "mappings": "mMAKA,GAAM,GAAyB,CAC7B,CAAC,GAAG,WAAY,KAAK,cAAe,SAAS,KAC7C,CAAC,GAAG,eAAgB,KAAK,cACzB,CAAC,GAAG,cAAe,KAAK,cACxB,CAAC,GAAG,YAAa,KAAK,mBACtB,CAAC,GAAG,qBAAsB,KAAK,oBAC/B,CAAC,GAAG,YAAa,KAAK,6BACtB,CAAC,GAAG,gBAAiB,KAAK,qBAC1B,CAAC,GAAG,sBAAuB,KAAK,sBAChC,CAAC,GAAG,mBAAoB,KAAK,sBAC7B,CAAC,GAAG,kBAAmB,KAAK,uBAC5B,CAAC,GAAG,YAAa,KAAK,6BACtB,CAAC,GAAG,YAAa,KAAK,gCACtB,CAAC,GAAG,YAAa,KAAK,mCACtB,CAAC,GAAG,YAAa,KAAK,gCACtB,CAAC,GAAG,kBAAmB,KAAK,sBAC5B,CAAC,GAAG,mBAAoB,KAAK,uBAC7B,CAAC,GAAG,mBAAoB,KAAK,uBAC7B,CAAC,GAAG,wBAAyB,KAAK,+BAClC,CAAC,GAAG,aAAc,KAAK,0BACvB,CAAC,GAAG,YAAa,KAAK,0BACtB,CAAC,GAAG,WAAY,KAAK,sBACrB,CAAC,GAAG,gBAAiB,KAAK,gBAC1B,CAAC,GAAG,eAAgB,KAAK,uBACzB,CAAC,GAAG,YAAa,KAAK,mBACtB,CAAC,GAAG,cAAe,KAAK,qBACxB,CAAC,GAAG,YAAa,KAAK,gBACtB,CAAC,GAAG,wBAAyB,KAAK,0BAClC,CAAC,GAAG,mBAAoB,KAAK,qBAC7B,CAAC,GAAG,eAAgB,KAAK,cACzB,CAAC,GAAG,QAAS,KAAK,0BAClB,CAAC,GAAG,WAAY,KAAK,eACrB,CAAC,GAAG,cAAe,KAAK,cACxB,CAAC,GAAG,YAAa,KAAK,qBACtB,CAAC,GAAG,cAAe,KAAK,mBACxB,CAAC,GAAG,aAAc,KAAK,qBAAsB,SAAS,qBACtD,CAAC,GAAG,aAAc,KAAK,sBACvB,CAAC,GAAG,YAAa,KAAK,oBAGlB,EAAiB,CAAE,KAAK,CAC5B,CAAC,KAAK,iBAAiB,MAAM,EAAM,KAAK,EAAI,KAAK,MACjD,CAAC,KAAK,gBAAiB,MAAM,IAAS,KAAK,KAC3C,CAAC,KAAK,qBAAsB,MAAM,KAAS,KAAK,KAAK,KAAK,OAE1D,CAAC,KAAK,gBAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,OACpD,CAAC,KAAK,YAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,OACpD,CAAC,KAAK,YAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,OACpD,CAAC,KAAK,gBAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,OACpD,CAAC,KAAK,aAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,MACpD,CAAC,KAAK,MAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,MACpD,CAAC,KAAK,YAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,MACpD,CAAC,KAAK,QAAgB,MAAM,MAAO,KAAK,IAAO,KAAK,MACpD,CAAC,KAAK,QAAgB,MAAM,MAAO,KAAK,IAAO,KAAK,MACpD,CAAC,KAAK,QAAgB,MAAM,MAAO,KAAK,IAAO,KAAK,MACpD,CAAC,KAAK,QAAgB,MAAM,MAAO,KAAK,IAAO,KAAK,MACpD,CAAC,KAAK,aAAgB,MAAM,MAAO,KAAK,KAAO,KAAK,SAMtD,eAAuC,EAAqB,CAA5D,aAnEA,CAmEA,oBAEE,wBAAqB,EACrB,uBAAoB,EAFpB,YAAa,CAAE,MAAO,GAGtB,qBAAsB,CAAE,MAAO,KAC/B,QAAQ,EAAO,EAAM,CACnB,GAAI,CAAC,KAAK,QACR,KAAK,YAAY,KAAK,YAAa,CACjC,OAAO,gBACP,SAAS,UACT,QAAQ,UACR,OAAO,MACP,MAAM,IACN,OAAO,IACP,MAAM,sBACN,QAAQ,GAAI,YAAW,GACvB,QAAQ,MACR,UAAW,CAAC,kBAAkB,IAAI,oBAAoB;AAAA,GACtD,QAAQ,SAAS,EAAO,SAGrB,CACL,KAAK,YAAY,GACjB,KAAK,WAAW,aAAc,GAC9B,GAAI,GAAS,KAAK,QAAQ,qCAC1B,QAAQ,IAAI,WAAY,IAI5B,OAAQ,EAER,cAAe,CAAE,MAAO,KAO1B,EAAU,IAAS,EACnB,EAAU,YAAc",
  "names": []
}
