{
  "version": 3,
  "sources": ["../src/platform/apple2e.ts"],
  "sourcesContent": ["import { Platform, Preset } from '../common/baseplatform';\nimport { PLATFORMS } from '../common/emu';\n\nconst APPLE2E_PRESETS: Preset[] = [\n  { id: 'hello.bas', name: 'Hello World (BASIC)', category: 'BASIC Tutorial' },\n  { id: 'colors.bas', name: 'Color Demo (BASIC)' },\n  { id: 'graphics.bas', name: 'Graphics Demo (BASIC)' },\n  { id: 'keyboard.bas', name: 'Keyboard Demo (BASIC)' },\n  { id: 'game.bas', name: 'Simple Game (BASIC)' },\n];\n\nexport class Apple2EPlatform implements Platform {\n  private mainElement: HTMLElement;\n  private iframe: HTMLIFrameElement | null = null;\n  private emulatorReady = false;\n  private lastLoadedProgram: string | null = null;\n  private isLoadingProgram = false;\n\n  constructor(mainElement: HTMLElement) {\n    this.mainElement = mainElement;\n    \n    // Listen for messages from iframe\n    window.addEventListener('message', (event) => {\n      if (event.data && event.data.type === 'apple2e_ready') {\n        console.log('Apple2EPlatform: Emulator ready');\n        this.emulatorReady = true;\n        \n        // Small delay to ensure emulator is fully initialized before accepting ROM loads\n        // This helps prevent race conditions when files are switched quickly\n        setTimeout(() => {\n          console.log('Apple2EPlatform: Emulator fully ready, can accept ROM loads');\n        }, 200);\n      } else if (event.data && event.data.type === 'apple2e_error') {\n        console.error('Apple2EPlatform: Emulator error:', event.data.error);\n        this.emulatorReady = false;\n      }\n    });\n  }\n\n  getName(): string {\n    return 'Apple IIe';\n  }\n\n  getDescription(): string {\n    return 'Apple IIe - 6502-based personal computer';\n  }\n\n  async init(): Promise<void> {\n    console.log('Apple2EPlatform init() called');\n  }\n\n  start(): void {\n    console.log('Apple2EPlatform start() called');\n    \n    // Create iframe for Apple IIe emulator\n    this.iframe = document.createElement('iframe');\n    this.iframe.id = 'apple2e-iframe';\n    this.iframe.style.width = '100%';\n    this.iframe.style.height = '600px';\n    this.iframe.style.border = '1px solid #ccc';\n    this.iframe.style.backgroundColor = '#000';\n    this.iframe.setAttribute('tabindex', '0'); // Make iframe focusable\n    this.iframe.setAttribute('allow', 'pointer-events'); // Allow pointer events\n    \n    // Don't add any event listeners to the iframe from parent\n    // The iframe should handle all its own events\n    // Cross-origin restrictions might prevent access anyway\n    console.log('Apple2EPlatform: Iframe will handle its own events');\n    \n    // Prevent the IDE from pausing when clicking on the iframe\n    // The iframe should handle its own focus without triggering IDE pause/resume\n    this.iframe.addEventListener('focus', (e) => {\n      // Don't let iframe focus trigger IDE pause\n      e.stopPropagation();\n    }, true);\n    \n    this.iframe.addEventListener('click', (e) => {\n      // Don't let iframe clicks trigger IDE pause\n      e.stopPropagation();\n    }, true);\n    \n    // Add iframe to the main element\n    this.mainElement.innerHTML = '';\n    this.mainElement.appendChild(this.iframe);\n    \n    // CRITICAL: Don't intercept clicks on the iframe at all\n    // Remove any event listeners that might block clicks\n    // The iframe needs to handle its own clicks completely\n    \n    // Ensure iframe container doesn't block pointer events\n    this.mainElement.style.pointerEvents = 'auto';\n    this.mainElement.style.userSelect = 'none';\n    \n    // Ensure iframe itself can receive clicks\n    this.iframe.style.pointerEvents = 'auto';\n    this.iframe.style.border = '1px solid #ccc';\n    \n    // Don't add any click handlers on the parent - let iframe handle everything\n    console.log('Apple2EPlatform: Iframe created, clicks should pass through to iframe');\n    \n    // Load the iframe\n    this.iframe.src = 'apple2e-iframe.html';\n    \n    console.log('Apple2EPlatform: iframe created and loading');\n    \n    // Reset emulator when it becomes ready (ensures clean BASIC prompt on page load)\n    const checkReady = setInterval(() => {\n      if (this.emulatorReady && this.iframe && this.iframe.contentWindow) {\n        clearInterval(checkReady);\n        // Auto-reset when platform starts to ensure clean state\n        console.log('Apple2EPlatform: Auto-resetting emulator on start for clean BASIC prompt');\n        this.reset();\n      }\n    }, 100);\n    \n    // Timeout after 10 seconds\n    setTimeout(() => clearInterval(checkReady), 10000);\n  }\n\n  stop(): void {\n    console.log('Apple2EPlatform stop() called');\n    if (this.iframe && this.iframe.contentWindow) {\n      this.iframe.contentWindow.postMessage({ type: 'stop' }, '*');\n    }\n  }\n\n  reset(): void {\n    console.log('Apple2EPlatform reset() called');\n    if (this.iframe && this.iframe.contentWindow) {\n      this.iframe.contentWindow.postMessage({ type: 'reset' }, '*');\n    }\n  }\n\n  isRunning(): boolean {\n    return this.emulatorReady;\n  }\n\n  getToolForFilename(filename: string): string {\n    // For now, only support BASIC\n    const lowerFilename = filename.toLowerCase();\n    if (lowerFilename.endsWith('.bas')) {\n      return 'applesoftbasic'; // Use AppleSoft BASIC compiler\n    }\n    return 'applesoftbasic'; // Default to BASIC\n  }\n\n  getDefaultExtension(): string {\n    return '.bas';\n  }\n\n  getPresets(): Preset[] {\n    return APPLE2E_PRESETS;\n  }\n\n  pause(): void {\n    console.log('Apple2EPlatform pause() called');\n    if (this.iframe && this.iframe.contentWindow) {\n      this.iframe.contentWindow.postMessage({ type: 'stop' }, '*');\n    }\n  }\n  \n  break(): void {\n    console.log('Apple2EPlatform break() called (Ctrl+C / BRK)');\n    if (this.iframe && this.iframe.contentWindow) {\n      this.iframe.contentWindow.postMessage({ type: 'break' }, '*');\n    }\n  }\n\n  resume(): void {\n    console.log('Apple2EPlatform resume() called');\n    if (this.iframe && this.iframe.contentWindow) {\n      this.iframe.contentWindow.postMessage({ type: 'run' }, '*');\n    }\n    // Also ensure emulator is running via API if available\n    const api = this.getApple2API();\n    if (api && api.apple2 && !api.apple2.isRunning()) {\n      api.apple2.run();\n    }\n  }\n  \n  /**\n   * Get access to the apple2 API object from the iframe\n   * This allows you to use the API reference functions\n   * \n   * Usage:\n   * const api = platform.getApple2API();\n   * const apple2 = api.apple2;\n   * const io = api.getIO();\n   * io.setKeyBuffer(\"PRINT \\\"HELLO\\\"\\r\");\n   */\n  getApple2API(): any {\n    if (!this.iframe || !this.iframe.contentWindow) {\n      console.warn('Apple2EPlatform: iframe not available');\n      return null;\n    }\n    \n    try {\n      // Access the iframe's window object\n      const iframeWindow = this.iframe.contentWindow as any;\n      \n      if (!iframeWindow.apple2 && !iframeWindow.APPLE2_API) {\n        console.warn('Apple2EPlatform: apple2 API not available in iframe yet');\n        return null;\n      }\n      \n      // Return API wrapper that proxies to iframe\n      return {\n        // Direct access to apple2 instance\n        get apple2() {\n          return iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n        },\n        \n        // Convenience methods\n        getIO: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          if (!apple2) {\n            console.error('Apple2EPlatform: Cannot getIO - emulator not available');\n            return null;\n          }\n          const io = apple2.getIO();\n          if (!io) {\n            console.error('Apple2EPlatform: getIO() returned null');\n            return null;\n          }\n          console.log('Apple2EPlatform: getIO() returned:', {\n            hasSetKeyBuffer: typeof io.setKeyBuffer === 'function',\n            hasKeyDown: typeof io.keyDown === 'function',\n            methods: Object.keys(io).filter(k => typeof io[k] === 'function')\n          });\n          return io;\n        },\n        \n        getCPU: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          return apple2 ? apple2.getCPU() : null;\n        },\n        \n        setAcceleration: (enabled: boolean) => {\n          const api = iframeWindow.APPLE2_API;\n          if (api && api.setAcceleration) {\n            api.setAcceleration(enabled);\n          } else {\n            console.error('Apple2EPlatform: setAcceleration not available');\n          }\n        },\n        \n        getAcceleration: () => {\n          const api = iframeWindow.APPLE2_API;\n          if (api && api.getAcceleration) {\n            return api.getAcceleration();\n          }\n          return false;\n        },\n        \n        reset: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          if (!apple2) {\n            console.error('Apple2EPlatform: Cannot reset - emulator not available');\n            return false;\n          }\n          console.log('Apple2EPlatform: Resetting emulator (enters BASIC)...');\n          apple2.reset();\n          // Ensure it's running after reset\n          setTimeout(() => {\n            if (!apple2.isRunning()) {\n              console.log('Apple2EPlatform: Starting emulator after reset');\n              apple2.run();\n            }\n            console.log('Apple2EPlatform: Reset complete, BASIC prompt should be ready');\n          }, 100);\n          return true;\n        },\n        \n        run: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          if (apple2) apple2.run();\n        },\n        \n        stop: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          if (apple2) apple2.stop();\n        },\n        \n        isRunning: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          return apple2 ? apple2.isRunning() : false;\n        },\n        \n        // Type text into emulator\n        type: (text: string) => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          if (!apple2) {\n            console.error('Apple2EPlatform: Cannot type - emulator not available');\n            console.log('Available in iframe:', {\n              apple2: !!iframeWindow.apple2,\n              APPLE2_API: !!iframeWindow.APPLE2_API\n            });\n            return false;\n          }\n          \n          console.log('Apple2EPlatform: Typing text:', text.substring(0, 50));\n          console.log('Apple2EPlatform: Emulator running?', apple2.isRunning());\n          \n          const io = apple2.getIO();\n          if (!io) {\n            console.error('Apple2EPlatform: Cannot type - getIO() returned null');\n            return false;\n          }\n          \n          if (!io.setKeyBuffer) {\n            console.error('Apple2EPlatform: Cannot type - io.setKeyBuffer is not a function');\n            console.log('IO object:', Object.keys(io));\n            return false;\n          }\n          \n          // CRITICAL: Reset first to get to BASIC prompt\n          // The emulator must be reset before typing, which puts it into BASIC\n          // This is especially important if a previous program is still running\n          console.log('Apple2EPlatform: Resetting emulator to enter BASIC...');\n          apple2.reset();\n          \n          // Ensure emulator is running after reset\n          if (!apple2.isRunning()) {\n            console.log('Apple2EPlatform: Starting emulator after reset...');\n            apple2.run();\n          }\n          \n          // Wait for reset to complete and BASIC prompt to be ready\n          // Apple II needs time to boot into BASIC after reset\n          console.log('Apple2EPlatform: Waiting for BASIC prompt...');\n          setTimeout(() => {\n            sendTextToEmulator(io, text);\n          }, 1200);\n          \n          // Helper function to send text using setKeyBuffer (the working method)\n          function sendTextToEmulator(io: any, text: string) {\n            console.log('Apple2EPlatform: Sending text:', JSON.stringify(text.substring(0, 80)));\n            \n            // CRITICAL: Focus the canvas in the iframe for keyboard input\n            // This is essential for iframe-based emulators - keyboard input requires focus\n            try {\n              const iframeDoc = iframeWindow.document;\n              const canvas = iframeDoc.querySelector('#screen');\n              if (canvas && (canvas as HTMLElement).focus) {\n                (canvas as HTMLElement).focus();\n                console.log('Apple2EPlatform: Focused canvas in iframe for keyboard input');\n              }\n            } catch (e) {\n              console.warn('Apple2EPlatform: Could not focus canvas (cross-origin?):', e);\n            }\n            \n            // Format text correctly: ensure it starts with \\r and ends with RUN\\r if it's a program\n            let formattedText = text;\n            \n            // If text contains line numbers (BASIC program), format it properly\n            if (/^\\d+\\s/.test(text.trim())) {\n              // It's a BASIC program - format it correctly\n              formattedText = text.replace(/\\r\\n/g, '\\r').replace(/\\n/g, '\\r');\n              \n              // Add leading \\r to ensure fresh prompt\n              if (!formattedText.startsWith('\\r')) {\n                formattedText = '\\r' + formattedText;\n              }\n              \n              // Ensure it ends with \\r\n              if (!formattedText.endsWith('\\r')) {\n                formattedText += '\\r';\n              }\n              \n              // Add RUN\\r at the end to execute\n              formattedText += 'RUN\\r';\n              \n              console.log('Apple2EPlatform: Formatted BASIC program:', JSON.stringify(formattedText.substring(0, 100)));\n            }\n            \n            // Use setKeyBuffer (this is the method that works!)\n            // Small delay to ensure focus is set\n            setTimeout(() => {\n              try {\n                io.setKeyBuffer(formattedText);\n                console.log('Apple2EPlatform: \u2705 setKeyBuffer called with formatted text');\n                console.log('Apple2EPlatform: Program sent to emulator');\n                \n                // Reset after sending program to ensure clean state for next load\n                // This helps with race conditions when switching files quickly\n                setTimeout(() => {\n                  const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n                  if (apple2) {\n                    console.log('Apple2EPlatform: Resetting emulator after program sent (for clean state)...');\n                    apple2.reset();\n                    if (!apple2.isRunning()) {\n                      apple2.run();\n                    }\n                    console.log('Apple2EPlatform: Reset complete, ready for next program');\n                    \n                    // Clear the last loaded program hash so we can load the same program again if needed\n                    // (but only after reset completes)\n                    setTimeout(() => {\n                      this.lastLoadedProgram = null;\n                    }, 500);\n                  }\n                }, 500);\n              } catch (e) {\n                console.error('Apple2EPlatform: setKeyBuffer failed:', e);\n              }\n            }, 100);\n          }\n          \n          \n          return true;\n        },\n        \n        // Get video modes\n        getVideoModes: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          return apple2 ? apple2.getVideoModes() : null;\n        },\n        \n        // Get stats\n        getStats: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          return apple2 ? apple2.getStats() : null;\n        },\n        \n        // Break/interrupt a running BASIC program (Ctrl+C / BRK)\n        // On Apple II, Ctrl+C sends BRK (0x03) which interrupts running programs\n        break: () => {\n          const apple2 = iframeWindow.apple2 || iframeWindow.APPLE2_API?.apple2;\n          if (!apple2) {\n            console.error('Apple2EPlatform: Cannot break - emulator not available');\n            return false;\n          }\n          \n          // Send break command via postMessage so iframe can handle focus\n          if (this.iframe && this.iframe.contentWindow) {\n            console.log('Apple2EPlatform: Sending break command to iframe (will handle focus)');\n            this.iframe.contentWindow.postMessage({ type: 'break' }, '*');\n            return true;\n          }\n          \n          // Fallback: try direct access (but focus might not work)\n          const io = apple2.getIO();\n          if (!io) {\n            console.error('Apple2EPlatform: Cannot break - getIO() returned null');\n            return false;\n          }\n          \n          console.log('Apple2EPlatform: Sending BRK (Ctrl+C) to interrupt program...');\n          // Send BRK character (0x03) - this is Ctrl+C on Apple II\n          // This will interrupt/break out of a running BASIC program\n          try {\n            io.keyDown(0x03); // BRK character (Ctrl+C)\n            setTimeout(() => {\n              if (io.keyUp) io.keyUp();\n            }, 50);\n            console.log('Apple2EPlatform: \u2705 BRK sent');\n            return true;\n          } catch (e) {\n            console.error('Apple2EPlatform: Error sending BRK:', e);\n            return false;\n          }\n        }\n      };\n    } catch (e) {\n      console.error('Apple2EPlatform: Error accessing iframe API:', e);\n      return null;\n    }\n  }\n\n  loadROM(title: string, rom: Uint8Array): void {\n    console.log('Apple2EPlatform loadROM() called', { title, romLength: rom?.length });\n    // For BASIC programs, we'll send them as text to be typed into the emulator\n    if (!rom || rom.length === 0) {\n      console.warn('Apple2EPlatform: No ROM data provided');\n      return;\n    }\n    \n    // Prevent duplicate loads - check if this is the same program or if one is already loading\n    const programText = new TextDecoder().decode(rom);\n    const programHash = programText.substring(0, 50);\n    \n    if (this.isLoadingProgram) {\n      console.warn('Apple2EPlatform: Already loading a program, ignoring duplicate request');\n      return;\n    }\n    \n    if (this.lastLoadedProgram === programHash) {\n      console.warn('Apple2EPlatform: Same program already loaded, ignoring duplicate request');\n      return;\n    }\n    \n    // Mark as loading and remember this program\n    this.isLoadingProgram = true;\n    this.lastLoadedProgram = programHash;\n    \n    if (this.iframe && this.iframe.contentWindow) {\n      // Always wait for emulator to be ready, even if emulatorReady flag is set\n      // This prevents race conditions when switching files quickly\n      const sendWhenReady = () => {\n        if (!this.iframe || !this.iframe.contentWindow) {\n          console.error('Apple2EPlatform: iframe lost during wait');\n          return;\n        }\n        \n        // Double-check emulator is actually ready by checking the iframe\n        const iframeWindow = this.iframe.contentWindow as any;\n        if (!iframeWindow.apple2 && !this.emulatorReady) {\n          console.log('Apple2EPlatform: Emulator not ready yet, waiting...');\n          setTimeout(sendWhenReady, 100);\n          return;\n        }\n        \n        // Emulator is ready, send the program\n        console.log('Apple2EPlatform: Emulator ready, sending program');\n        this.sendROMToEmulator(rom);\n      };\n      \n      if (!this.emulatorReady) {\n        console.log('Apple2EPlatform: Emulator not ready yet, waiting...');\n        // Wait for emulator to be ready\n        const checkReady = setInterval(() => {\n          if (this.emulatorReady && this.iframe && this.iframe.contentWindow) {\n            clearInterval(checkReady);\n            sendWhenReady();\n          }\n        }, 100);\n        // Timeout after 10 seconds\n        setTimeout(() => {\n          clearInterval(checkReady);\n          if (this.emulatorReady) {\n            sendWhenReady();\n          } else {\n            console.error('Apple2EPlatform: Timeout waiting for emulator to be ready');\n          }\n        }, 10000);\n      } else {\n        // Even if flag says ready, verify and wait a bit to ensure stability\n        console.log('Apple2EPlatform: Emulator ready flag set, verifying...');\n        setTimeout(sendWhenReady, 100);\n      }\n    }\n  }\n  \n  private sendROMToEmulator(rom: Uint8Array): void {\n    if (!this.iframe || !this.iframe.contentWindow) {\n      console.error('Apple2EPlatform: Cannot send ROM - iframe not available');\n      this.isLoadingProgram = false;\n      return;\n    }\n    \n    // Convert Uint8Array to string (assuming it's text/BASIC)\n    const program = new TextDecoder().decode(rom);\n    console.log('Apple2EPlatform: Sending program to iframe:', program.substring(0, 50));\n    this.iframe.contentWindow.postMessage({\n      type: 'load_basic',\n      data: { program: program }\n    }, '*');\n    \n    // Clear loading flag after a delay (in case of errors, the iframe handler will also clear it)\n    setTimeout(() => {\n      this.isLoadingProgram = false;\n    }, 2000);\n  }\n\n  getROMExtension(rom: Uint8Array): string {\n    // For BASIC programs, return .bas\n    return '.bas';\n  }\n\n  readAddress(addr: number): number {\n    // Not implemented for iframe-based emulator\n    return 0;\n  }\n\n  writeAddress(addr: number, val: number): void {\n    // Not implemented for iframe-based emulator\n  }\n\n  getMemoryMap() {\n    return {\n      main: [\n        { name: 'Zero Page RAM', start: 0x0, size: 0x100, type: 'ram' },\n        { name: 'Line Input RAM', start: 0x200, size: 0x100, type: 'ram' },\n        { name: 'Text/Lores Page 1', start: 0x400, size: 0x400, type: 'ram' },\n        { name: 'Hires Page 1', start: 0x2000, size: 0x2000, type: 'ram' },\n        { name: 'Hires Page 2', start: 0x4000, size: 0x2000, type: 'ram' },\n        { name: 'I/O', start: 0xc000, size: 0x1000, type: 'io' },\n        { name: 'ROM', start: 0xd000, size: 0x3000, type: 'rom' },\n      ]\n    };\n  }\n\n  showHelp(): string {\n    return 'https://github.com/whscullin/apple2js#readme';\n  }\n}\n\n// Register the platform\nPLATFORMS['apple2e'] = Apple2EPlatform;\n\n// Export for dynamic loading\nexport default Apple2EPlatform;\n\n"],
  "mappings": "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",
  "names": []
}
